"use strict";exports.id=2753,exports.ids=[2753],exports.modules={30361:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},91216:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},82200:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]])},67427:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},69436:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},67187:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])},30748:(e,t,s)=>{s.d(t,{o:()=>I});var a=s(10326),i=s(46226),r=s(91664),l=s(30361),n=s(33734),c=s(82200),o=s(83855),d=s(67427),x=s(39730),m=s(69436);let h=(0,s(62881).Z)("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);var p=s(90434),u=s(13511),f=s(17577),j=s(82791),v=s(51223),g=s(35047),y=s(40145),N=s(84097),b=s(3594),k=s(38443),w=s(78062),Z=s(36969),C=s(77496),z=s(97848);function I({publication:e,className:t}){let{isContact:s,currentUser:I,transactions:A}=(0,u.a)(),S=(0,g.useRouter)(),{toast:M}=(0,N.pm)(),F=e.owner,[$,q]=(0,f.useState)(!1),[R,E]=(0,f.useState)(!1),[H,P]=(0,f.useState)(!1),[D,O]=(0,f.useState)(!1),[V,X]=(0,f.useState)(e.likes||0),[T,Q]=(0,f.useState)(0),[B,G]=(0,f.useState)(!1),{reputation:L,effectiveness:U,responseTime:J,isNewProvider:K}=(0,f.useMemo)(()=>{if(!F)return{reputation:0,effectiveness:0,responseTime:"N/A",isNewProvider:!0};let e=A.filter(e=>e.providerId===F.id||e.clientId===F.id),t=e.filter(e=>e.providerId===F.id&&e.details.clientRating),s=t.reduce((e,t)=>e+(t.details.clientRating||0),0),a=t.length>0?s/t.length:5,i=e.filter(e=>"Sistema"!==e.type&&"Carrito Activo"!==e.status),r=i.filter(e=>"Pagado"===e.status||"Resuelto"===e.status),l=i.length>0?r.length/i.length*100:100,n=e.filter(e=>e.providerId===F.id&&"Cotizaci\xf3n Recibida"===e.status).length>5?"R\xe1pido":e.length>0?"Normal":"Nuevo";return{reputation:a,effectiveness:l,responseTime:n,isNewProvider:"Nuevo"===n}},[F,A]);if(!F||!F.id)return null;let W="product"===e.type,Y=e.productDetails,_=`/companies/${F.id}`,ee=F.profileSetupData?.username||F.name,et=F.profileSetupData?.specialty||"Especialidad no definida",es=F.activeAffiliation,ea=async()=>{let t={title:`Mira esta publicaci\xf3n de ${F.name}`,text:e.description,url:window.location.origin+_};try{if(navigator.share)await navigator.share(t),Q(e=>e+1);else throw Error("Share API not supported")}catch(e){navigator.clipboard.writeText(t.url),M({title:"Enlace Copiado",description:"El enlace al perfil ha sido copiado."})}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,v.cn)("flex flex-col bg-card border-b",t),children:[(0,a.jsxs)("div",{className:"flex items-start p-3 container",children:[(0,a.jsxs)("div",{className:"relative flex-shrink-0 cursor-pointer",onClick:()=>es&&G(!B),children:[a.jsx(p.default,{href:_,passHref:!0,children:(0,a.jsxs)(b.qE,{className:"w-12 h-12 transition-transform duration-300 ease-in-out",style:{transform:B?"translateX(-16px)":"translateX(0)"},children:[a.jsx(b.F$,{src:F.profileImage,alt:F.name}),a.jsx(b.Q5,{children:ee.charAt(0)})]})}),es&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(p.default,{href:`/companies/${es.companyId}`,passHref:!0,children:(0,a.jsxs)(b.qE,{className:"w-12 h-12 border-2 border-background absolute top-0 left-0 transition-transform duration-300 ease-in-out",style:{transform:B?"translateX(16px)":"translateX(0)",zIndex:B?10:-1,opacity:B?1:0},children:[a.jsx(b.F$,{src:es.companyProfileImage,alt:es.companyName}),a.jsx(b.Q5,{children:es.companyName.charAt(0)})]})}),a.jsx("div",{className:(0,v.cn)("w-5 h-5 bg-background rounded-full absolute -bottom-1 -right-1 flex items-center justify-center transition-opacity duration-200",B&&"opacity-0"),children:a.jsx(i.default,{src:es.companyProfileImage,alt:es.companyName,width:18,height:18,className:"rounded-full object-cover"})})]})]}),(0,a.jsxs)("div",{className:"flex-grow ml-3",children:[(0,a.jsxs)("div",{className:(0,v.cn)("transition-transform duration-300 ease-in-out",B&&"translate-y-2"),children:[a.jsx(p.default,{href:_,passHref:!0,children:(0,a.jsxs)("p",{className:"font-semibold text-sm hover:underline flex items-center gap-1.5",children:[ee,F.verified&&a.jsx(l.Z,{className:"w-4 h-4 text-blue-500"})]})}),a.jsx("p",{className:"text-xs text-muted-foreground",children:et})]}),B&&es&&a.jsx(p.default,{href:`/companies/${es.companyId}`,passHref:!0,children:(0,a.jsxs)("div",{className:"transition-transform duration-300 ease-in-out -translate-y-2 cursor-pointer",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Verificado por:"}),a.jsx("p",{className:"font-semibold text-sm hover:underline",children:es.companyName})]})}),!B&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs mt-1 text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(n.Z,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),a.jsx("span",{className:"font-semibold text-foreground",children:L.toFixed(1)})]}),a.jsx(w.Z,{orientation:"vertical",className:"h-3"}),K?a.jsx(k.C,{variant:"secondary",className:"text-xs px-1.5 py-0",children:"Nuevo"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{children:[U.toFixed(0),"% Efec."]}),a.jsx(w.Z,{orientation:"vertical",className:"h-3"}),a.jsx("span",{className:"font-semibold text-green-600",children:J})]})]})]}),a.jsx("div",{className:"flex flex-col items-end",children:a.jsx(r.z,{variant:"link",size:"sm",onClick:()=>{if(!I)return;let e=[I.id,F.id].sort().join("-");(0,C.bG)({senderId:I.id,recipientId:F.id,conversationId:e,text:`\xa1Hola! Me interesa tu publicaci\xf3n.`}),S.push(`/messages/${e}`)},children:"Contactar"})})]}),(0,a.jsxs)("div",{className:"relative w-full group cursor-pointer",onDoubleClick:()=>E(!0),children:[a.jsx(i.default,{src:e.src,alt:e.alt,width:500,height:500,className:(0,v.cn)("w-full h-auto","horizontal"===e.aspectRatio?"aspect-video":"vertical"===e.aspectRatio?"aspect-[4/5]":"aspect-square"),style:{objectFit:"cover"},"data-ai-hint":"service person working"}),a.jsx(r.z,{variant:"ghost",size:"icon",className:"absolute top-2 left-2 z-10 text-white bg-black/20 hover:bg-black/40 rounded-full h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>q(!0),children:a.jsx(c.Z,{className:"w-4 h-4"})}),W&&(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black/60 to-transparent flex justify-between items-center text-white",children:[a.jsx("div",{children:(0,a.jsxs)("p",{className:"font-bold text-lg drop-shadow-md",children:["$",Y?.price.toFixed(2)]})}),(0,a.jsxs)(r.z,{onClick:()=>{if(W&&Y&&I){if(!I.isTransactionsActive){M({variant:"destructive",title:"Acci\xf3n Requerida",description:"Debes activar tu registro de transacciones para poder comprar."});return}(0,Z.x)(I.id,e.id,1),M({title:"Producto a\xf1adido",description:`${Y.name} fue a\xf1adido a tu carrito.`})}},disabled:!1,size:"sm",className:"bg-white/90 text-black hover:bg-white",children:[a.jsx(o.Z,{className:"h-4 w-4 mr-1"})," A\xf1adir al Carrito"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center p-2 container",children:[(0,a.jsxs)(r.z,{variant:"ghost",className:"flex-1",onClick:()=>{O(e=>!e),X(e=>D?e-1:e+1)},children:[a.jsx(d.Z,{className:(0,v.cn)("w-5 h-5",D&&"text-red-500 fill-red-500")}),a.jsx("span",{className:"ml-2 text-xs",children:V})]}),(0,a.jsxs)(r.z,{variant:"ghost",className:"flex-1",onClick:()=>E(!0),children:[a.jsx(x.Z,{className:"w-5 h-5"}),a.jsx("span",{className:"ml-2 text-xs",children:e.comments?.length||0})]}),(0,a.jsxs)(r.z,{variant:"ghost",className:"flex-1",onClick:ea,children:[a.jsx(m.Z,{className:"w-5 h-5"}),a.jsx("span",{className:"ml-2 text-xs",children:T})]}),a.jsx(r.z,{variant:"ghost",className:"flex-1",onClick:()=>{I&&((0,z.Q8)(I.id,F.id),P(!0),M({title:"\xa1Contacto Guardado!",description:`Has a\xf1adido a ${F.name} a tus contactos.`}))},children:a.jsx(h,{className:(0,v.cn)("w-5 h-5",H&&"text-primary fill-primary")})})]}),(0,a.jsxs)("div",{className:"px-4 pb-4 container",children:[(0,a.jsxs)("p",{className:"text-sm",children:[a.jsx(p.default,{href:_,className:"font-semibold hover:underline",children:ee}),a.jsx("span",{className:"text-muted-foreground ml-1",children:e.description})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-2 uppercase cursor-pointer hover:underline",onClick:()=>E(!0),children:["Ver los ",e.comments?.length||0," comentarios"]})]})]}),a.jsx(j.m,{isOpen:$,onOpenChange:q,providerId:F.id,publicationId:e.id}),a.jsx(y.L,{isOpen:R,onOpenChange:E,gallery:[e],owner:F,startIndex:0})]})}}};