exports.id=4022,exports.ids=[4022],exports.modules={25897:(e,a,s)=>{let i={"0fcca1ef621d98be26c0bfcf3d0536b2eafaf90b":()=>Promise.resolve().then(s.bind(s,67500)).then(e=>e.createSessionCookie),"75f66e5bfcc5802b933cf6bb3a81d2e6fb71f193":()=>Promise.resolve().then(s.bind(s,67500)).then(e=>e.signInAsGuest),"92acb34382b7cc06f4de5ac34a55db761fb52098":()=>Promise.resolve().then(s.bind(s,67500)).then(e=>e.clearSessionCookie),d3324d6c83f3a3db02622507b4b401ba56959940:()=>Promise.resolve().then(s.bind(s,67500)).then(e=>e.getOrCreateUser),"453545b1b78662b98891491ec49e72197e0e6598":()=>Promise.resolve().then(s.bind(s,70848)).then(e=>e.addContactToUser),"5490e0fd1c242a5eef82e0a3ff2c7cb530d9e533":()=>Promise.resolve().then(s.bind(s,70848)).then(e=>e.updateUser),"6a3ff619f9bdd51def8f22d0234148dfd9e9330e":()=>Promise.resolve().then(s.bind(s,70848)).then(e=>e.becomeProvider),"7f3879fcde338c8e9e9f8b6e19e6e4358bb243bd":()=>Promise.resolve().then(s.bind(s,70848)).then(e=>e.removeContactFromUser),"86ad7b8d8be30d4d4c2808f5bbf0e5d8e49ba32a":()=>Promise.resolve().then(s.bind(s,70848)).then(e=>e.updateFullProfile),"88599a77cbf14a811bcc0d4db954c292e07a6abc":()=>Promise.resolve().then(s.bind(s,70848)).then(e=>e.updateUserProfileImage),"9011e4229b8124357687ad18fd8d6620369c6645":()=>Promise.resolve().then(s.bind(s,70848)).then(e=>e.checkIdUniqueness),"9dbd3aa17f1b0d765a1019942ecab992f84521ef":()=>Promise.resolve().then(s.bind(s,70848)).then(e=>e.subscribeUser),b6340bdf49ffb4d7a7d472365ccd4c5bb696fb65:()=>Promise.resolve().then(s.bind(s,70848)).then(e=>e.completeInitialSetup),d3b29fd6112ff6850dece7a05d126c764332b184:()=>Promise.resolve().then(s.bind(s,70848)).then(e=>e.toggleGps),e86019e14c4860bd9cb7e35ea4e6b273f001c319:()=>Promise.resolve().then(s.bind(s,70848)).then(e=>e.deactivateTransactions),f1a5672380f0c97ae05054afe728fa52f5b897d1:()=>Promise.resolve().then(s.bind(s,70848)).then(e=>e.activatePromotion),f2adee7cf4f2f8b5b2ceee6347d65222ab445eb7:()=>Promise.resolve().then(s.bind(s,70848)).then(e=>e.updateUserLocation),"58916f5aa51f5451dd6608a06048fa71b5001e5a":()=>Promise.resolve().then(s.bind(s,43764)).then(e=>e.updateCart),"097b808e0ece62513ed2a928f4e9a74b2f5cd67b":()=>Promise.resolve().then(s.bind(s,71239)).then(e=>e.createProduct),"1e07348ea432662ad092ac802f4a5c62c0b6584a":()=>Promise.resolve().then(s.bind(s,71239)).then(e=>e.removeGalleryImage),"6970a6d88c9c6363fee8be49e1b820441b76289d":()=>Promise.resolve().then(s.bind(s,71239)).then(e=>e.addCommentToImage),"911f01a7adbee5e89e0dc6003ef17b4f0ac1f24c":()=>Promise.resolve().then(s.bind(s,71239)).then(e=>e.removeCommentFromImage),d10c5b0c5dc185c0719b914043fd17b76a901250:()=>Promise.resolve().then(s.bind(s,71239)).then(e=>e.updateGalleryImage),feab6f8fe3596605c3a56acf95b545caf1fe8f10:()=>Promise.resolve().then(s.bind(s,71239)).then(e=>e.createPublication),"0c616a113b8092b2a091f6813b802813896764ba":()=>Promise.resolve().then(s.bind(s,43914)).then(e=>e.getFeed),"3114460915aded337a7fc8e5774ab0295592c367":()=>Promise.resolve().then(s.bind(s,43914)).then(e=>e.getPublicProfile),"34617f29a6edb4933278e0d4a548a4261dcfec11":()=>Promise.resolve().then(s.bind(s,43914)).then(e=>e.getProfileGallery),"3b050d596566f18a8c4e29705c8096fceb7da2b3":()=>Promise.resolve().then(s.bind(s,43914)).then(e=>e.getProfileProducts),"080ba4c4ad92ec9d4477bc2807fa26292714577e":()=>Promise.resolve().then(s.bind(s,81869)).then(e=>e.markConversationAsRead),"164e4611f07bc012094243de7aad1b85f88a7558":()=>Promise.resolve().then(s.bind(s,81869)).then(e=>e.sendMessage),"66a7e77381968e9347e32d9d375d0a488bb06bbb":()=>Promise.resolve().then(s.bind(s,81869)).then(e=>e.acceptProposal),"503bea4b84bb783efddf54cdbd971e039fda6b65":()=>Promise.resolve().then(s.bind(s,16356)).then(e=>e.createCampaign),"159b2fe09127c5bd3daae38e767205dac7d77cab":()=>Promise.resolve().then(s.bind(s,20056)).then(e=>e.createAppointmentRequest),"2b06f3a3c6bc1d56ad79fe0105b23730fc59fc3c":()=>Promise.resolve().then(s.bind(s,20056)).then(e=>e.processDirectPayment),"2f895fe1b49f74d13cc6d7f8c94cf7264d1a290d":()=>Promise.resolve().then(s.bind(s,20056)).then(e=>e.resolveCollectionCase),"325dc1f7f655917be2c16c7e98b2d1937c654384":()=>Promise.resolve().then(s.bind(s,20056)).then(e=>e.payCommitment),"4ba72153081d80db8eb0c1d6fd08c42be123a593":()=>Promise.resolve().then(s.bind(s,20056)).then(e=>e.completeWork),"627bffb6d24f861e176920b8fac8e87d263c0e39":()=>Promise.resolve().then(s.bind(s,20056)).then(e=>e.confirmPaymentReceived),"683f24dbc04449f1048d22803857dd2e140d0626":()=>Promise.resolve().then(s.bind(s,20056)).then(e=>e.cancelSystemTransaction),"68e7dcb5930b2f1144a87059acc32941a426a6ba":()=>Promise.resolve().then(s.bind(s,20056)).then(e=>e.createQuoteRequest),"7ffaf3cdca4e8bfa88f07bb6fd67ea5a48706373":()=>Promise.resolve().then(s.bind(s,20056)).then(e=>e.checkout),"862bc6f0e45e133730d43c165242b63549e8d6ef":()=>Promise.resolve().then(s.bind(s,20056)).then(e=>e.confirmWorkReceived),"87e287519cb1cf3861ceab331f0ef39f9649c540":()=>Promise.resolve().then(s.bind(s,20056)).then(e=>e.startDispute),"97ae364a62d4df2288a07a620d912ce0ac96b58c":()=>Promise.resolve().then(s.bind(s,20056)).then(e=>e.writeOffDebt),b436050b9f6ea9d78925f00d451d2f9caa7fe276:()=>Promise.resolve().then(s.bind(s,20056)).then(e=>e.sendQuote),def0aa2b8b4ea6c1e06bbb61a801cf9d7db8217f:()=>Promise.resolve().then(s.bind(s,20056)).then(e=>e.acceptAppointment),eb08ed1ec3e7601b9657c9104751f4cd16e193bf:()=>Promise.resolve().then(s.bind(s,20056)).then(e=>e.acceptQuote),ffe6118251cbf259f053f1ac31bb9bf4df292901:()=>Promise.resolve().then(s.bind(s,20056)).then(e=>e.purchaseGift),"1de1b9f86f7a994eadec21ebf86eec4102a17987":()=>Promise.resolve().then(s.bind(s,70067)).then(e=>e.getDeliveryJobs),"60bff9d42aaa498b8b66134d44b8a07bf56199c0":()=>Promise.resolve().then(s.bind(s,70067)).then(e=>e.resolveDeliveryAsPickup),"6f4fd6fdabfafb35d4de90c6c9f78daac42fdb0b":()=>Promise.resolve().then(s.bind(s,70067)).then(e=>e.assignOwnDelivery),"7edf0eccac857ad0203221242ddd102790570a06":()=>Promise.resolve().then(s.bind(s,70067)).then(e=>e.retryFindDelivery),"9474bc947e5f04b96d7e3e85586064a49fa1ba39":()=>Promise.resolve().then(s.bind(s,70067)).then(e=>e.completeDelivery),ac0ea4208717bfc613e9025d88ba6aaded750086:()=>Promise.resolve().then(s.bind(s,70067)).then(e=>e.acceptDeliveryJob),"1e72a90e6f900d7336ec5a8281f1de84af48b4b7":()=>Promise.resolve().then(s.bind(s,54976)).then(e=>e.approveAffiliation),"51df72862285a32fe97df954d1f4f580371e684b":()=>Promise.resolve().then(s.bind(s,54976)).then(e=>e.requestAffiliation),"9013b146d23fba457fa47abd5c1cc64a18aad8e7":()=>Promise.resolve().then(s.bind(s,54976)).then(e=>e.revokeAffiliation),bd71c1a2808020a48415dffaa93fcbfd7d6e9a61:()=>Promise.resolve().then(s.bind(s,54976)).then(e=>e.rejectAffiliation)};async function t(e,...a){return(await i[e]()).apply(null,a)}e.exports={"0fcca1ef621d98be26c0bfcf3d0536b2eafaf90b":t.bind(null,"0fcca1ef621d98be26c0bfcf3d0536b2eafaf90b"),"75f66e5bfcc5802b933cf6bb3a81d2e6fb71f193":t.bind(null,"75f66e5bfcc5802b933cf6bb3a81d2e6fb71f193"),"92acb34382b7cc06f4de5ac34a55db761fb52098":t.bind(null,"92acb34382b7cc06f4de5ac34a55db761fb52098"),d3324d6c83f3a3db02622507b4b401ba56959940:t.bind(null,"d3324d6c83f3a3db02622507b4b401ba56959940"),"453545b1b78662b98891491ec49e72197e0e6598":t.bind(null,"453545b1b78662b98891491ec49e72197e0e6598"),"5490e0fd1c242a5eef82e0a3ff2c7cb530d9e533":t.bind(null,"5490e0fd1c242a5eef82e0a3ff2c7cb530d9e533"),"6a3ff619f9bdd51def8f22d0234148dfd9e9330e":t.bind(null,"6a3ff619f9bdd51def8f22d0234148dfd9e9330e"),"7f3879fcde338c8e9e9f8b6e19e6e4358bb243bd":t.bind(null,"7f3879fcde338c8e9e9f8b6e19e6e4358bb243bd"),"86ad7b8d8be30d4d4c2808f5bbf0e5d8e49ba32a":t.bind(null,"86ad7b8d8be30d4d4c2808f5bbf0e5d8e49ba32a"),"88599a77cbf14a811bcc0d4db954c292e07a6abc":t.bind(null,"88599a77cbf14a811bcc0d4db954c292e07a6abc"),"9011e4229b8124357687ad18fd8d6620369c6645":t.bind(null,"9011e4229b8124357687ad18fd8d6620369c6645"),"9dbd3aa17f1b0d765a1019942ecab992f84521ef":t.bind(null,"9dbd3aa17f1b0d765a1019942ecab992f84521ef"),b6340bdf49ffb4d7a7d472365ccd4c5bb696fb65:t.bind(null,"b6340bdf49ffb4d7a7d472365ccd4c5bb696fb65"),d3b29fd6112ff6850dece7a05d126c764332b184:t.bind(null,"d3b29fd6112ff6850dece7a05d126c764332b184"),e86019e14c4860bd9cb7e35ea4e6b273f001c319:t.bind(null,"e86019e14c4860bd9cb7e35ea4e6b273f001c319"),f1a5672380f0c97ae05054afe728fa52f5b897d1:t.bind(null,"f1a5672380f0c97ae05054afe728fa52f5b897d1"),f2adee7cf4f2f8b5b2ceee6347d65222ab445eb7:t.bind(null,"f2adee7cf4f2f8b5b2ceee6347d65222ab445eb7"),"58916f5aa51f5451dd6608a06048fa71b5001e5a":t.bind(null,"58916f5aa51f5451dd6608a06048fa71b5001e5a"),"097b808e0ece62513ed2a928f4e9a74b2f5cd67b":t.bind(null,"097b808e0ece62513ed2a928f4e9a74b2f5cd67b"),"1e07348ea432662ad092ac802f4a5c62c0b6584a":t.bind(null,"1e07348ea432662ad092ac802f4a5c62c0b6584a"),"6970a6d88c9c6363fee8be49e1b820441b76289d":t.bind(null,"6970a6d88c9c6363fee8be49e1b820441b76289d"),"911f01a7adbee5e89e0dc6003ef17b4f0ac1f24c":t.bind(null,"911f01a7adbee5e89e0dc6003ef17b4f0ac1f24c"),d10c5b0c5dc185c0719b914043fd17b76a901250:t.bind(null,"d10c5b0c5dc185c0719b914043fd17b76a901250"),feab6f8fe3596605c3a56acf95b545caf1fe8f10:t.bind(null,"feab6f8fe3596605c3a56acf95b545caf1fe8f10"),"0c616a113b8092b2a091f6813b802813896764ba":t.bind(null,"0c616a113b8092b2a091f6813b802813896764ba"),"3114460915aded337a7fc8e5774ab0295592c367":t.bind(null,"3114460915aded337a7fc8e5774ab0295592c367"),"34617f29a6edb4933278e0d4a548a4261dcfec11":t.bind(null,"34617f29a6edb4933278e0d4a548a4261dcfec11"),"3b050d596566f18a8c4e29705c8096fceb7da2b3":t.bind(null,"3b050d596566f18a8c4e29705c8096fceb7da2b3"),"080ba4c4ad92ec9d4477bc2807fa26292714577e":t.bind(null,"080ba4c4ad92ec9d4477bc2807fa26292714577e"),"164e4611f07bc012094243de7aad1b85f88a7558":t.bind(null,"164e4611f07bc012094243de7aad1b85f88a7558"),"66a7e77381968e9347e32d9d375d0a488bb06bbb":t.bind(null,"66a7e77381968e9347e32d9d375d0a488bb06bbb"),"503bea4b84bb783efddf54cdbd971e039fda6b65":t.bind(null,"503bea4b84bb783efddf54cdbd971e039fda6b65"),"159b2fe09127c5bd3daae38e767205dac7d77cab":t.bind(null,"159b2fe09127c5bd3daae38e767205dac7d77cab"),"2b06f3a3c6bc1d56ad79fe0105b23730fc59fc3c":t.bind(null,"2b06f3a3c6bc1d56ad79fe0105b23730fc59fc3c"),"2f895fe1b49f74d13cc6d7f8c94cf7264d1a290d":t.bind(null,"2f895fe1b49f74d13cc6d7f8c94cf7264d1a290d"),"325dc1f7f655917be2c16c7e98b2d1937c654384":t.bind(null,"325dc1f7f655917be2c16c7e98b2d1937c654384"),"4ba72153081d80db8eb0c1d6fd08c42be123a593":t.bind(null,"4ba72153081d80db8eb0c1d6fd08c42be123a593"),"627bffb6d24f861e176920b8fac8e87d263c0e39":t.bind(null,"627bffb6d24f861e176920b8fac8e87d263c0e39"),"683f24dbc04449f1048d22803857dd2e140d0626":t.bind(null,"683f24dbc04449f1048d22803857dd2e140d0626"),"68e7dcb5930b2f1144a87059acc32941a426a6ba":t.bind(null,"68e7dcb5930b2f1144a87059acc32941a426a6ba"),"7ffaf3cdca4e8bfa88f07bb6fd67ea5a48706373":t.bind(null,"7ffaf3cdca4e8bfa88f07bb6fd67ea5a48706373"),"862bc6f0e45e133730d43c165242b63549e8d6ef":t.bind(null,"862bc6f0e45e133730d43c165242b63549e8d6ef"),"87e287519cb1cf3861ceab331f0ef39f9649c540":t.bind(null,"87e287519cb1cf3861ceab331f0ef39f9649c540"),"97ae364a62d4df2288a07a620d912ce0ac96b58c":t.bind(null,"97ae364a62d4df2288a07a620d912ce0ac96b58c"),b436050b9f6ea9d78925f00d451d2f9caa7fe276:t.bind(null,"b436050b9f6ea9d78925f00d451d2f9caa7fe276"),def0aa2b8b4ea6c1e06bbb61a801cf9d7db8217f:t.bind(null,"def0aa2b8b4ea6c1e06bbb61a801cf9d7db8217f"),eb08ed1ec3e7601b9657c9104751f4cd16e193bf:t.bind(null,"eb08ed1ec3e7601b9657c9104751f4cd16e193bf"),ffe6118251cbf259f053f1ac31bb9bf4df292901:t.bind(null,"ffe6118251cbf259f053f1ac31bb9bf4df292901"),"1de1b9f86f7a994eadec21ebf86eec4102a17987":t.bind(null,"1de1b9f86f7a994eadec21ebf86eec4102a17987"),"60bff9d42aaa498b8b66134d44b8a07bf56199c0":t.bind(null,"60bff9d42aaa498b8b66134d44b8a07bf56199c0"),"6f4fd6fdabfafb35d4de90c6c9f78daac42fdb0b":t.bind(null,"6f4fd6fdabfafb35d4de90c6c9f78daac42fdb0b"),"7edf0eccac857ad0203221242ddd102790570a06":t.bind(null,"7edf0eccac857ad0203221242ddd102790570a06"),"9474bc947e5f04b96d7e3e85586064a49fa1ba39":t.bind(null,"9474bc947e5f04b96d7e3e85586064a49fa1ba39"),ac0ea4208717bfc613e9025d88ba6aaded750086:t.bind(null,"ac0ea4208717bfc613e9025d88ba6aaded750086"),"1e72a90e6f900d7336ec5a8281f1de84af48b4b7":t.bind(null,"1e72a90e6f900d7336ec5a8281f1de84af48b4b7"),"51df72862285a32fe97df954d1f4f580371e684b":t.bind(null,"51df72862285a32fe97df954d1f4f580371e684b"),"9013b146d23fba457fa47abd5c1cc64a18aad8e7":t.bind(null,"9013b146d23fba457fa47abd5c1cc64a18aad8e7"),bd71c1a2808020a48415dffaa93fcbfd7d6e9a61:t.bind(null,"bd71c1a2808020a48415dffaa93fcbfd7d6e9a61")}},35438:(e,a,s)=>{"use strict";s.d(a,{O:()=>c});var i=s(10326),t=s(17577),d=s(51223);function c({schedule:e,onStatusChange:a}){let[s,c]=(0,t.useState)("closed"),[n,l]=(0,t.useState)("");return(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs font-semibold",children:[i.jsx("span",{className:(0,d.cn)("w-2 h-2 rounded-full","open"===s?"bg-green-500":"bg-red-500")}),i.jsx("span",{className:(0,d.cn)("open"===s?"text-green-600":"text-red-600"),children:"open"===s?"Abierto":"Cerrado"}),(0,i.jsxs)("span",{className:"text-muted-foreground font-normal",children:["\xb7 ",n]})]})}},53531:(e,a,s)=>{"use strict";s.d(a,{Z:()=>eZ});var i=s(10326),t=s(35047),d=s(91664),c=s(77506),n=s(52679),l=s(88307),r=s(51223),o=s(3594),f=s(17577),b=s(84097),m=s(46226),h=s(83855),u=s(11019),x=s(67427),p=s(39730),j=s(13511),v=s(36969);function g({product:e,onDoubleClick:a}){let{currentUser:s,cart:t}=(0,j.a)(),{toast:c}=(0,b.pm)(),[n,l]=(0,f.useState)(0),[o,g]=(0,f.useState)(!1),N=t.find(a=>a.product.id===e.id),y=N?.quantity||0;if(!s)return null;let w=s.isTransactionsActive,C=a=>{w&&s.id&&(0,v.x)(s.id,e.id,a)};return(0,i.jsxs)("div",{className:"relative aspect-square rounded-lg overflow-hidden group border shadow-sm",onDoubleClick:a,children:[i.jsx(m.default,{src:e.imageUrl,alt:e.name,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-105 cursor-pointer","data-ai-hint":"product image"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),(0,i.jsxs)("div",{className:"absolute inset-0 flex flex-col justify-end p-3 text-white",children:[i.jsx("div",{className:"absolute top-2 right-2",children:0===y?(0,i.jsxs)(d.z,{size:"sm",className:"h-8 rounded-full bg-black/40 hover:bg-black/60 text-white hover:text-white border-none shadow-md",onClick:()=>{if(!w){c({variant:"destructive",title:"Acci\xf3n Requerida",description:"Por favor, activa tu registro de transacciones para poder comprar."});return}s.id&&(0,v.x)(s.id,e.id,1)},disabled:!w,children:[i.jsx(h.Z,{className:"w-4 h-4 mr-1"}),"A\xf1adir"]}):(0,i.jsxs)("div",{className:"flex items-center gap-1 bg-background text-foreground rounded-full h-8 shadow-md",children:[i.jsx(d.z,{variant:"ghost",size:"icon",className:"h-full w-8 rounded-full",onClick:()=>C(y-1),children:i.jsx(u.Z,{className:"h-4 h-4"})}),i.jsx("span",{className:"text-sm font-bold w-4 text-center",children:y}),i.jsx(d.z,{variant:"ghost",size:"icon",className:"h-full w-8 rounded-full",onClick:()=>C(y+1),children:i.jsx(h.Z,{className:"h-4 h-4"})})]})}),i.jsx("h4",{className:"font-bold text-sm leading-tight drop-shadow-md",children:e.name}),(0,i.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,i.jsxs)("p",{className:"text-lg font-bold",children:["$",e.price.toFixed(2)]}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[i.jsx(x.Z,{className:(0,r.cn)("w-4 h-4 cursor-pointer",o&&"text-red-500 fill-red-500"),onClick:()=>{l(e=>o?e-1:e+1),g(e=>!e)}}),i.jsx("span",{className:"text-xs",children:n})]}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[i.jsx(p.Z,{className:"w-4 h-4"}),i.jsx("span",{className:"text-xs",children:"0"})]})]})]})]})]})}var N=s(24118),y=s(3236),w=s(69436),C=s(94019),k=s(98091),P=s(40617),S=s(59593),I=s(687),z=s(41190),A=s(78062),Z=s(55296),D=s(80980);function E({isOpen:e,onOpenChange:a,product:s}){let{currentUser:t,cart:c}=(0,j.a)(),{toast:n}=(0,b.pm)(),[l,r]=(0,f.useState)(""),[p,g]=(0,f.useState)([]),[E,R]=(0,f.useState)({});if(!t||!s)return null;let $=t.id===s.providerId,F=c.find(e=>e.product.id===s.id),O=F?F.quantity:0,T=t.isTransactionsActive,q=e=>{T&&t.id&&(0,v.x)(t.id,s.id,e)},_=()=>{if(l.trim()){let e={authorId:t.id,author:t.name,text:l,profileImage:t.profileImage,likes:0,dislikes:0};g(a=>[...a,e]),r("")}},L=(e,a)=>{let s=E[e],i=[...p],t=i[e];"like"===s&&(t.likes=0),"dislike"===s&&(t.dislikes=0),s===a?R(a=>({...a,[e]:null})):("like"===a&&(t.likes=1),"dislike"===a&&(t.dislikes=1),R(s=>({...s,[e]:a}))),g(i)};return i.jsx(N.Vq,{open:e,onOpenChange:a,children:(0,i.jsxs)(N.cZ,{className:"sm:max-w-2xl p-0 flex flex-col max-h-[90vh]",children:[(0,i.jsxs)("div",{className:"relative aspect-video flex-shrink-0",children:[i.jsx(m.default,{src:s.imageUrl,alt:s.name,fill:!0,className:"object-cover rounded-t-lg","data-ai-hint":"product detail"}),(0,i.jsxs)("div",{className:"absolute bottom-2 right-2 flex items-end gap-2 text-white",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[i.jsx(d.z,{variant:"ghost",size:"icon",className:"text-white hover:text-white bg-black/30 rounded-full h-10 w-10",children:i.jsx(x.Z,{className:"w-5 h-5"})}),i.jsx("span",{className:"text-xs font-bold mt-1 drop-shadow-md",children:"0"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[i.jsx(d.z,{variant:"ghost",size:"icon",className:"text-white hover:text-white bg-black/30 rounded-full h-10 w-10",children:i.jsx(w.Z,{className:"w-5 h-5"})}),i.jsx("span",{className:"text-xs font-bold mt-1 drop-shadow-md",children:"0"})]})]})]}),i.jsx(y.x,{className:"flex-grow overflow-y-auto",children:(0,i.jsxs)("div",{className:"p-6",children:[i.jsx(N.fK,{className:"text-left mb-4",children:i.jsx(N.$N,{className:"text-2xl",children:s.name})}),(0,i.jsxs)("p",{className:"font-bold text-3xl mb-4",children:["$",s.price.toFixed(2)]}),i.jsx("p",{className:"text-base text-foreground mb-6",children:s.description}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-2 mb-6",children:[0===O?(0,i.jsxs)(d.z,{onClick:()=>{if(!T){n({variant:"destructive",title:"Acci\xf3n Requerida",description:"Por favor, activa tu registro de transacciones para poder a\xf1adir productos al carrito."});return}(0,v.x)(t.id,s.id,(O||0)+1)},disabled:!T,children:[i.jsx(h.Z,{className:"mr-2 h-4 w-4"}),"A\xf1adir al Carrito"]}):(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(d.z,{variant:"outline",size:"icon",onClick:()=>q(O-1),disabled:!T,children:i.jsx(u.Z,{className:"h-4 w-4"})}),i.jsx("span",{className:"font-bold text-lg w-10 text-center",children:O}),i.jsx(d.z,{variant:"outline",size:"icon",onClick:()=>q(O+1),disabled:!T,children:i.jsx(h.Z,{className:"h-4 w-4"})}),i.jsx(d.z,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>q(0),disabled:!T,children:i.jsx(C.Z,{className:"h-5 w-5"})})]}),$?(0,i.jsxs)(Z.aR,{children:[i.jsx(Z.vW,{asChild:!0,children:(0,i.jsxs)(d.z,{variant:"destructive",className:"ml-auto",children:[i.jsx(k.Z,{className:"mr-2 h-4 w-4"}),"Eliminar Producto"]})}),(0,i.jsxs)(Z._T,{children:[(0,i.jsxs)(Z.fY,{children:[i.jsx(Z.f$,{children:"\xbfEliminar este producto?"}),i.jsx(Z.yT,{children:"Esta acci\xf3n es permanente y no se puede deshacer. El producto se eliminar\xe1 de tu cat\xe1logo y de cualquier carrito en el que se encuentre."})]}),(0,i.jsxs)(Z.xo,{children:[i.jsx(Z.le,{children:"Cancelar"}),i.jsx(Z.OL,{onClick:()=>{t&&((0,D.yT)(t.id,s.id),a(!1))},children:"S\xed, eliminar"})]})]})]}):i.jsx(d.z,{variant:"secondary",onClick:()=>a(!1),className:"ml-auto",children:"Cerrar"})]}),i.jsx(A.Z,{}),(0,i.jsxs)("div",{className:"mt-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[i.jsx(P.Z,{className:"w-5 h-5"}),"Comentarios (",p.length||0,")"]}),(0,i.jsxs)("div",{className:"space-y-4",children:[p?.map((e,a)=>i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs(o.qE,{className:"w-8 h-8 shrink-0",children:[i.jsx(o.F$,{src:e.profileImage,alt:e.author}),i.jsx(o.Q5,{children:e.author.charAt(0)})]}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("p",{className:"font-semibold text-sm",children:e.author}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.text}),i.jsxs("div",{className:"flex items-center gap-2 mt-1 text-muted-foreground",children:[i.jsx(d.z,{variant:"ghost",size:"icon",className:"w-6 h-6",onClick:()=>L(a,"like"),children:i.jsx(S.Z,{className:`w-4 h-4 ${"like"===E[a]?"text-primary fill-primary":""}`})}),i.jsx("span",{className:"text-xs min-w-[1ch]",children:0}),i.jsx(d.z,{variant:"ghost",size:"icon",className:"w-6 h-6",onClick:()=>L(a,"dislike"),children:i.jsx(I.Z,{className:`w-4 h-4 ${"dislike"===E[a]?"text-destructive fill-destructive":""}`})}),i.jsx("span",{className:"text-xs min-w-[1ch]",children:0})]})]})]},a)),!p?.length&&i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No hay comentarios a\xfan. \xa1S\xe9 el primero!"})]}),(0,i.jsxs)("div",{className:"mt-6 flex items-center gap-2",children:[i.jsx(z.I,{placeholder:"A\xf1ade un comentario...",value:l,onChange:e=>r(e.target.value),onKeyDown:e=>"Enter"===e.key&&_()}),i.jsx(d.z,{onClick:_,disabled:!l.trim(),children:"Comentar"})]})]})]})})]})})}var R=s(90434);s(6708),s(76),s(31922);var $=s(77496),F=s(29752),O=s(82200),T=s(11890),q=s(39183),_=s(71709),L=s(40145),U=s(82791),G=s(38227);function M({gallery:e,owner:a,isLoading:s}){let{toast:t}=(0,b.pm)(),[c,n]=(0,f.useState)(0),[l,o]=(0,f.useState)(!1),[h,u]=(0,f.useState)(!1),[j,v]=(0,f.useState)(0),[g,N]=(0,f.useState)(!1),[y,C]=(0,f.useState)(0),[k,P]=(0,f.useState)(0),[S,I]=(0,f.useState)(0);if(!a)return null;let z=e=>{I(e),o(!0)},A=async()=>{let s=e.length>0?e[c]:null;if(!s)return;let i={title:`Mira esta publicaci\xf3n de ${a.name}`,text:`${s.alt}: ${s.description}`,url:window.location.href};try{if(navigator.share)await navigator.share(i),C(e=>e+1);else throw Error("Share API not supported")}catch(e){navigator.clipboard.writeText(i.url),t({title:"Enlace Copiado",description:"El enlace al perfil ha sido copiado a tu portapapeles."})}},Z=e&&e.length>0&&c<e.length?e[c]:null;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx(F.Zb,{className:"rounded-2xl overflow-hidden shadow-lg relative",children:i.jsx(F.aY,{className:"p-0",children:s?i.jsx(G.O,{className:"w-full aspect-video"}):Z?(0,i.jsxs)("div",{className:"relative group",onDoubleClick:()=>z(c),children:[i.jsx(m.default,{src:Z.src,alt:Z.alt,width:600,height:400,className:"rounded-t-2xl object-cover w-full aspect-[4/3] cursor-pointer","data-ai-hint":"professional workspace"},Z.src),i.jsx(d.z,{variant:"ghost",size:"icon",className:"absolute top-2 left-2 z-10 text-white bg-black/20 rounded-full h-8 w-8",onClick:()=>u(!0),children:i.jsx(O.Z,{className:"w-4 h-4"})}),i.jsx(d.z,{onClick:()=>{n(a=>0===a?e.length-1:a-1)},variant:"ghost",size:"icon",className:"absolute top-1/2 left-2 -translate-y-1/2 bg-black/20 text-white rounded-full h-8 w-8 z-10",children:i.jsx(T.Z,{className:"h-5 w-5"})}),i.jsx(d.z,{onClick:()=>{n(a=>a===e.length-1?0:a+1)},variant:"ghost",size:"icon",className:"absolute top-1/2 right-2 -translate-y-1/2 bg-black/20 text-white rounded-full h-8 w-8 z-10",children:i.jsx(q.Z,{className:"h-5 w-5"})}),(0,i.jsxs)("div",{className:"absolute bottom-2 right-2 flex flex-col items-end gap-2 text-white",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[i.jsx(d.z,{variant:"ghost",size:"icon",className:"text-white hover:text-white bg-black/30 rounded-full h-10 w-10",onClick:()=>{N(e=>!e),v(e=>g?e-1:e+1)},children:i.jsx(x.Z,{className:(0,r.cn)("w-5 h-5",g&&"fill-red-500 text-red-500")})}),(0,i.jsxs)("span",{className:"text-xs font-bold mt-1",children:[(j/1e3).toFixed(1),"k"]})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[i.jsx(d.z,{variant:"ghost",size:"icon",className:"text-white hover:text-white bg-black/30 rounded-full h-10 w-10",onClick:()=>z(c),children:i.jsx(p.Z,{className:"w-5 h-5"})}),i.jsx("span",{className:"text-xs font-bold mt-1",children:k})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[i.jsx(d.z,{variant:"ghost",size:"icon",className:"text-white hover:text-white bg-black/30 rounded-full h-10 w-10",onClick:A,children:i.jsx(w.Z,{className:"w-5 h-5"})}),i.jsx("span",{className:"text-xs font-bold mt-1",children:y})]})]})]}):(0,i.jsxs)("div",{className:"w-full aspect-video bg-muted flex flex-col items-center justify-center text-center p-4",children:[i.jsx(_.Z,{className:"w-16 h-16 text-muted-foreground mb-4"}),i.jsx("h3",{className:"font-bold text-lg text-foreground",children:"Tu galer\xeda est\xe1 vac\xeda"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Haz clic en el bot\xf3n (+) en el pie de p\xe1gina para a\xf1adir tu primera publicaci\xf3n."})]})})}),i.jsx("div",{className:"p-2 grid grid-cols-3 gap-1",children:s?Array.from({length:6}).map((e,a)=>i.jsx(G.O,{className:"aspect-square rounded-md"},a)):e.map((e,a)=>i.jsx("div",{className:"relative aspect-square cursor-pointer group",onClick:()=>n(a),onDoubleClick:()=>z(a),children:i.jsx(m.default,{src:e.src,alt:e.alt,fill:!0,className:(0,r.cn)("object-cover rounded-md transition-all duration-200",c===a?"ring-2 ring-primary ring-offset-2":"ring-0 group-hover:opacity-80"),"data-ai-hint":"product image"})},e.id))})]}),i.jsx(U.m,{isOpen:h,onOpenChange:u,providerId:a.id,publicationId:Z?.id||"profile-report"}),e.length>0&&i.jsx(L.L,{isOpen:l,onOpenChange:o,gallery:e,startIndex:S,owner:a})]})}var V=s(33261),B=s(3634),Q=s(1572),W=s(18019),H=s(22465),J=s(33734),K=s(87131);let X=f.forwardRef(({className:e,...a},s)=>(0,i.jsxs)(K.fC,{ref:s,className:(0,r.cn)("relative flex w-full touch-none select-none items-center",e),...a,children:[i.jsx(K.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:i.jsx(K.e6,{className:"absolute h-full bg-primary"})}),i.jsx(K.bU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));X.displayName=K.fC.displayName;var Y=s(38443),ee=s(73326);s(15424);var ea=(0,s(46242).$)("503bea4b84bb783efddf54cdbd971e039fda6b65"),es=s(44794);let ei={basic:{name:"B\xe1sico",dailyRate:2,impressions:1500,icon:n.Z},advanced:{name:"Avanzado",dailyRate:7,impressions:8e3,icon:B.Z},premium:{name:"Premium",dailyRate:16,impressions:2e4,icon:Q.Z}};function et({isOpen:e,onOpenChange:a}){let{currentUser:s,allPublications:t}=(0,j.a)(),[c,n]=(0,f.useState)(1),[l,o]=(0,f.useState)(null),[b,h]=(0,f.useState)("basic"),[u,x]=(0,f.useState)(1),[p,v]=(0,f.useState)(!1),[g,w]=(0,f.useState)(!1),[C,k]=(0,f.useState)(!1),P=(0,f.useMemo)(()=>ei,[]),S=(0,f.useMemo)(()=>{let e=P[b].dailyRate;p&&(e*=1.15),g&&(e*=1.2);let a=e*u;if(!s)return{dailyCost:0,totalCost:0,discount:0,finalCost:0,initialPayment:0,financedAmount:0};let i=s.isSubscribed?.1*a:0,t=a-i,d=t,c=0;if(C&&t>=20){let e=s.credicoraDetails;e&&(c=Math.min(t*(1-e.initialPaymentPercentage),s.credicoraLimit||0),d=t-c)}return{dailyCost:e,totalCost:a,discount:i,finalCost:t,initialPayment:d,financedAmount:c}},[b,u,p,g,C,s,P]),I=()=>n(e=>e+1),z=()=>n(e=>e-1),Z=()=>{l&&s&&(ea(s.id,{publicationId:l,budget:S.finalCost,durationDays:u,budgetLevel:b,dailyBudget:S.dailyCost,segmentation:{geographic:p?["Este","Oeste"]:[],interests:g?["Tecnolog\xeda","Restaurantes"]:[]},financedWithCredicora:C&&S.finalCost>=20,appliedSubscriptionDiscount:s.isSubscribed?.1:0}),a(!1),D())},D=()=>{n(1),o(null),h("basic"),x(1),v(!1),w(!1),k(!1)};return s?i.jsx(N.Vq,{open:e,onOpenChange:e=>{e||D(),a(e)},children:(0,i.jsxs)(N.cZ,{className:"sm:max-w-md",children:[i.jsx(N.fK,{children:(0,i.jsxs)(N.$N,{className:"flex items-center gap-2",children:[c>1&&i.jsx(d.z,{variant:"ghost",size:"icon",onClick:z,className:"h-7 w-7",children:i.jsx(T.Z,{})}),"Gestor de Campa\xf1as"]})}),(()=>{switch(c){case 1:return(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx(N.Be,{children:"Elige la publicaci\xf3n de tu galer\xeda que quieres impulsar."}),i.jsx(y.x,{className:"h-72",children:i.jsx("div",{className:"grid grid-cols-3 gap-2 pr-4",children:t.filter(e=>e.providerId===s.id).map(e=>i.jsx("div",{className:(0,r.cn)("relative aspect-square rounded-md overflow-hidden cursor-pointer border-4",l===e.id?"border-primary":"border-transparent"),onClick:()=>o(e.id),children:i.jsx(m.default,{src:e.src,alt:e.alt,fill:!0,style:{objectFit:"cover"}})},e.id))})}),i.jsx(N.cN,{children:i.jsx(d.z,{onClick:I,disabled:!l,children:"Siguiente"})})]});case 2:return(0,i.jsxs)("div",{className:"space-y-6",children:[i.jsx(N.Be,{children:"Define el presupuesto y la duraci\xf3n de tu campa\xf1a."}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(es._,{children:"Nivel de Impulso"}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(P).map(([e,a])=>(0,i.jsxs)(d.z,{variant:b===e?"default":"outline",className:"h-20 flex-col gap-1",onClick:()=>h(e),children:[i.jsx(a.icon,{className:"w-6 h-6"}),i.jsx("span",{className:"text-xs",children:a.name}),(0,i.jsxs)("span",{className:"text-xs font-mono",children:["$",a.dailyRate,"/d\xeda"]})]},e))})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx(es._,{children:"Duraci\xf3n"}),(0,i.jsxs)(Y.C,{children:[u," d\xeda(s)"]})]}),i.jsx(X,{value:[u],onValueChange:e=>x(e[0]),min:1,max:30,step:1})]}),(0,i.jsxs)(V.bZ,{children:[i.jsx(W.Z,{className:"h-4 w-4"}),i.jsx(V.Cd,{children:"Alcance Estimado Diario"}),(0,i.jsxs)(V.X,{children:["~",P[b].impressions.toLocaleString("es-VE")," impresiones"]})]}),(0,i.jsxs)(N.cN,{children:[i.jsx(d.z,{variant:"outline",onClick:z,children:"Atr\xe1s"}),i.jsx(d.z,{onClick:I,children:"Siguiente"})]})]});case 3:return(0,i.jsxs)("div",{className:"space-y-6",children:[i.jsx(N.Be,{children:"A\xf1ade capas de segmentaci\xf3n para llegar a tu p\xfablico ideal (opcional)."}),(0,i.jsxs)("div",{className:"space-y-4 rounded-md border p-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)(es._,{htmlFor:"geo-segment",className:"flex-grow pr-4",children:["Segmentaci\xf3n Geogr\xe1fica",i.jsx("span",{className:"block text-xs text-muted-foreground",children:"Enfoca en zonas espec\xedficas de la ciudad. (+15% costo)"})]}),i.jsx(ee.r,{id:"geo-segment",checked:p,onCheckedChange:v})]}),i.jsx(A.Z,{}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)(es._,{htmlFor:"interest-segment",className:"flex-grow pr-4",children:["Segmentaci\xf3n por Intereses",i.jsx("span",{className:"block text-xs text-muted-foreground",children:"Llega a usuarios interesados en otras categor\xedas. (+20% costo)"})]}),i.jsx(ee.r,{id:"interest-segment",checked:g,onCheckedChange:w})]})]}),(0,i.jsxs)(V.bZ,{children:[i.jsx(H.Z,{className:"h-4 w-4"}),i.jsx(V.Cd,{children:"Costo Diario Estimado"}),(0,i.jsxs)(V.X,{children:["$",S.dailyCost.toFixed(2)]})]}),(0,i.jsxs)(N.cN,{children:[i.jsx(d.z,{variant:"outline",onClick:z,children:"Atr\xe1s"}),i.jsx(d.z,{onClick:I,children:"Revisar y Pagar"})]})]});case 4:return(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx(N.Be,{children:"Revisa el resumen final de tu campa\xf1a."}),(0,i.jsxs)("div",{className:"p-4 rounded-lg border bg-muted/50 space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Costo base:"}),(0,i.jsxs)("span",{className:"font-mono",children:["$",(P[b].dailyRate*u).toFixed(2)]})]}),(p||g)&&(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Cargos por segmentaci\xf3n:"}),(0,i.jsxs)("span",{className:"font-mono",children:["+$",(S.totalCost-P[b].dailyRate*u).toFixed(2)]})]}),i.jsx(A.Z,{}),(0,i.jsxs)("div",{className:"flex justify-between font-semibold",children:[i.jsx("span",{children:"Subtotal:"}),(0,i.jsxs)("span",{className:"font-mono",children:["$",S.totalCost.toFixed(2)]})]}),s.isSubscribed&&(0,i.jsxs)("div",{className:"flex justify-between text-green-600",children:[i.jsx("span",{children:"Descuento de Suscriptor (10%):"}),(0,i.jsxs)("span",{className:"font-mono",children:["-$",S.discount.toFixed(2)]})]}),i.jsx(A.Z,{}),(0,i.jsxs)("div",{className:"flex justify-between font-bold text-base",children:[i.jsx("span",{children:"Total Campa\xf1a:"}),(0,i.jsxs)("span",{className:"font-mono",children:["$",S.finalCost.toFixed(2)]})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground text-right italic",children:"Los montos no incluyen IVA (16%)."}),S.finalCost>=20&&(0,i.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[(0,i.jsxs)(es._,{htmlFor:"use-credicora",className:"flex items-center gap-2 font-medium text-blue-600",children:[i.jsx(J.Z,{className:"w-5 h-5 fill-current"}),"Pagar con Credicora"]}),i.jsx(ee.r,{id:"use-credicora",checked:C,onCheckedChange:k})]}),C&&S.finalCost>=20&&(0,i.jsxs)("div",{className:"p-3 text-center bg-blue-50 border border-blue-200 rounded-md text-blue-900",children:[(0,i.jsxs)("p",{className:"font-bold",children:["Total a Pagar Hoy: $",S.initialPayment.toFixed(2)]}),(0,i.jsxs)("p",{className:"text-xs",children:["El resto ($",S.financedAmount.toFixed(2),") se financiar\xe1 en tus cuotas de Credicora."]})]}),(0,i.jsxs)(N.cN,{children:[i.jsx(d.z,{variant:"outline",onClick:z,children:"Atr\xe1s"}),i.jsx(d.z,{onClick:Z,children:"Confirmar y Proceder al Pago"})]})]});default:return null}})()]})}):null}var ed=s(69069),ec=s(97848);function en({user:e}){let a=(0,f.useRef)(null),{toast:s}=(0,b.pm)(),t=()=>{a.current?.click()};return(0,i.jsxs)("div",{className:"relative shrink-0",children:[i.jsx("input",{type:"file",ref:a,onChange:a=>{let i=a.target.files?.[0];if(i){let a=new FileReader;a.onload=a=>{let i=document.createElement("img");i.onload=()=>{let a=document.createElement("canvas"),t=i.width,d=i.height;t>d?t>800&&(d*=800/t,t=800):d>800&&(t*=800/d,d=800),a.width=t,a.height=d;let c=a.getContext("2d");c?.drawImage(i,0,0,t,d);let n=a.toDataURL("image/jpeg",.8);(0,ec.Pd)(e.id,n).then(()=>{s({title:"\xa1Foto de Perfil Actualizada!",description:"Tu nueva foto de perfil est\xe1 visible."})}).catch(e=>{s({variant:"destructive",title:"Error al subir la imagen",description:e.message})})},i.src=a.target?.result},a.readAsDataURL(i)}},className:"hidden",accept:"image/*"}),(0,i.jsxs)(o.qE,{className:"w-16 h-16 cursor-pointer",onClick:t,children:[i.jsx(o.F$,{src:e.profileImage,alt:e.name}),i.jsx(o.Q5,{children:e.name.charAt(0)})]}),i.jsx(d.z,{size:"icon",className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full",onClick:t,children:i.jsx(h.Z,{className:"w-4 w-4"})})]})}var el=s(17069),er=s(48998),eo=s(87053);function ef({user:e,isSelf:a}){var s;let{transactions:t,getUserMetrics:d}=(0,j.a)(),c=(0,f.useMemo)(()=>d(e.id,e.type,t),[e.id,e.type,t,d]),n="provider"===e.type?"Efectividad":"Cumplimiento";return(0,i.jsxs)("div",{className:"flex items-center justify-between w-full text-xs mt-1",children:[(0,i.jsxs)("div",{className:"flex items-center flex-wrap gap-x-2 gap-y-1 text-muted-foreground",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[i.jsx(J.Z,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"}),i.jsx("span",{className:"font-semibold text-foreground",children:c.reputation.toFixed(1)})]}),i.jsx(A.Z,{orientation:"vertical",className:"h-3"}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[i.jsx(el.Z,{className:"w-4 h-4 text-green-500"}),(0,i.jsxs)("span",{className:"font-semibold text-foreground",children:[c.effectiveness.toFixed(0),"%"]}),i.jsx("span",{className:"hidden sm:inline-block",children:n})]}),i.jsx(A.Z,{orientation:"vertical",className:"h-3"}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[i.jsx(er.Z,{className:"w-4 h-4 text-blue-500"}),i.jsx("span",{className:"font-semibold text-foreground",children:(s=c.averagePaymentTimeMs)<=0?"0ms":s<1e3?`${s}ms`:s<6e4?`${(s/1e3).toFixed(1)}s`:s<36e5?`${Math.round(s/6e4)}m`:`${Math.round(s/36e5)}h`}),i.jsx("span",{className:"hidden sm:inline-block",children:"T. Pago"})]})]}),a&&(0,i.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[i.jsx(eo.Z,{className:"w-4 h-4 text-pink-500"}),i.jsx("span",{className:"font-semibold text-foreground",children:e.giftCredits||0})]})]})}var eb=s(30361),em=s(38787),eh=s(88378),eu=s(77636),ex=s(15919),ep=s(51027);let ej=({value:e})=>i.jsx(Y.C,{variant:"secondary",className:"font-normal",children:e});function ev({provider:e,isSelfProfile:a,onContact:s}){let c=(0,t.useRouter)(),{currentUser:n}=(0,j.a)(),l=e.profileSetupData?.useUsername&&e.profileSetupData.username?e.profileSetupData.username:e.name,f=e.profileSetupData?.specialty||"Sin especialidad definida",b=e.profileSetupData?.providerType==="company",m=[...e.profileSetupData?.specializedData?.mainTrades||[],...e.profileSetupData?.specializedData?.mainServices||[],...e.profileSetupData?.specializedData?.beautyTrades||[],...e.profileSetupData?.specializedData?.specialties||[],...e.profileSetupData?.specializedData?.specificSkills||[],...e.profileSetupData?.specializedData?.keySkills||[]];return(0,i.jsxs)("div",{className:"sticky top-0 z-20 bg-background/95 backdrop-blur-sm pt-4 px-4 pb-3 border-b",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[a&&n?i.jsx(en,{user:{id:n.id,name:n.name,profileImage:n.profileImage}}):(0,i.jsxs)(o.qE,{className:"w-16 h-16 shrink-0",children:[i.jsx(o.F$,{src:e.profileImage,alt:l}),i.jsx(o.Q5,{children:l.charAt(0)})]}),(0,i.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("h1",{className:"text-lg font-bold text-foreground truncate",children:l}),e.isSubscribed&&i.jsx(eb.Z,{className:"w-5 h-5 text-blue-500"}),b&&i.jsx(em.Z,{className:"w-4 h-4 text-muted-foreground"})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:f}),i.jsx(ef,{user:e,isSelf:a})]}),(0,i.jsxs)("div",{className:"flex flex-col items-end gap-2 shrink-0",children:[a?(0,i.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>{c.push(b?"/profile-setup/company":"/profile-setup/personal")},children:[i.jsx(eh.Z,{className:"w-4 h-4 mr-2"}),"Ajustes"]}):i.jsx(d.z,{variant:"default",size:"sm",onClick:s,children:"Contactar"}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(eu.Z,{className:(0,r.cn)("h-5 w-5",e.isGpsActive?"text-green-500":"text-muted-foreground")})})]})]}),m.length>0&&(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-1.5 pt-3",children:[m.slice(0,3).map(e=>i.jsx(ej,{value:e},e)),m.length>3&&(0,i.jsxs)(ep.J2,{children:[i.jsx(ep.xo,{asChild:!0,children:i.jsx(d.z,{variant:"ghost",className:"flex items-center gap-1 text-xs p-1 h-auto text-muted-foreground",children:i.jsx(ex.Z,{className:"w-4 h-4"})})}),i.jsx(ep.yk,{className:"w-72",children:(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[i.jsx("h4",{className:"font-bold mb-2",children:"Todas las Habilidades"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:m.map(e=>i.jsx(Y.C,{variant:"secondary",children:e},e))})]})})]})]})]})}var eg=s(35438),eN=s(91855);let ey=eN.fC,ew=eN.wy,eC=eN.Fw;var ek=s(941);let eP=["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado","Domingo"],eS=eP.reduce((e,a)=>(e[a]={from:"09:00",to:"17:00",active:!0},e),{});function eI({provider:e,isSelfProfile:a}){let[s,t]=(0,f.useState)(e.profileSetupData?.schedule||eS),[n,l]=(0,f.useState)(!1),{toast:r}=(0,b.pm)(),o=(e,a,s)=>{t(i=>({...i,[e]:{...i[e],[a]:s}}))},m=async()=>{l(!0);try{await (0,ec.Nq)(e.id,{"profileSetupData.schedule":s}),r({title:"Horario actualizado",description:"Tus nuevos horarios de atenci\xf3n est\xe1n visibles."})}catch(e){r({variant:"destructive",title:"Error",description:e instanceof Error?e.message:"No se pudo guardar el horario."})}finally{l(!1)}};return a?i.jsx(F.Zb,{className:"bg-muted/30",children:(0,i.jsxs)(ey,{children:[i.jsx(ew,{asChild:!0,children:(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 cursor-pointer",children:[i.jsx(eg.O,{schedule:s}),(0,i.jsxs)(d.z,{variant:"ghost",size:"sm",children:["Editar",i.jsx(ek.Z,{className:"h-4 w-4 ml-2"})]})]})}),i.jsx(eC,{children:(0,i.jsxs)(F.aY,{className:"pt-0",children:[i.jsx("div",{className:"space-y-4",children:eP.map(e=>(0,i.jsxs)("div",{className:"flex items-center gap-4 p-2 rounded-md bg-background border",children:[i.jsx(ee.r,{id:`active-${e}`,checked:s[e]?.active||!1,onCheckedChange:a=>o(e,"active",a)}),i.jsx(es._,{htmlFor:`active-${e}`,className:"flex-grow font-semibold",children:e}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(z.I,{type:"time",className:"w-24 h-8",value:s[e]?.from||"09:00",onChange:a=>o(e,"from",a.target.value),disabled:!s[e]?.active}),i.jsx("span",{children:"-"}),i.jsx(z.I,{type:"time",className:"w-24 h-8",value:s[e]?.to||"17:00",onChange:a=>o(e,"to",a.target.value),disabled:!s[e]?.active})]})]},e))}),(0,i.jsxs)(d.z,{className:"w-full mt-4",onClick:m,disabled:n,children:[n&&i.jsx(c.Z,{className:"mr-2 h-4 w-4 animate-spin"}),n?"Guardando...":"Guardar Cambios"]})]})})]})}):i.jsx(F.Zb,{className:"bg-muted/30",children:i.jsx(F.Ol,{children:i.jsx(eg.O,{schedule:e.profileSetupData?.schedule})})})}var ez=s(22119);function eA({provider:e}){let{currentUser:a,isContact:s}=(0,j.a)(),{toast:t}=(0,b.pm)(),c=async()=>{if(a)try{await (0,ez.iO)(a.id,e.id),t({title:"Solicitud Enviada",description:`Tu solicitud para unirte a la red de ${e.name} ha sido enviada.`})}catch(e){t({variant:"destructive",title:"Error en la Solicitud",description:e.message})}};return a&&a.id!==e.id?"provider"===a.type&&e.profileSetupData?.providerType==="company"?i.jsx("div",{className:"px-4",children:(0,i.jsxs)(d.z,{onClick:c,className:"w-full",children:[i.jsx(eb.Z,{className:"mr-2 h-4 w-4"}),"Solicitar Verificaci\xf3n de Empresa"]})}):e.activeAffiliation?i.jsx("div",{className:"px-4",children:i.jsx(R.default,{href:`/companies/${e.activeAffiliation.companyId}`,className:"group block",children:(0,i.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg flex items-center gap-3 border hover:border-primary/50 transition-colors",children:[i.jsx("div",{className:"w-10 h-10 shrink-0 bg-background rounded-full flex items-center justify-center",children:i.jsx(eb.Z,{className:"w-6 h-6 text-green-500"})}),(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Verificado por:"}),i.jsx("p",{className:"font-semibold text-foreground group-hover:underline",children:e.activeAffiliation.companyName}),i.jsx("p",{className:"text-xs text-muted-foreground",children:e.activeAffiliation.companySpecialty})]})]})})}):null:null}function eZ({userId:e}){let{currentUser:a,users:s,transactions:m,isContact:h}=(0,j.a)(),{toast:u}=(0,b.pm)(),x=(0,t.useRouter)(),[p,v]=(0,f.useState)(null),[N,y]=(0,f.useState)([]),[w,C]=(0,f.useState)([]),[k,P]=(0,f.useState)(!0),[S,I]=(0,f.useState)(""),[A,Z]=(0,f.useState)([]),[D,F]=(0,f.useState)("publications"),[O,T]=(0,f.useState)(!1),[q,_]=(0,f.useState)(null),[L,U]=(0,f.useState)(null),[G,V]=(0,f.useState)(!1),B=a?.id===e,Q=(0,f.useMemo)(()=>S?N.filter(e=>e.name.toLowerCase().includes(S.toLowerCase())):N,[N,S]);if(k)return i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx(c.Z,{className:"h-12 w-12 animate-spin text-primary"})});if(!p)return(0,i.jsxs)("main",{className:"container py-8 text-center",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Perfil no encontrado"}),i.jsx("p",{className:"text-muted-foreground mt-4",children:"No se pudo encontrar el proveedor que est\xe1s buscando."}),i.jsx(d.z,{onClick:()=>x.push("/"),className:"mt-6",children:"Volver al Inicio"})]});let W="provider"===p.type,H=W&&p.profileSetupData?.providerType==="company",J=p.profileSetupData?.offerType;return(0,i.jsxs)("div",{className:"bg-background min-h-screen",children:[(0,i.jsxs)("div",{className:"container mx-auto px-0 md:px-2 max-w-2xl pb-24",children:[i.jsx(ev,{provider:p,isSelfProfile:B,onContact:()=>{a&&(0,$.bG)({recipientId:p.id,text:`\xa1Hola! Me interesa tu perfil.`,conversationId:[a.id,p.id].sort().join("-"),senderId:a.id}).then(e=>x.push(`/messages/${e}`))}}),(0,i.jsxs)("div",{className:"px-4 py-4 space-y-4",children:[i.jsx(eA,{provider:p}),i.jsx(eI,{provider:p,isSelfProfile:B})]}),B&&W&&!H&&i.jsx("div",{className:"flex items-center gap-2 mt-4 px-4",children:(0,i.jsxs)(d.z,{variant:"outline",className:"flex-1",onClick:()=>T(!0),children:[i.jsx(n.Z,{className:"w-4 h-4 mr-2"}),"Campa\xf1as"]})}),i.jsx("div",{className:"border-b mt-4 sticky top-0 z-20 bg-background/95 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"container flex justify-around",children:[("service"===J||"both"===J||!J)&&i.jsx(d.z,{variant:"ghost",className:(0,r.cn)("flex-1 rounded-none","publications"===D&&"border-b-2 border-primary text-primary"),onClick:()=>F("publications"),children:"Publicaciones"}),("product"===J||"both"===J)&&i.jsx(d.z,{variant:"ghost",className:(0,r.cn)("flex-1 rounded-none","catalog"===D&&"border-b-2 border-primary text-primary"),onClick:()=>F("catalog"),children:"Cat\xe1logo"}),H&&i.jsx(d.z,{variant:"ghost",className:(0,r.cn)("flex-1 rounded-none","team"===D&&"border-b-2 border-primary text-primary"),onClick:()=>F("team"),children:"Talento Asociado"})]})}),(0,i.jsxs)("div",{className:"mt-4",children:["publications"===D&&i.jsx(M,{gallery:w,owner:p,isLoading:k}),"catalog"===D&&(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("div",{className:"px-4",children:(0,i.jsxs)("div",{className:"relative",children:[i.jsx(l.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(z.I,{placeholder:"Buscar en el cat\xe1logo...",className:"pl-9",value:S,onChange:e=>I(e.target.value)})]})}),k?i.jsx("div",{className:"text-center",children:i.jsx(c.Z,{className:"w-6 h-6 animate-spin"})}):Q.length>0?i.jsx("div",{className:"grid grid-cols-2 gap-2 px-2",children:Q.map(e=>i.jsx(g,{product:e,onDoubleClick:()=>{U(e),V(!0)}},e.id))}):i.jsx("div",{className:"text-center py-10 text-muted-foreground",children:i.jsx("p",{children:"No se encontraron productos."})})]}),"team"===D&&H&&i.jsx("div",{className:"px-4 space-y-3",children:A.length>0?A.map(e=>i.jsx(R.default,{href:`/companies/${e.id}`,children:(0,i.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted",children:[(0,i.jsxs)(o.qE,{children:[i.jsx(o.F$,{src:e.profileImage}),i.jsx(o.Q5,{children:e.name.charAt(0)})]}),(0,i.jsxs)("div",{children:[i.jsx("p",{className:"font-semibold",children:e.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.profileSetupData?.specialty})]})]})},e.id)):i.jsx("div",{className:"text-center py-10 text-muted-foreground",children:i.jsx("p",{children:"A\xfan no tienes talento asociado."})})})]})]}),i.jsx(E,{isOpen:G,onOpenChange:V,product:L}),i.jsx(et,{isOpen:O,onOpenChange:T}),i.jsx(ed.m,{isOpen:!!q,onOpenChange:()=>_(null),transaction:q})]})}},22119:(e,a,s)=>{"use strict";s.d(a,{Cr:()=>c,Sk:()=>n,iO:()=>d,zO:()=>t}),s(15424);var i=s(46242),t=(0,i.$)("9013b146d23fba457fa47abd5c1cc64a18aad8e7"),d=(0,i.$)("51df72862285a32fe97df954d1f4f580371e684b"),c=(0,i.$)("1e72a90e6f900d7336ec5a8281f1de84af48b4b7"),n=(0,i.$)("bd71c1a2808020a48415dffaa93fcbfd7d6e9a61")},71173:(e,a,s)=>{"use strict";s.a(e,async(e,i)=>{try{s.d(a,{Em:()=>b,GA:()=>o,_c:()=>f,ds:()=>r});var t=s(27745);s(26461);var d=s(11667),c=s(72929),n=s(85723),l=e([c]);async function r(e,a){let s=e.collection("affiliations").where("providerId","==",a.providerId).where("companyId","==",a.companyId).where("status","in",["pending","approved"]);if(!(await s.get()).empty)throw Error("An affiliation request for this company already exists or has been approved.");let i=`affil-${a.providerId}-${a.companyId}`,t=new Date().toISOString(),d={id:i,providerId:a.providerId,companyId:a.companyId,status:"pending",requestedAt:t,updatedAt:t};await e.collection("affiliations").doc(i).set(d)}async function o(e,a){let s=e.batch(),i=e.collection("affiliations").doc(a.affiliationId),t=a.affiliationId.split("-")[1],d=a.affiliationId.split("-")[2],n=e.collection("users").doc(t),l=e.collection("users").doc(d),r=await l.get();if(!r.exists)throw Error("Company not found");let o=r.data();s.update(i,{status:"approved",updatedAt:c.FieldValue.serverTimestamp()}),s.update(n,{activeAffiliation:{companyId:o.id,companyName:o.profileSetupData?.username||o.name,companyProfileImage:o.profileImage,companySpecialty:o.profileSetupData?.specialty||""}}),await s.commit()}async function f(e,a){await e.collection("affiliations").doc(a.affiliationId).update({status:"rejected",updatedAt:c.FieldValue.serverTimestamp()})}async function b(e,a){let s=e.batch(),i=e.collection("affiliations").doc(a.affiliationId),t=a.affiliationId.split("-")[1],d=e.collection("users").doc(t);s.update(i,{status:"revoked",updatedAt:c.FieldValue.serverTimestamp()}),s.update(d,{activeAffiliation:c.FieldValue.delete()}),await s.commit()}c=(l.then?(await l)():l)[0],d.Ry({affiliationId:d.Z_(),actorId:d.Z_()}),d.Ry({providerId:d.Z_(),companyId:d.Z_()}),(0,n.h)([r,o,f,b]),(0,t.j)("a306ed272541d58f45c16d1a05b8f0957cccb016",r),(0,t.j)("8960e78a506f0f07a91b57b7980bf155d1bbc683",o),(0,t.j)("a6144938ce819370299e14085d8598c0184eed82",f),(0,t.j)("a23e8d76efc85931b9229f05ae33d3a2038f5318",b),i()}catch(e){i(e)}})},88110:(e,a,s)=>{"use strict";s.a(e,async(e,i)=>{try{s.d(a,{P:()=>f});var t=s(27745);s(26461);var d=s(11667),c=s(76756),n=s(19980),l=s(50604),r=s(85723),o=e([l]);l=(o.then?(await o)():o)[0];let b=d.Ry({userId:d.Z_(),publicationId:d.Z_(),budget:d.Rx(),durationDays:d.Rx(),budgetLevel:d.Km(["basic","advanced","premium"]),dailyBudget:d.Rx(),segmentation:d.Ry({geographic:d.IX(d.Z_()).optional(),interests:d.IX(d.Z_()).optional()}),appliedSubscriptionDiscount:d.Rx().optional(),financedWithCredicora:d.O7()});async function f(e,a){let s=`camp-${a.userId}-${Date.now()}`,i=new Date,t=(0,c.E)(i,a.durationDays),d={id:s,providerId:a.userId,publicationId:a.publicationId,budget:a.budget,durationDays:a.durationDays,startDate:(0,n.c)(i),endDate:(0,n.c)(t),status:"pending_payment",stats:{impressions:0,reach:0,clicks:0,messages:0},budgetLevel:a.budgetLevel,dailyBudget:a.dailyBudget,segmentation:a.segmentation,appliedSubscriptionDiscount:a.appliedSubscriptionDiscount,financedWithCredicora:a.financedWithCredicora};return await (0,l.qM)(e,{type:"Sistema",status:"Pago Enviado - Esperando Confirmaci\xf3n",date:new Date().toISOString(),amount:a.budget,clientId:a.userId,providerId:"corabo-admin",participantIds:[a.userId,"corabo-admin"],details:{system:`Pago de campa\xf1a publicitaria: ${s}`}}),await e.collection("campaigns").doc(s).set(d),d}(0,r.h)([b,f]),(0,t.j)("c962778fd1d9eb5f009b7f9933eb7a2eb372385f",b),(0,t.j)("3495fde038e0348f43382a2b53b3bbf7430ab0d5",f),i()}catch(e){i(e)}})},54976:(e,a,s)=>{"use strict";s.a(e,async(e,i)=>{try{s.r(a),s.d(a,{approveAffiliation:()=>b,rejectAffiliation:()=>m,requestAffiliation:()=>f,revokeAffiliation:()=>h});var t=s(27745);s(26461);var d=s(30207),c=s(71173),n=s(9698),l=s(30266),r=s(85723),o=e([c,l]);async function f(e,a){let s=(0,l.hi)();try{await (0,c.ds)(s,{providerId:e,companyId:a}),await (0,n.i6)(s,{userId:a,type:"affiliation_request",title:"Nueva Solicitud de Asociaci\xf3n",message:"Un profesional desea asociarse a tu red de talento.",link:"/admin?tab=affiliations"}),(0,d.revalidatePath)("/admin")}catch(a){let e=a instanceof Error?a.message:"Failed to request affiliation.";throw console.error("[ACTION_ERROR] requestAffiliation:",a),Error(e)}}async function b(e,a){let s=(0,l.hi)();try{await (0,c.GA)(s,{affiliationId:e,actorId:a});let i=e.split("-")[1];await (0,n.i6)(s,{userId:i,type:"admin_alert",title:"\xa1Asociaci\xf3n Aprobada!",message:"Tu solicitud para unirte a una red de talento ha sido aprobada.",link:"/profile/publications"}),(0,d.revalidatePath)("/admin"),(0,d.revalidatePath)(`/companies/${i}`)}catch(a){let e=a instanceof Error?a.message:"Failed to approve affiliation.";throw console.error("[ACTION_ERROR] approveAffiliation:",a),Error(e)}}async function m(e,a){let s=(0,l.hi)();try{await (0,c._c)(s,{affiliationId:e,actorId:a});let i=e.split("-")[1];await (0,n.i6)(s,{userId:i,type:"admin_alert",title:"Solicitud de Asociaci\xf3n Rechazada",message:`Tu solicitud de asociaci\xf3n ha sido rechazada.`,link:"/profile/publications"}),(0,d.revalidatePath)("/admin")}catch(a){let e=a instanceof Error?a.message:"Failed to reject affiliation.";throw console.error("[ACTION_ERROR] rejectAffiliation:",a),Error(e)}}async function h(e,a){let s=(0,l.hi)();try{await (0,c.Em)(s,{affiliationId:e,actorId:a});let i=e.split("-")[1];await (0,n.i6)(s,{userId:i,type:"admin_alert",title:"Asociaci\xf3n Revocada",message:`Tu asociaci\xf3n con una empresa ha sido revocada.`,link:"/profile/publications"}),(0,d.revalidatePath)("/admin"),(0,d.revalidatePath)(`/companies/${i}`)}catch(a){let e=a instanceof Error?a.message:"Failed to revoke affiliation.";throw console.error("[ACTION_ERROR] revokeAffiliation:",a),Error(e)}}[c,l]=o.then?(await o)():o,(0,r.h)([f,b,m,h]),(0,t.j)("51df72862285a32fe97df954d1f4f580371e684b",f),(0,t.j)("1e72a90e6f900d7336ec5a8281f1de84af48b4b7",b),(0,t.j)("bd71c1a2808020a48415dffaa93fcbfd7d6e9a61",m),(0,t.j)("9013b146d23fba457fa47abd5c1cc64a18aad8e7",h),i()}catch(e){i(e)}})},16356:(e,a,s)=>{"use strict";s.a(e,async(e,i)=>{try{s.r(a),s.d(a,{createCampaign:()=>o});var t=s(27745);s(26461);var d=s(30207),c=s(88110),n=s(30266),l=s(85723),r=e([c,n]);async function o(e,a){let s=(0,n.hi)();try{let i={...a,userId:e},t=await (0,c.P)(s,i);return(0,d.revalidatePath)("/profile"),(0,d.revalidatePath)("/transactions"),(0,d.revalidatePath)("/payment"),t}catch(a){let e=a instanceof Error?a.message:"Failed to create campaign.";throw console.error("[ACTION_ERROR] createCampaign:",a),Error(e)}}[c,n]=r.then?(await r)():r,(0,l.h)([o]),(0,t.j)("503bea4b84bb783efddf54cdbd971e039fda6b65",o),i()}catch(e){i(e)}})}};