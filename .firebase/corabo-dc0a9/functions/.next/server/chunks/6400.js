"use strict";exports.id=6400,exports.ids=[6400],exports.modules={82791:(e,a,t)=>{t.d(a,{m:()=>h});var i=t(10326),s=t(17577),c=t(24118),r=t(91664),n=t(82015),d=t(44794),o=t(84097),l=t(82200),u=t(91216),p=t(67187),f=t(77506),m=t(73326);let v=["Contenido Ofensivo","Informaci\xf3n Falsa","Es Spam","Intento de Fraude"];function h({isOpen:e,onOpenChange:a,providerId:t,publicationId:h}){let{toast:b}=(0,o.pm)(),[g,x]=(0,s.useState)(""),[y,j]=(0,s.useState)(""),[w,D]=(0,s.useState)(!1),[N,I]=(0,s.useState)(!1),[A,S]=(0,s.useState)(!1);return i.jsx(c.Vq,{open:e,onOpenChange:a,children:(0,i.jsxs)(c.cZ,{className:"sm:max-w-md",children:[(0,i.jsxs)(c.fK,{children:[(0,i.jsxs)(c.$N,{className:"flex items-center gap-2",children:[i.jsx(l.Z,{className:"w-5 h-5 text-destructive"}),"Denunciar Publicaci\xf3n"]}),i.jsx(c.Be,{children:"Ay\xfadanos a entender qu\xe9 problema tiene esta publicaci\xf3n. Tu reporte es an\xf3nimo."})]}),(0,i.jsxs)("div",{className:"py-4 space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(d._,{children:"Motivo (selecciona uno o m\xe1s)"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(e=>i.jsx(r.z,{variant:g===e?"destructive":"outline",size:"sm",onClick:()=>x(e),children:e},e))})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(d._,{htmlFor:"description",children:"Descripci\xf3n (opcional)"}),i.jsx(n.g,{id:"description",placeholder:"Danos m\xe1s detalles sobre el problema...",value:y,onChange:e=>j(e.target.value),rows:4})]}),(0,i.jsxs)("div",{className:"space-y-4 pt-4 border-t",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)(d._,{htmlFor:"hide-content",className:"flex items-center gap-3 cursor-pointer",children:[i.jsx(u.Z,{className:"w-5 h-5"}),"No mostrar m\xe1s este tipo de contenido"]}),i.jsx(m.r,{id:"hide-content",checked:w,onCheckedChange:D})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)(d._,{htmlFor:"hide-provider",className:"flex items-center gap-3 cursor-pointer",children:[i.jsx(p.Z,{className:"w-5 h-5"}),"No mostrar m\xe1s a este proveedor"]}),i.jsx(m.r,{id:"hide-provider",checked:N,onCheckedChange:I})]})]})]}),(0,i.jsxs)(c.cN,{children:[i.jsx(r.z,{variant:"outline",onClick:()=>a(!1),children:"Cancelar"}),(0,i.jsxs)(r.z,{variant:"destructive",onClick:()=>{if(!g&&!y){b({variant:"destructive",title:"Falta informaci\xf3n",description:"Por favor, selecciona un motivo o escribe una descripci\xf3n."});return}S(!0),setTimeout(()=>{b({title:"Denuncia Enviada",description:"Gracias por ayudarnos a mantener la comunidad segura. Revisaremos tu denuncia a la brevedad."}),x(""),j(""),D(!1),I(!1),S(!1),a(!1)},1e3)},disabled:A||!g&&!y,children:[A&&i.jsx(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Enviar Denuncia"]})]})]})})}},38227:(e,a,t)=>{t.d(a,{O:()=>c});var i=t(10326),s=t(51223);function c({className:e,...a}){return i.jsx("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",e),...a})}},31922:(e,a,t)=>{t.d(a,{GG:()=>s}),t(15424);var i=t(46242),s=(0,i.$)("0c616a113b8092b2a091f6813b802813896764ba");(0,i.$)("3114460915aded337a7fc8e5774ab0295592c367"),(0,i.$)("34617f29a6edb4933278e0d4a548a4261dcfec11"),(0,i.$)("3b050d596566f18a8c4e29705c8096fceb7da2b3")},77496:(e,a,t)=>{t.d(a,{R7:()=>c,bG:()=>s}),t(15424);var i=t(46242);(0,i.$)("66a7e77381968e9347e32d9d375d0a488bb06bbb");var s=(0,i.$)("164e4611f07bc012094243de7aad1b85f88a7558"),c=(0,i.$)("080ba4c4ad92ec9d4477bc2807fa26292714577e")},2102:(e,a,t)=>{t.d(a,{D9:()=>s,DF:()=>r,Rv:()=>n,ej:()=>c});var i=t(27745);async function s(e,a){let t=e.collection("publications").orderBy("createdAt","desc").limit(a.limitNum||10);if(a.startAfterDocId){let i=await e.collection("publications").doc(a.startAfterDocId).get();i.exists?t=t.startAfter(i):console.warn(`Cursor document with ID ${a.startAfterDocId} not found. Fetching from the beginning.`)}let i=await t.get(),s=i.docs.map(e=>e.data()),c=[...new Set(s.map(e=>e.providerId).filter(Boolean))],r=new Map;if(c.length>0){let a=e.collection("users").where("id","in",c);(await a.get()).forEach(e=>{let a=e.data();r.set(a.id,a)})}let n=s.map(e=>{let a=r.get(e.providerId)||null,t=null;return a&&(t={id:a.id,name:a.name,profileImage:a.profileImage,verified:a.verified,isGpsActive:a.isGpsActive,reputation:a.reputation,profileSetupData:{specialty:a.profileSetupData?.specialty,providerType:a.profileSetupData?.providerType,username:a.profileSetupData?.username,primaryCategory:a.profileSetupData?.primaryCategory},activeAffiliation:a.activeAffiliation||null}),{...e,owner:t}}),d=i.docs[i.docs.length-1];return{publications:n,lastVisibleDocId:i.docs.length===(a.limitNum||10)?d?.id:void 0}}async function c(e,a){let t=e.collection("users").doc(a.userId),i=await t.get();if(!i.exists)return null;let s=i.data();return{id:s.id,name:s.name,lastName:s.lastName,type:s.type,profileImage:s.profileImage,reputation:s.reputation,effectiveness:s.effectiveness,verified:s.verified,isSubscribed:s.isSubscribed,isGpsActive:s.isGpsActive,isTransactionsActive:s.isTransactionsActive,profileSetupData:s.profileSetupData,country:s.country,credicoraLevel:s.credicoraLevel,credicoraLimit:s.credicoraLimit,activeAffiliation:s.activeAffiliation||null}}async function r(e,a){let{userId:t,limitNum:i=9,startAfterDocId:s}=a,c=e.collection("publications").where("providerId","==",t).where("type","in",["image","video"]).orderBy("createdAt","desc").limit(i);if(s){let a=await e.collection("publications").doc(s).get();a.exists&&(c=c.startAfter(a))}let r=await c.get(),n=r.docs.map(e=>e.data()),d=r.docs[r.docs.length-1];return{gallery:n,lastVisibleDocId:r.docs.length===i?d?.id:void 0}}async function n(e,a){let{userId:t,limitNum:i=10,startAfterDocId:s}=a,c=e.collection("publications").where("providerId","==",t).where("type","==","product").orderBy("createdAt","desc").limit(i);if(s){let a=await e.collection("publications").doc(s).get();a.exists&&(c=c.startAfter(a))}let r=await c.get(),n=r.docs.map(e=>({id:e.id,...e.data()})).map(e=>({id:e.id,name:e.productDetails?.name||"Producto sin nombre",description:e.description,price:e.productDetails?.price||0,category:e.productDetails?.category||"General",providerId:e.providerId,imageUrl:e.src})),d=r.docs[r.docs.length-1];return{products:n,lastVisibleDocId:r.docs.length===i?d?.id:void 0}}t(26461),(0,t(85723).h)([s,c,r,n]),(0,i.j)("a639b2efecf0c0ea7e686ad6276339f3c45e91a5",s),(0,i.j)("ccf120e09268d081fd8431dd7822c02916eaf370",c),(0,i.j)("b24ae04b724db152fe58ac8adca4a148d53992b0",r),(0,i.j)("0506b3fe02e1a67b2c240220ee140e0f08e46259",n)},43914:(e,a,t)=>{t.a(e,async(e,i)=>{try{t.r(a),t.d(a,{getFeed:()=>p,getProfileGallery:()=>l,getProfileProducts:()=>u,getPublicProfile:()=>o});var s=t(27745);t(26461);var c=t(2102),r=t(30266),n=t(85723),d=e([r]);async function o(e){let a=(0,r.hi)();return await (0,c.ej)(a,{userId:e})}async function l(e){let a=(0,r.hi)();return await (0,c.DF)(a,e)}async function u(e){let a=(0,r.hi)();return await (0,c.Rv)(a,e)}async function p(e){let a=(0,r.hi)();return await (0,c.D9)(a,e)}r=(d.then?(await d)():d)[0],(0,n.h)([o,l,u,p]),(0,s.j)("3114460915aded337a7fc8e5774ab0295592c367",o),(0,s.j)("34617f29a6edb4933278e0d4a548a4261dcfec11",l),(0,s.j)("3b050d596566f18a8c4e29705c8096fceb7da2b3",u),(0,s.j)("0c616a113b8092b2a091f6813b802813896764ba",p),i()}catch(e){i(e)}})},81869:(e,a,t)=>{t.a(e,async(e,i)=>{try{t.r(a),t.d(a,{acceptProposal:()=>p,markConversationAsRead:()=>u,sendMessage:()=>l});var s=t(27745);t(26461);var c=t(30207),r=t(30266),n=t(28504),d=t(85723),o=e([r,n]);async function l(e){let a=(0,r.hi)();return await (0,n.i)(a,e),(0,c.revalidatePath)(`/messages/${e.conversationId}`),e.conversationId}async function u(e){let a=(0,r.hi)().collection("conversations").doc(e),t=await a.get();if(t.exists){let i=t.data().messages.map(e=>({...e,isRead:!0}));await a.update({messages:i}),(0,c.revalidatePath)("/messages"),(0,c.revalidatePath)(`/messages/${e}`)}}async function p(e,a,t){let i=(0,r.hi)();await (0,n.L)(i,{conversationId:e,messageId:a,acceptorId:t}),(0,c.revalidatePath)(`/messages/${e}`),(0,c.revalidatePath)("/transactions")}[r,n]=o.then?(await o)():o,(0,d.h)([l,u,p]),(0,s.j)("164e4611f07bc012094243de7aad1b85f88a7558",l),(0,s.j)("080ba4c4ad92ec9d4477bc2807fa26292714577e",u),(0,s.j)("66a7e77381968e9347e32d9d375d0a488bb06bbb",p),i()}catch(e){i(e)}})}};