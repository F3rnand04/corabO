(()=>{var e={};e.id=3546,e.ids=[3546],e.modules={92509:e=>{"use strict";e.exports=require("firebase-admin")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},3263:e=>{"use strict";e.exports=import("firebase-admin/app")},72929:e=>{"use strict";e.exports=import("firebase-admin/firestore")},68116:e=>{"use strict";e.exports=import("firebase-admin/storage")},4177:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>x,tree:()=>c}),t(50396),t(14205),t(12523);var s=t(23191),a=t(88716),i=t(37922),n=t.n(i),o=t(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let c=["",{children:["scan-qr",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,50396)),"/home/user/corabO/src/app/scan-qr/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,14205)),"/home/user/corabO/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,12523)),"/home/user/corabO/src/app/not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/home/user/corabO/src/app/scan-qr/page.tsx"],d="/scan-qr/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/scan-qr/page",pathname:"/scan-qr",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},52342:(e,r,t)=>{Promise.resolve().then(t.bind(t,31334))},11890:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=(0,t(62881).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},69508:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=(0,t(62881).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},31334:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>b});var s=t(10326),a=t(17577),i=t(35047),n=t(91664),o=t(77506),l=t(22055),c=t(69508),u=t(11890),d=t(84097),p=t(13511),x=t(41190),m=t(29752),h=t(11604);function f(){let e=(0,i.useRouter)(),{toast:r}=(0,d.pm)(),{currentUser:t,users:f}=(0,p.a)(),[b,v]=(0,a.useState)(!1),[g,j]=(0,a.useState)(""),[q,w]=(0,a.useState)(!0),y=(0,a.useRef)(null);(0,a.useRef)(null);let N=async s=>{if(s&&!b&&t){v(!0);try{let a=JSON.parse(s);if(a.providerId){r({title:"\xa1QR Escaneado!",description:"Conectando con el proveedor..."});let s=await (0,h.lB)(t.id,a.providerId,a.cashierBoxId);if(s)e.push(`/payment/approval?sessionId=${s}`);else throw Error("No se pudo iniciar la sesi\xf3n")}}catch(e){console.error(e),r({variant:"destructive",title:"Error de Sesi\xf3n",description:"No se pudo iniciar la sesi\xf3n de pago. Int\xe9ntalo de nuevo."}),v(!1)}}},P=async e=>{if(e.preventDefault(),g.trim()&&!b){let e=f.find(e=>e.coraboId===g.trim());e?N(JSON.stringify({providerId:e.id})):r({variant:"destructive",title:"C\xf3digo Inv\xe1lido",description:"No se encontr\xf3 ning\xfan proveedor con ese Corabo ID."})}};return(0,s.jsxs)("div",{className:"relative h-screen w-screen bg-muted/40",children:[s.jsx("header",{className:"absolute top-0 left-0 z-20 p-4",children:s.jsx(n.z,{variant:"ghost",size:"icon",onClick:()=>e.back(),className:"bg-background/80 rounded-full shadow-md hover:bg-background",children:s.jsx(u.Z,{className:"h-6 w-6"})})}),s.jsx("main",{className:"h-full w-full flex items-center justify-center p-8",children:b?(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(o.Z,{className:"w-16 h-16 animate-spin text-primary"}),s.jsx("h2",{className:"text-xl font-bold",children:"Iniciando Sesi\xf3n Segura..."})]}):q?(0,s.jsxs)("div",{className:"w-full max-w-sm aspect-square relative rounded-2xl overflow-hidden shadow-2xl border-4 border-white/50",children:[s.jsx("video",{ref:y,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx(l.Z,{className:"w-2/3 h-2/3 text-white/50 animate-pulse"})}),s.jsx("p",{className:"absolute bottom-4 left-4 right-4 text-white text-center font-bold text-sm bg-black/50 p-2 rounded-lg",children:"Apunta la c\xe1mara al c\xf3digo QR"})]}):s.jsx("div",{className:"w-full max-w-sm text-center",children:(0,s.jsxs)(m.Zb,{className:"text-foreground shadow-2xl border-border",children:[(0,s.jsxs)(m.Ol,{children:[s.jsx("div",{className:"mx-auto bg-primary/10 text-primary w-16 h-16 rounded-full flex items-center justify-center mb-4",children:s.jsx(c.Z,{className:"w-8 h-8"})}),s.jsx(m.ll,{children:"Entrada Manual"}),s.jsx(m.SZ,{children:"La c\xe1mara no est\xe1 disponible. Introduce el Corabo ID del proveedor para iniciar el pago."})]}),s.jsx(m.aY,{children:(0,s.jsxs)("form",{onSubmit:P,children:[s.jsx(x.I,{placeholder:"Ej: corabo1234",value:g,onChange:e=>j(e.target.value),className:"text-center text-lg"}),s.jsx(n.z,{type:"submit",className:"w-full mt-4",children:"Continuar"})]})})]})})})]})}function b(){return s.jsx(a.Suspense,{fallback:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx(o.Z,{className:"w-8 h-8 animate-spin"})}),children:s.jsx(f,{})})}},50396:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`/home/user/corabO/src/app/scan-qr/page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[8948,8786,8465,2687,2784],()=>t(4177));module.exports=s})();