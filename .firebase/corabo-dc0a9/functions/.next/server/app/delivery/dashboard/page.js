(()=>{var e={};e.id=9118,e.ids=[9118],e.modules={92509:e=>{"use strict";e.exports=require("firebase-admin")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},3263:e=>{"use strict";e.exports=import("firebase-admin/app")},72929:e=>{"use strict";e.exports=import("firebase-admin/firestore")},68116:e=>{"use strict";e.exports=import("firebase-admin/storage")},32162:(e,a,d)=>{"use strict";d.r(a),d.d(a,{GlobalError:()=>i.a,__next_app__:()=>o,originalPathname:()=>f,pages:()=>l,routeModule:()=>u,tree:()=>b}),d(54514),d(26360),d(14205),d(12523);var t=d(23191),s=d(88716),c=d(37922),i=d.n(c),n=d(95231),r={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(r[e]=()=>n[e]);d.d(a,r);let b=["",{children:["delivery",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(d.bind(d,54514)),"/home/user/corabO/src/app/delivery/dashboard/page.tsx"]}]},{layout:[()=>Promise.resolve().then(d.bind(d,26360)),"/home/user/corabO/src/app/delivery/dashboard/layout.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(d.bind(d,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(d.bind(d,14205)),"/home/user/corabO/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(d.bind(d,12523)),"/home/user/corabO/src/app/not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(d.bind(d,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["/home/user/corabO/src/app/delivery/dashboard/page.tsx"],f="/delivery/dashboard/page",o={require:d,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/delivery/dashboard/page",pathname:"/delivery/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:b}})},14281:(e,a,d)=>{let t={"1de1b9f86f7a994eadec21ebf86eec4102a17987":()=>Promise.resolve().then(d.bind(d,70067)).then(e=>e.getDeliveryJobs),"60bff9d42aaa498b8b66134d44b8a07bf56199c0":()=>Promise.resolve().then(d.bind(d,70067)).then(e=>e.resolveDeliveryAsPickup),"6f4fd6fdabfafb35d4de90c6c9f78daac42fdb0b":()=>Promise.resolve().then(d.bind(d,70067)).then(e=>e.assignOwnDelivery),"7edf0eccac857ad0203221242ddd102790570a06":()=>Promise.resolve().then(d.bind(d,70067)).then(e=>e.retryFindDelivery),"9474bc947e5f04b96d7e3e85586064a49fa1ba39":()=>Promise.resolve().then(d.bind(d,70067)).then(e=>e.completeDelivery),ac0ea4208717bfc613e9025d88ba6aaded750086:()=>Promise.resolve().then(d.bind(d,70067)).then(e=>e.acceptDeliveryJob),"453545b1b78662b98891491ec49e72197e0e6598":()=>Promise.resolve().then(d.bind(d,70848)).then(e=>e.addContactToUser),"5490e0fd1c242a5eef82e0a3ff2c7cb530d9e533":()=>Promise.resolve().then(d.bind(d,70848)).then(e=>e.updateUser),"6a3ff619f9bdd51def8f22d0234148dfd9e9330e":()=>Promise.resolve().then(d.bind(d,70848)).then(e=>e.becomeProvider),"7f3879fcde338c8e9e9f8b6e19e6e4358bb243bd":()=>Promise.resolve().then(d.bind(d,70848)).then(e=>e.removeContactFromUser),"86ad7b8d8be30d4d4c2808f5bbf0e5d8e49ba32a":()=>Promise.resolve().then(d.bind(d,70848)).then(e=>e.updateFullProfile),"88599a77cbf14a811bcc0d4db954c292e07a6abc":()=>Promise.resolve().then(d.bind(d,70848)).then(e=>e.updateUserProfileImage),"9011e4229b8124357687ad18fd8d6620369c6645":()=>Promise.resolve().then(d.bind(d,70848)).then(e=>e.checkIdUniqueness),"9dbd3aa17f1b0d765a1019942ecab992f84521ef":()=>Promise.resolve().then(d.bind(d,70848)).then(e=>e.subscribeUser),b6340bdf49ffb4d7a7d472365ccd4c5bb696fb65:()=>Promise.resolve().then(d.bind(d,70848)).then(e=>e.completeInitialSetup),d3b29fd6112ff6850dece7a05d126c764332b184:()=>Promise.resolve().then(d.bind(d,70848)).then(e=>e.toggleGps),e86019e14c4860bd9cb7e35ea4e6b273f001c319:()=>Promise.resolve().then(d.bind(d,70848)).then(e=>e.deactivateTransactions),f1a5672380f0c97ae05054afe728fa52f5b897d1:()=>Promise.resolve().then(d.bind(d,70848)).then(e=>e.activatePromotion),f2adee7cf4f2f8b5b2ceee6347d65222ab445eb7:()=>Promise.resolve().then(d.bind(d,70848)).then(e=>e.updateUserLocation),"0fcca1ef621d98be26c0bfcf3d0536b2eafaf90b":()=>Promise.resolve().then(d.bind(d,67500)).then(e=>e.createSessionCookie),"75f66e5bfcc5802b933cf6bb3a81d2e6fb71f193":()=>Promise.resolve().then(d.bind(d,67500)).then(e=>e.signInAsGuest),"92acb34382b7cc06f4de5ac34a55db761fb52098":()=>Promise.resolve().then(d.bind(d,67500)).then(e=>e.clearSessionCookie),d3324d6c83f3a3db02622507b4b401ba56959940:()=>Promise.resolve().then(d.bind(d,67500)).then(e=>e.getOrCreateUser),"097b808e0ece62513ed2a928f4e9a74b2f5cd67b":()=>Promise.resolve().then(d.bind(d,71239)).then(e=>e.createProduct),"1e07348ea432662ad092ac802f4a5c62c0b6584a":()=>Promise.resolve().then(d.bind(d,71239)).then(e=>e.removeGalleryImage),"6970a6d88c9c6363fee8be49e1b820441b76289d":()=>Promise.resolve().then(d.bind(d,71239)).then(e=>e.addCommentToImage),"911f01a7adbee5e89e0dc6003ef17b4f0ac1f24c":()=>Promise.resolve().then(d.bind(d,71239)).then(e=>e.removeCommentFromImage),d10c5b0c5dc185c0719b914043fd17b76a901250:()=>Promise.resolve().then(d.bind(d,71239)).then(e=>e.updateGalleryImage),feab6f8fe3596605c3a56acf95b545caf1fe8f10:()=>Promise.resolve().then(d.bind(d,71239)).then(e=>e.createPublication),"159b2fe09127c5bd3daae38e767205dac7d77cab":()=>Promise.resolve().then(d.bind(d,20056)).then(e=>e.createAppointmentRequest),"2b06f3a3c6bc1d56ad79fe0105b23730fc59fc3c":()=>Promise.resolve().then(d.bind(d,20056)).then(e=>e.processDirectPayment),"2f895fe1b49f74d13cc6d7f8c94cf7264d1a290d":()=>Promise.resolve().then(d.bind(d,20056)).then(e=>e.resolveCollectionCase),"325dc1f7f655917be2c16c7e98b2d1937c654384":()=>Promise.resolve().then(d.bind(d,20056)).then(e=>e.payCommitment),"4ba72153081d80db8eb0c1d6fd08c42be123a593":()=>Promise.resolve().then(d.bind(d,20056)).then(e=>e.completeWork),"627bffb6d24f861e176920b8fac8e87d263c0e39":()=>Promise.resolve().then(d.bind(d,20056)).then(e=>e.confirmPaymentReceived),"683f24dbc04449f1048d22803857dd2e140d0626":()=>Promise.resolve().then(d.bind(d,20056)).then(e=>e.cancelSystemTransaction),"68e7dcb5930b2f1144a87059acc32941a426a6ba":()=>Promise.resolve().then(d.bind(d,20056)).then(e=>e.createQuoteRequest),"7ffaf3cdca4e8bfa88f07bb6fd67ea5a48706373":()=>Promise.resolve().then(d.bind(d,20056)).then(e=>e.checkout),"862bc6f0e45e133730d43c165242b63549e8d6ef":()=>Promise.resolve().then(d.bind(d,20056)).then(e=>e.confirmWorkReceived),"87e287519cb1cf3861ceab331f0ef39f9649c540":()=>Promise.resolve().then(d.bind(d,20056)).then(e=>e.startDispute),"97ae364a62d4df2288a07a620d912ce0ac96b58c":()=>Promise.resolve().then(d.bind(d,20056)).then(e=>e.writeOffDebt),b436050b9f6ea9d78925f00d451d2f9caa7fe276:()=>Promise.resolve().then(d.bind(d,20056)).then(e=>e.sendQuote),def0aa2b8b4ea6c1e06bbb61a801cf9d7db8217f:()=>Promise.resolve().then(d.bind(d,20056)).then(e=>e.acceptAppointment),eb08ed1ec3e7601b9657c9104751f4cd16e193bf:()=>Promise.resolve().then(d.bind(d,20056)).then(e=>e.acceptQuote),ffe6118251cbf259f053f1ac31bb9bf4df292901:()=>Promise.resolve().then(d.bind(d,20056)).then(e=>e.purchaseGift),"58916f5aa51f5451dd6608a06048fa71b5001e5a":()=>Promise.resolve().then(d.bind(d,43764)).then(e=>e.updateCart)};async function s(e,...a){return(await t[e]()).apply(null,a)}e.exports={"1de1b9f86f7a994eadec21ebf86eec4102a17987":s.bind(null,"1de1b9f86f7a994eadec21ebf86eec4102a17987"),"60bff9d42aaa498b8b66134d44b8a07bf56199c0":s.bind(null,"60bff9d42aaa498b8b66134d44b8a07bf56199c0"),"6f4fd6fdabfafb35d4de90c6c9f78daac42fdb0b":s.bind(null,"6f4fd6fdabfafb35d4de90c6c9f78daac42fdb0b"),"7edf0eccac857ad0203221242ddd102790570a06":s.bind(null,"7edf0eccac857ad0203221242ddd102790570a06"),"9474bc947e5f04b96d7e3e85586064a49fa1ba39":s.bind(null,"9474bc947e5f04b96d7e3e85586064a49fa1ba39"),ac0ea4208717bfc613e9025d88ba6aaded750086:s.bind(null,"ac0ea4208717bfc613e9025d88ba6aaded750086"),"453545b1b78662b98891491ec49e72197e0e6598":s.bind(null,"453545b1b78662b98891491ec49e72197e0e6598"),"5490e0fd1c242a5eef82e0a3ff2c7cb530d9e533":s.bind(null,"5490e0fd1c242a5eef82e0a3ff2c7cb530d9e533"),"6a3ff619f9bdd51def8f22d0234148dfd9e9330e":s.bind(null,"6a3ff619f9bdd51def8f22d0234148dfd9e9330e"),"7f3879fcde338c8e9e9f8b6e19e6e4358bb243bd":s.bind(null,"7f3879fcde338c8e9e9f8b6e19e6e4358bb243bd"),"86ad7b8d8be30d4d4c2808f5bbf0e5d8e49ba32a":s.bind(null,"86ad7b8d8be30d4d4c2808f5bbf0e5d8e49ba32a"),"88599a77cbf14a811bcc0d4db954c292e07a6abc":s.bind(null,"88599a77cbf14a811bcc0d4db954c292e07a6abc"),"9011e4229b8124357687ad18fd8d6620369c6645":s.bind(null,"9011e4229b8124357687ad18fd8d6620369c6645"),"9dbd3aa17f1b0d765a1019942ecab992f84521ef":s.bind(null,"9dbd3aa17f1b0d765a1019942ecab992f84521ef"),b6340bdf49ffb4d7a7d472365ccd4c5bb696fb65:s.bind(null,"b6340bdf49ffb4d7a7d472365ccd4c5bb696fb65"),d3b29fd6112ff6850dece7a05d126c764332b184:s.bind(null,"d3b29fd6112ff6850dece7a05d126c764332b184"),e86019e14c4860bd9cb7e35ea4e6b273f001c319:s.bind(null,"e86019e14c4860bd9cb7e35ea4e6b273f001c319"),f1a5672380f0c97ae05054afe728fa52f5b897d1:s.bind(null,"f1a5672380f0c97ae05054afe728fa52f5b897d1"),f2adee7cf4f2f8b5b2ceee6347d65222ab445eb7:s.bind(null,"f2adee7cf4f2f8b5b2ceee6347d65222ab445eb7"),"0fcca1ef621d98be26c0bfcf3d0536b2eafaf90b":s.bind(null,"0fcca1ef621d98be26c0bfcf3d0536b2eafaf90b"),"75f66e5bfcc5802b933cf6bb3a81d2e6fb71f193":s.bind(null,"75f66e5bfcc5802b933cf6bb3a81d2e6fb71f193"),"92acb34382b7cc06f4de5ac34a55db761fb52098":s.bind(null,"92acb34382b7cc06f4de5ac34a55db761fb52098"),d3324d6c83f3a3db02622507b4b401ba56959940:s.bind(null,"d3324d6c83f3a3db02622507b4b401ba56959940"),"097b808e0ece62513ed2a928f4e9a74b2f5cd67b":s.bind(null,"097b808e0ece62513ed2a928f4e9a74b2f5cd67b"),"1e07348ea432662ad092ac802f4a5c62c0b6584a":s.bind(null,"1e07348ea432662ad092ac802f4a5c62c0b6584a"),"6970a6d88c9c6363fee8be49e1b820441b76289d":s.bind(null,"6970a6d88c9c6363fee8be49e1b820441b76289d"),"911f01a7adbee5e89e0dc6003ef17b4f0ac1f24c":s.bind(null,"911f01a7adbee5e89e0dc6003ef17b4f0ac1f24c"),d10c5b0c5dc185c0719b914043fd17b76a901250:s.bind(null,"d10c5b0c5dc185c0719b914043fd17b76a901250"),feab6f8fe3596605c3a56acf95b545caf1fe8f10:s.bind(null,"feab6f8fe3596605c3a56acf95b545caf1fe8f10"),"159b2fe09127c5bd3daae38e767205dac7d77cab":s.bind(null,"159b2fe09127c5bd3daae38e767205dac7d77cab"),"2b06f3a3c6bc1d56ad79fe0105b23730fc59fc3c":s.bind(null,"2b06f3a3c6bc1d56ad79fe0105b23730fc59fc3c"),"2f895fe1b49f74d13cc6d7f8c94cf7264d1a290d":s.bind(null,"2f895fe1b49f74d13cc6d7f8c94cf7264d1a290d"),"325dc1f7f655917be2c16c7e98b2d1937c654384":s.bind(null,"325dc1f7f655917be2c16c7e98b2d1937c654384"),"4ba72153081d80db8eb0c1d6fd08c42be123a593":s.bind(null,"4ba72153081d80db8eb0c1d6fd08c42be123a593"),"627bffb6d24f861e176920b8fac8e87d263c0e39":s.bind(null,"627bffb6d24f861e176920b8fac8e87d263c0e39"),"683f24dbc04449f1048d22803857dd2e140d0626":s.bind(null,"683f24dbc04449f1048d22803857dd2e140d0626"),"68e7dcb5930b2f1144a87059acc32941a426a6ba":s.bind(null,"68e7dcb5930b2f1144a87059acc32941a426a6ba"),"7ffaf3cdca4e8bfa88f07bb6fd67ea5a48706373":s.bind(null,"7ffaf3cdca4e8bfa88f07bb6fd67ea5a48706373"),"862bc6f0e45e133730d43c165242b63549e8d6ef":s.bind(null,"862bc6f0e45e133730d43c165242b63549e8d6ef"),"87e287519cb1cf3861ceab331f0ef39f9649c540":s.bind(null,"87e287519cb1cf3861ceab331f0ef39f9649c540"),"97ae364a62d4df2288a07a620d912ce0ac96b58c":s.bind(null,"97ae364a62d4df2288a07a620d912ce0ac96b58c"),b436050b9f6ea9d78925f00d451d2f9caa7fe276:s.bind(null,"b436050b9f6ea9d78925f00d451d2f9caa7fe276"),def0aa2b8b4ea6c1e06bbb61a801cf9d7db8217f:s.bind(null,"def0aa2b8b4ea6c1e06bbb61a801cf9d7db8217f"),eb08ed1ec3e7601b9657c9104751f4cd16e193bf:s.bind(null,"eb08ed1ec3e7601b9657c9104751f4cd16e193bf"),ffe6118251cbf259f053f1ac31bb9bf4df292901:s.bind(null,"ffe6118251cbf259f053f1ac31bb9bf4df292901"),"58916f5aa51f5451dd6608a06048fa71b5001e5a":s.bind(null,"58916f5aa51f5451dd6608a06048fa71b5001e5a")}},93022:(e,a,d)=>{Promise.resolve().then(d.bind(d,4704))},35303:()=>{},11890:(e,a,d)=>{"use strict";d.d(a,{Z:()=>t});let t=(0,d(62881).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},14228:(e,a,d)=>{"use strict";d.d(a,{Z:()=>t});let t=(0,d(62881).Z)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])},4704:(e,a,d)=>{"use strict";d.r(a),d.d(a,{default:()=>q});var t=d(10326),s=d(17577),c=d(91664),i=d(29752),n=d(99744),r=d(3594),b=d(73326),l=d(44794),f=d(11890),o=d(14228),u=d(71810),m=d(77636);let h=(0,d(62881).Z)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);var p=d(32933),v=d(42887),x=d(77506),y=d(76897),j=d(97848),g=d(51223),P=d(84097),N=d(35047),w=d(13511);function C(){let{currentUser:e,logout:a}=(0,w.a)(),d=(0,N.useRouter)();return t.jsx("header",{className:"sticky top-0 z-30 bg-background/95 backdrop-blur-sm border-b",children:t.jsx("div",{className:"container px-4 sm:px-6",children:(0,t.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[t.jsx(c.z,{variant:"ghost",size:"icon",onClick:()=>d.back(),children:t.jsx(f.Z,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(o.Z,{className:"h-6 w-6 text-primary"}),t.jsx("h1",{className:"text-xl font-bold",children:"Panel de Repartidor"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"text-sm font-semibold hidden sm:inline",children:e?.name}),(0,t.jsxs)(r.qE,{className:"h-8 w-8",children:[t.jsx(r.F$,{src:e?.profileImage}),t.jsx(r.Q5,{children:e?.name.charAt(0)})]}),t.jsx(c.z,{variant:"ghost",size:"icon",onClick:a,children:t.jsx(u.Z,{className:"h-5 w-5"})})]})]})})})}function k({job:e,onAccept:a,onComplete:d,onNavigate:n,onCall:r}){let{users:b}=(0,w.a)(),l=b.find(a=>a.id===e.providerId),f=e.details.delivery?.address?.split(",").map(Number),o=l?.profileSetupData?.location?.split(",").map(Number),u=(0,s.useMemo)(()=>o&&f?(0,g.x)(o[0],o[1],f[0],f[1]):null,[o,f]),x=e.details.deliveryCost?.85*e.details.deliveryCost:0;return(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(i.ll,{className:"text-lg",children:["Entrega de ",l?.name]}),(0,t.jsxs)("span",{className:"font-bold text-lg",children:["$",x.toFixed(2)]})]}),(0,t.jsxs)(i.SZ,{children:["Para: ",e.details.delivery?.recipientInfo?.name]})]}),(0,t.jsxs)(i.aY,{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[t.jsx(m.Z,{className:"w-4 h-4 mt-1 text-muted-foreground"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-semibold",children:"Recoger en:"}),t.jsx("p",{className:"text-muted-foreground",children:l?.profileSetupData?.location})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[t.jsx(h,{className:"w-4 h-4 mt-1 text-muted-foreground"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-semibold",children:"Entregar en:"}),t.jsx("p",{className:"text-muted-foreground",children:e.details.delivery?.address})]})]}),u&&(0,t.jsxs)("p",{className:"text-xs font-semibold text-center",children:["Distancia Total: ",u.toFixed(1)," km"]})]}),(0,t.jsxs)(i.eW,{className:"flex gap-2",children:["Buscando Repartidor"===e.status&&(0,t.jsxs)(c.z,{className:"w-full",onClick:a,children:[t.jsx(p.Z,{className:"mr-2 h-4 w-4"})," Aceptar Trabajo"]}),"En Reparto"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.z,{variant:"outline",className:"flex-1",onClick:()=>r(e.details.delivery?.recipientInfo?.phone||""),children:[t.jsx(v.Z,{className:"mr-2 h-4 w-4"})," Llamar"]}),(0,t.jsxs)(c.z,{variant:"outline",className:"flex-1",onClick:()=>n(f[0],f[1]),children:[t.jsx(h,{className:"mr-2 h-4 w-4"})," Navegar"]}),t.jsx(c.z,{className:"flex-1",onClick:d,children:"Completar"})]})]})]})}function q(){let{currentUser:e,transactions:a}=(0,w.a)(),[d,c]=(0,s.useState)([]),[r,f]=(0,s.useState)(!0),{toast:o}=(0,P.pm)(),u=async a=>{if(e)try{await (0,y.Pz)(a,e.id),o({title:"\xa1Trabajo Aceptado!",description:"El cliente ha sido notificado."})}catch(e){o({variant:"destructive",title:"Error",description:"No se pudo aceptar el trabajo."})}},m=async e=>{try{await (0,y.e5)(e),o({title:"\xa1Entrega Completada!",description:"La transacci\xf3n ha sido actualizada."})}catch(e){o({variant:"destructive",title:"Error",description:"No se pudo completar la entrega."})}},h=(e,a)=>{window.open(`https://www.google.com/maps/dir/?api=1&destination=${e},${a}`,"_blank")},p=e=>{window.location.href=`tel:${e}`},v=(0,s.useMemo)(()=>a.filter(a=>"En Reparto"===a.status&&a.details.deliveryProviderId===e?.id),[a,e]),g=(0,s.useMemo)(()=>a.filter(a=>"corabo-admin"===a.providerId&&a.clientId===e?.id),[a,e]);return e?(0,t.jsxs)(t.Fragment,{children:[t.jsx(C,{}),(0,t.jsxs)("main",{className:"container py-8 max-w-4xl mx-auto space-y-8 pb-24",children:[(0,t.jsxs)(i.Zb,{children:[t.jsx(i.Ol,{children:t.jsx(i.ll,{children:"Estado del Repartidor"})}),(0,t.jsxs)(i.aY,{className:"flex items-center justify-between",children:[t.jsx(l._,{htmlFor:"availability-switch",className:"font-semibold",children:"Disponible para recibir trabajos"}),t.jsx(b.r,{id:"availability-switch",checked:e.isGpsActive,onCheckedChange:()=>(0,j.M6)(e.id)})]}),!e.isGpsActive&&t.jsx(i.eW,{children:t.jsx("p",{className:"text-sm text-destructive",children:"Est\xe1s desconectado. Act\xedvate para ver y recibir nuevas solicitudes de entrega."})})]}),(0,t.jsxs)(n.mQ,{defaultValue:"available",children:[(0,t.jsxs)(n.dr,{className:"grid w-full grid-cols-3",children:[t.jsx(n.SP,{value:"available",children:"Disponibles"}),(0,t.jsxs)(n.SP,{value:"in-progress",children:["En Curso (",v.length,")"]}),t.jsx(n.SP,{value:"history",children:"Historial"})]}),t.jsx(n.nU,{value:"available",className:"mt-4 space-y-4",children:r?t.jsx("div",{className:"text-center py-10",children:t.jsx(x.Z,{className:"w-8 h-8 animate-spin mx-auto"})}):d.length>0?d.map(e=>t.jsx(k,{job:e,onAccept:()=>u(e.id),onComplete:()=>{},onNavigate:h,onCall:p},e.id)):t.jsx("p",{className:"text-center text-muted-foreground py-10",children:"No hay trabajos disponibles cerca de ti en este momento."})}),t.jsx(n.nU,{value:"in-progress",className:"mt-4 space-y-4",children:v.length>0?v.map(e=>t.jsx(k,{job:e,onAccept:()=>{},onComplete:()=>m(e.id),onNavigate:h,onCall:p},e.id)):t.jsx("p",{className:"text-center text-muted-foreground py-10",children:"No tienes entregas en curso."})}),t.jsx(n.nU,{value:"history",className:"mt-4 space-y-2",children:g.map(e=>t.jsx(i.Zb,{children:(0,t.jsxs)(i.aY,{className:"p-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-semibold",children:e.details.system}),t.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(e.date).toLocaleDateString()})]}),(0,t.jsxs)("p",{className:"font-bold text-green-600",children:["+$",e.amount.toFixed(2)]})]})},e.id))})]})]})]}):t.jsx("div",{className:"flex items-center justify-center h-screen",children:t.jsx(x.Z,{className:"w-12 h-12 animate-spin"})})}},99744:(e,a,d)=>{"use strict";d.d(a,{mQ:()=>I,nU:()=>E,dr:()=>R,SP:()=>A});var t=d(10326),s=d(17577),c=d(82561),i=d(93095),n=d(15594),r=d(9815),b=d(45226),l=d(17124),f=d(52067),o=d(88957),u="Tabs",[m,h]=(0,i.b)(u,[n.Pc]),p=(0,n.Pc)(),[v,x]=m(u),y=s.forwardRef((e,a)=>{let{__scopeTabs:d,value:s,onValueChange:c,defaultValue:i,orientation:n="horizontal",dir:r,activationMode:m="automatic",...h}=e,p=(0,l.gm)(r),[x,y]=(0,f.T)({prop:s,onChange:c,defaultProp:i??"",caller:u});return(0,t.jsx)(v,{scope:d,baseId:(0,o.M)(),value:x,onValueChange:y,orientation:n,dir:p,activationMode:m,children:(0,t.jsx)(b.WV.div,{dir:p,"data-orientation":n,...h,ref:a})})});y.displayName=u;var j="TabsList",g=s.forwardRef((e,a)=>{let{__scopeTabs:d,loop:s=!0,...c}=e,i=x(j,d),r=p(d);return(0,t.jsx)(n.fC,{asChild:!0,...r,orientation:i.orientation,dir:i.dir,loop:s,children:(0,t.jsx)(b.WV.div,{role:"tablist","aria-orientation":i.orientation,...c,ref:a})})});g.displayName=j;var P="TabsTrigger",N=s.forwardRef((e,a)=>{let{__scopeTabs:d,value:s,disabled:i=!1,...r}=e,l=x(P,d),f=p(d),o=k(l.baseId,s),u=q(l.baseId,s),m=s===l.value;return(0,t.jsx)(n.ck,{asChild:!0,...f,focusable:!i,active:m,children:(0,t.jsx)(b.WV.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":u,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:o,...r,ref:a,onMouseDown:(0,c.Mj)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(s)}),onKeyDown:(0,c.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(s)}),onFocus:(0,c.Mj)(e.onFocus,()=>{let e="manual"!==l.activationMode;m||i||!e||l.onValueChange(s)})})})});N.displayName=P;var w="TabsContent",C=s.forwardRef((e,a)=>{let{__scopeTabs:d,value:c,forceMount:i,children:n,...l}=e,f=x(w,d),o=k(f.baseId,c),u=q(f.baseId,c),m=c===f.value,h=s.useRef(m);return s.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(r.z,{present:i||m,children:({present:d})=>(0,t.jsx)(b.WV.div,{"data-state":m?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":o,hidden:!d,id:u,tabIndex:0,...l,ref:a,style:{...e.style,animationDuration:h.current?"0s":void 0},children:d&&n})})});function k(e,a){return`${e}-trigger-${a}`}function q(e,a){return`${e}-content-${a}`}C.displayName=w;var D=d(51223);let I=y,R=s.forwardRef(({className:e,...a},d)=>t.jsx(g,{ref:d,className:(0,D.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...a}));R.displayName=g.displayName;let A=s.forwardRef(({className:e,...a},d)=>t.jsx(N,{ref:d,className:(0,D.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...a}));A.displayName=N.displayName;let E=s.forwardRef(({className:e,...a},d)=>t.jsx(C,{ref:d,className:(0,D.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a}));E.displayName=C.displayName},76897:(e,a,d)=>{"use strict";d.d(a,{Pz:()=>c,Ql:()=>s,e5:()=>i,jY:()=>r,nt:()=>n}),d(15424);var t=d(46242),s=(0,t.$)("6f4fd6fdabfafb35d4de90c6c9f78daac42fdb0b");(0,t.$)("1de1b9f86f7a994eadec21ebf86eec4102a17987");var c=(0,t.$)("ac0ea4208717bfc613e9025d88ba6aaded750086"),i=(0,t.$)("9474bc947e5f04b96d7e3e85586064a49fa1ba39"),n=(0,t.$)("7edf0eccac857ad0203221242ddd102790570a06"),r=(0,t.$)("60bff9d42aaa498b8b66134d44b8a07bf56199c0")},26360:(e,a,d)=>{"use strict";d.r(a),d.d(a,{default:()=>c,metadata:()=>s});var t=d(19510);let s={title:"Panel de Repartidor - Corabo",description:"Gestiona tus entregas y ganancias."};function c({children:e}){return t.jsx("div",{className:"bg-muted/30 min-h-screen",children:e})}},54514:(e,a,d)=>{"use strict";d.r(a),d.d(a,{default:()=>t});let t=(0,d(68570).createProxy)(String.raw`/home/user/corabO/src/app/delivery/dashboard/page.tsx#default`)},70067:(e,a,d)=>{"use strict";d.a(e,async(e,t)=>{try{d.r(a),d.d(a,{acceptDeliveryJob:()=>f,assignOwnDelivery:()=>h,completeDelivery:()=>o,getDeliveryJobs:()=>l,resolveDeliveryAsPickup:()=>m,retryFindDelivery:()=>u});var s=d(27745);d(26461);var c=d(30207),i=d(20147),n=d(30266),r=d(85723),b=e([i,n]);async function l(e){let a=(0,n.hi)().collection("transactions").where("status","==","Buscando Repartidor"),d=await a.get();return d.empty?[]:d.docs.map(e=>e.data())}async function f(e,a){let d=(0,n.hi)();await (0,i.aD)(d,{transactionId:e,providerId:a}),(0,c.revalidatePath)("/delivery/dashboard")}async function o(e){let a=(0,n.hi)();await (0,i.UQ)(a,{transactionId:e}),(0,c.revalidatePath)("/delivery/dashboard")}async function u(e){let a=(0,n.hi)();(0,i.w2)(a,{transactionId:e.transactionId}),(0,c.revalidatePath)("/transactions")}async function m(e){let a=(0,n.hi)();await (0,i.Cg)(a,e),(0,c.revalidatePath)("/transactions")}async function h(e,a){let d=(0,n.hi)().collection("transactions").doc(e);await d.update({"details.deliveryProviderId":a,status:"En Reparto"}),(0,c.revalidatePath)("/transactions")}[i,n]=b.then?(await b)():b,(0,r.h)([l,f,o,u,m,h]),(0,s.j)("1de1b9f86f7a994eadec21ebf86eec4102a17987",l),(0,s.j)("ac0ea4208717bfc613e9025d88ba6aaded750086",f),(0,s.j)("9474bc947e5f04b96d7e3e85586064a49fa1ba39",o),(0,s.j)("7edf0eccac857ad0203221242ddd102790570a06",u),(0,s.j)("60bff9d42aaa498b8b66134d44b8a07bf56199c0",m),(0,s.j)("6f4fd6fdabfafb35d4de90c6c9f78daac42fdb0b",h),t()}catch(e){t(e)}})}};var a=require("../../../webpack-runtime.js");a.C(e);var d=e=>a(a.s=e),t=a.X(0,[8948,8786,2687],()=>d(32162));module.exports=t})();