(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3545],{55148:function(e,a,t){Promise.resolve().then(t.bind(t,27576))},41671:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});let n=(0,t(79205).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},78867:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});let n=(0,t(79205).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},32489:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});let n=(0,t(79205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},27576:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return w}});var n=t(57437),s=t(99376),i=t(12381),r=t(51817),l=t(67404);let c=(0,t(79205).Z)("Hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]);var o=t(41671),d=t(48736),u=t(92451),m=t(23340),f=t(70061),x=t(40279),p=t(2265),h=t(84075),g=t(92213),b=t(74291),N=t(35398),v=t(78867),y=t(33145);function j(e){let{isOpen:a,onOpenChange:t}=e,{currentUser:s}=(0,f.a)(),{toast:r}=(0,m.pm)();if(!s||!s.coraboId)return null;let l=JSON.stringify({providerId:s.id}),c=s.coraboId;return(0,n.jsx)(b.Vq,{open:a,onOpenChange:t,children:(0,n.jsx)(b.cZ,{className:"sm:max-w-sm",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 bg-background rounded-lg text-center space-y-4",children:[(0,n.jsx)(y.default,{src:"https://i.postimg.cc/YSNBv5DT/logo-light-png.png",alt:"Corabo Logo",width:120,height:40,className:"h-10 w-auto cursor-pointer"}),(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Muestra este c\xf3digo para recibir pagos"}),(0,n.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-inner inline-block",children:(0,n.jsx)(N.tv,{value:l,size:180,bgColor:"#ffffff",fgColor:"#000000",level:"L",includeMargin:!1})}),(0,n.jsxs)("div",{className:"text-center w-full",children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Si el escaneo falla, usa el ID:"}),(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-2",children:[(0,n.jsx)("p",{className:"text-xl font-bold font-mono tracking-widest",children:c}),(0,n.jsx)(i.z,{variant:"ghost",size:"icon",onClick:()=>{navigator.clipboard.writeText(c),r({title:"Copiado",description:"Tu ID de Corabo ha sido copiado."})},className:"text-muted-foreground hover:text-foreground",children:(0,n.jsx)(v.Z,{className:"w-5 h-5"})})]})]})]})})})}function w(){let e=(0,s.useRouter)(),{toast:a}=(0,m.pm)(),{currentUser:t,qrSession:b}=(0,f.a)(),[N,v]=(0,p.useState)(""),[y,w]=(0,p.useState)(null),[C,P]=(0,p.useState)(null);(0,p.useRef)(null);let[k,L]=(0,p.useState)(!1);if(!t)return(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-muted/30",children:(0,n.jsx)(r.Z,{className:"h-12 w-12 animate-spin text-primary"})});let R=async()=>{if(b&&N&&t){let e=parseFloat(N),a=t.credicoraDetails||g.vl["1"],n=Math.min(e*(1-a.initialPaymentPercentage),t.credicoraLimit||0);await (0,h.aN)(b.id,e,e-n,n,a.installments)}},z=async()=>{b&&await (0,h.CR)(b.id)},B=async()=>{b&&await (0,h.vw)(b.id)},E=async()=>{b&&await (0,h.gC)(b.id)};return(0,n.jsxs)("div",{className:"min-h-screen bg-muted/30 flex flex-col",children:[(0,n.jsx)("header",{className:"sticky top-0 z-10 p-4",children:(0,n.jsx)(i.z,{variant:"ghost",size:"icon",onClick:()=>e.back(),className:"bg-background/80 rounded-full shadow-md hover:bg-background",children:(0,n.jsx)(u.Z,{className:"h-6 w-6"})})}),(0,n.jsx)("main",{className:"flex-grow flex flex-col items-center justify-center p-4",children:(()=>{var a,t;if(!b)return(0,n.jsxs)("div",{className:"text-center space-y-6",children:[(0,n.jsxs)(i.z,{onClick:()=>L(!0),className:"w-full max-w-sm",children:[(0,n.jsx)(l.Z,{className:"mr-2 h-5 w-5"}),"Mostrar mi QR Personal"]}),(0,n.jsx)("p",{className:"text-muted-foreground text-sm",children:"O espera a que un cliente escanee tu QR..."})]});switch(b.status){case"pendingAmount":return(0,n.jsxs)("div",{className:"text-center space-y-6 w-full max-w-sm",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Cliente Conectado"}),(0,n.jsx)("p",{className:"text-muted-foreground text-sm",children:"Introduce el monto total de la venta para que el cliente lo apruebe."}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-lg text-muted-foreground",children:"$"}),(0,n.jsx)(x.I,{type:"number",placeholder:"0.00",className:"text-4xl font-bold h-20 text-center",value:N,onChange:e=>v(e.target.value)})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(i.z,{variant:"outline",className:"flex-1",onClick:z,children:"Cancelar"}),(0,n.jsx)(i.z,{className:"flex-1",onClick:R,disabled:!N,children:"Enviar Monto"})]})]});case"awaitingPayment":return(0,n.jsxs)("div",{className:"text-center space-y-6 w-full max-w-sm",children:[(0,n.jsx)(c,{className:"h-16 w-16 text-blue-500 mx-auto animate-pulse"}),(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Esperando Pago M\xf3vil"}),(0,n.jsxs)("p",{className:"text-muted-foreground text-sm",children:["El cliente ha copiado tus datos de Pago M\xf3vil. Confirma cuando recibas la transferencia por ",(0,n.jsxs)("span",{className:"font-bold",children:["$",null===(a=b.initialPayment)||void 0===a?void 0:a.toFixed(2)]}),"."]}),(0,n.jsxs)(i.z,{className:"w-full",onClick:B,children:[(0,n.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),"He Recibido el Pago"]}),(0,n.jsx)(i.z,{variant:"destructive",size:"sm",onClick:z,children:"Cancelar Sesi\xf3n"})]});case"pendingVoucherUpload":return(0,n.jsxs)("div",{className:"text-center space-y-6 w-full max-w-sm",children:[(0,n.jsx)(o.Z,{className:"h-16 w-16 text-green-500 mx-auto"}),(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Pago Recibido"}),(0,n.jsx)("p",{className:"text-muted-foreground text-sm",children:"El cliente ha sido notificado. Finaliza la transacci\xf3n para generar los compromisos y la factura."}),(0,n.jsxs)(i.z,{className:"w-full",onClick:E,children:[(0,n.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),"Finalizar y Generar Factura"]})]});case"pendingClientApproval":return(0,n.jsxs)("div",{className:"text-center space-y-6",children:[(0,n.jsx)(r.Z,{className:"h-16 w-16 animate-spin text-primary"}),(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Esperando Aprobaci\xf3n"}),(0,n.jsxs)("p",{className:"text-muted-foreground text-sm",children:["El cliente est\xe1 revisando el monto de ",(0,n.jsxs)("span",{className:"font-bold",children:["$",null===(t=b.amount)||void 0===t?void 0:t.toFixed(2)]}),"."]})]});case"completed":return(0,n.jsxs)("div",{className:"text-center space-y-6",children:[(0,n.jsx)(o.Z,{className:"h-16 w-16 text-green-500 mx-auto"}),(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"\xa1Transacci\xf3n Completada!"}),(0,n.jsx)("p",{className:"text-muted-foreground text-sm",children:"El pago ha sido registrado y los compromisos de Credicora han sido creados."}),(0,n.jsx)(i.z,{onClick:()=>e.push("/transactions"),children:"Ver en mi Registro"})]});default:return(0,n.jsxs)("p",{children:["Estado desconocido: ",b.status]})}})()}),(0,n.jsx)("footer",{className:"p-4",children:(0,n.jsxs)(i.z,{className:"w-full",variant:"ghost",onClick:()=>e.push("/scan-qr"),children:[(0,n.jsx)(l.Z,{className:"mr-2 h-4 w-4"}),"Escanear C\xf3digo para Pagar"]})}),(0,n.jsx)(j,{isOpen:k,onOpenChange:L})]})}},74291:function(e,a,t){"use strict";t.d(a,{$N:function(){return h},Be:function(){return g},GG:function(){return u},Vq:function(){return c},cN:function(){return p},cZ:function(){return f},fK:function(){return x},hg:function(){return o}});var n=t(57437),s=t(2265),i=t(49027),r=t(32489),l=t(93448);let c=i.fC,o=i.xz,d=i.h_,u=i.x8,m=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)(i.aV,{ref:a,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});m.displayName=i.aV.displayName;let f=s.forwardRef((e,a)=>{let{className:t,children:s,...c}=e;return(0,n.jsxs)(d,{children:[(0,n.jsx)(m,{}),(0,n.jsxs)(i.VY,{ref:a,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...c,children:[s,(0,n.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(r.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=i.VY.displayName;let x=e=>{let{className:a,...t}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};x.displayName="DialogHeader";let p=e=>{let{className:a,...t}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};p.displayName="DialogFooter";let h=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)(i.Dx,{ref:a,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});h.displayName=i.Dx.displayName;let g=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)(i.dk,{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...s})});g.displayName=i.dk.displayName},40279:function(e,a,t){"use strict";t.d(a,{I:function(){return r}});var n=t(57437),s=t(2265),i=t(93448);let r=s.forwardRef((e,a)=>{let{className:t,type:s,...r}=e;return(0,n.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...r})});r.displayName="Input"},84075:function(e,a,t){"use strict";t.d(a,{CR:function(){return d},QN:function(){return i},aN:function(){return o},cN:function(){return s},gC:function(){return f},jh:function(){return l},lB:function(){return c},qP:function(){return u},vw:function(){return m},zt:function(){return r}}),t(83079);var n=t(12119);(0,n.$)("eb0d52356ee11f9376b2c1c7178c295e4383267f");var s=(0,n.$)("7c90561350f1049b4ad793330e3266bbb0adc684"),i=(0,n.$)("7203eca9170cafc1e5b07649f82ea83c01c2068a"),r=(0,n.$)("eb917fd604377cea11e2b6633ee56913f9344ded"),l=(0,n.$)("7bdd40e655a37e43e89e4f11e34931e24c504554"),c=(0,n.$)("c899ec5d95a35b6623f72371f706a90fbb31a7b1"),o=(0,n.$)("0cc468c9ec8056445c64fbc57ca071d6ae3aea6e"),d=(0,n.$)("b038f92efd11b5e31689b4157ab42be1125f7d60"),u=(0,n.$)("a35440148a898087a7b4cdbd666092655c0b2bf0"),m=(0,n.$)("9b0750bf92342c4d9f2be99ab846de6dc6883805"),f=(0,n.$)("3092aa836369a6fcbeab8cbd1a0770080dd6f169")},92213:function(e,a,t){"use strict";t.d(a,{CN:function(){return r},Jw:function(){return d},Lp:function(){return s},R2:function(){return i},V4:function(){return l},hW:function(){return c},vl:function(){return o},yS:function(){return n}});let n=["Banco de Venezuela","Banesco","Banco Mercantil","Banco Provincial","BOD","BNC","Banco del Tesoro","Bicentenario Banco Universal","Banplus","Bancaribe","Banco Sofitasa","Banco Plaza","100% Banco","Mi Banco","Bancrecer","Otros"],s=[{id:"Hogar y Reparaciones",name:"Hogar y Reparaciones",description:"Plomer\xeda, electricidad, jardiner\xeda..."},{id:"Tecnolog\xeda y Soporte",name:"Tecnolog\xeda y Soporte",description:"Reparaci\xf3n de PC, redes, dise\xf1o..."},{id:"Automotriz y Repuestos",name:"Automotriz y Repuestos",description:"Mec\xe1nica, repuestos, latoner\xeda..."},{id:"Alimentos y Restaurantes",name:"Alimentos y Restaurantes",description:"Restaurantes, catering, mercados..."},{id:"Transporte y Asistencia",name:"Transporte y Asistencia",description:"Gr\xfaas, ambulancias, fletes, mudanzas..."},{id:"Salud y Bienestar",name:"Salud y Bienestar",description:"Fisioterapia, nutrici\xf3n, entrenadores..."},{id:"Turismo y Estad\xedas",name:"Turismo y Estad\xedas",description:"Hoteles, posadas, tours, paquetes..."},{id:"Educaci\xf3n",name:"Educaci\xf3n",description:"Tutor\xedas, clases, cursos..."},{id:"Eventos",name:"Eventos",description:"Fotograf\xeda, catering, m\xfasica..."},{id:"Belleza",name:"Belleza",description:"Peluquer\xeda, maquillaje, spa..."}],i=["Mec\xe1nica General","Latoner\xeda y Pintura","Cauchera","Electroauto","Venta de Repuestos","Aire Acondicionado"],r=["Manicure","Pedicure","Estilismo","Maquillaje","Depilaci\xf3n","Masajes"],l=["Plomer\xeda","Electricidad","Alba\xf1iler\xeda","Carpinter\xeda","Jardiner\xeda","Pintura"],c=[{code:"VE",name:"Venezuela",idLabel:"C\xe9dula de Identidad",companyIdLabel:"RIF",ivaRate:.16},{code:"CO",name:"Colombia",idLabel:"C\xe9dula de Ciudadan\xeda",companyIdLabel:"NIT",ivaRate:.19},{code:"CL",name:"Chile",idLabel:"RUT / DNI",companyIdLabel:"RUT",ivaRate:.19},{code:"ES",name:"Espa\xf1a",idLabel:"DNI / NIE",companyIdLabel:"NIF",ivaRate:.21},{code:"MX",name:"M\xe9xico",idLabel:"CURP",companyIdLabel:"RFC",ivaRate:.16}],o={1:{level:1,name:"Alfa",color:"210 90% 54%",creditLimit:150,initialPaymentPercentage:.6,installments:3,transactionsForNextLevel:25},2:{level:2,name:"Delta",color:"262 84% 58%",creditLimit:200,initialPaymentPercentage:.5,installments:6,transactionsForNextLevel:40},3:{level:3,name:"Lambda",color:"322 84% 58%",creditLimit:300,initialPaymentPercentage:.4,installments:9,transactionsForNextLevel:60},4:{level:4,name:"Sigma",color:"25 95% 53%",creditLimit:600,initialPaymentPercentage:.3,installments:12,transactionsForNextLevel:80},5:{level:5,name:"Omega",color:"45 93% 47%",creditLimit:1e3,initialPaymentPercentage:0,installments:18,transactionsForNextLevel:150}},d={1:{level:1,name:"Bronce",color:"27 54% 33%",creditLimit:500,initialPaymentPercentage:.5,installments:4,transactionsForNextLevel:50},2:{level:2,name:"Plata",color:"220 13% 69%",creditLimit:750,initialPaymentPercentage:.45,installments:8,transactionsForNextLevel:75},3:{level:3,name:"Oro",color:"45 93% 47%",creditLimit:1e3,initialPaymentPercentage:.35,installments:12,transactionsForNextLevel:100},4:{level:4,name:"Platino",color:"220 13% 91%",creditLimit:1500,initialPaymentPercentage:.25,installments:18,transactionsForNextLevel:150},5:{level:5,name:"Diamante",color:"207 90% 54%",creditLimit:2e3,initialPaymentPercentage:.2,installments:24,transactionsForNextLevel:250}}}},function(e){e.O(0,[3609,9015,2522,2939,7514,3145,9027,6970,803,2971,2117,1744],function(){return e(e.s=55148)}),_N_E=e.O()}]);