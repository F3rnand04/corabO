(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1554],{35722:function(e,a,s){Promise.resolve().then(s.bind(s,97455))},97455:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return R}});var t=s(57437),n=s(2265),i=s(99376),l=s(70061),r=s(12381),c=s(32660),d=s(15868),o=s(18930),u=s(5978),m=s(40279),x=s(96246),h=s(53417),f=s(31810),p=s(37157),j=s(44743),N=s(33507),g=s(92035);function v(e){var a,s,i;let{publicationId:c,ownerId:d}=e,{currentUser:v}=(0,l.a)(),[b,w]=(0,n.useState)(null),[y,k]=(0,n.useState)("");(0,n.useEffect)(()=>{if(!c)return;let e=(0,u.cf)((0,u.JU)(g.db,"publications",c),e=>{w(e.data())});return()=>e()},[c]);let z=()=>{y.trim()&&b&&v&&((0,N.Ck)({ownerId:d,imageId:b.id,commentText:y,author:{id:v.id,name:v.name,profileImage:v.profileImage}}),k(""))},C=e=>{b&&v&&(0,N.nd)({imageId:b.id,commentIndex:e,authorId:v.id})};if(!v||!b)return null;let E=v.id===d;return(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,t.jsx)(h.Z,{className:"w-5 h-5"}),"Comentarios (",(null===(a=b.comments)||void 0===a?void 0:a.length)||0,")"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[null===(s=b.comments)||void 0===s?void 0:s.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-start gap-3 group",children:[(0,t.jsxs)(x.qE,{className:"w-8 h-8 shrink-0",children:[(0,t.jsx)(x.F$,{src:e.profileImage,alt:e.author}),(0,t.jsx)(x.Q5,{children:e.author.charAt(0)})]}),(0,t.jsxs)("div",{className:"flex-grow",children:[(0,t.jsx)("p",{className:"font-semibold text-sm",children:e.author}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.text}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-muted-foreground",children:[(0,t.jsx)(r.z,{variant:"ghost",size:"icon",className:"w-6 h-6",children:(0,t.jsx)(f.Z,{className:"w-4 h-4"})}),(0,t.jsx)("span",{className:"text-xs",children:e.likes||0}),(0,t.jsx)(r.z,{variant:"ghost",size:"icon",className:"w-6 h-6",children:(0,t.jsx)(p.Z,{className:"w-4 h-4"})}),(0,t.jsx)("span",{className:"text-xs",children:e.dislikes||0})]})]}),(e.authorId===v.id||E)&&(0,t.jsx)(r.z,{variant:"ghost",size:"icon",className:"w-7 h-7 shrink-0 opacity-0 group-hover:opacity-100",onClick:()=>C(a),children:(0,t.jsx)(o.Z,{className:"w-4 h-4 text-destructive"})})]},a)),!(null===(i=b.comments)||void 0===i?void 0:i.length)&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No hay comentarios a\xfan. \xa1S\xe9 el primero!"})]}),(0,t.jsxs)("div",{className:"mt-6 flex items-center gap-2",children:[(0,t.jsxs)(x.qE,{className:"w-8 h-8 shrink-0",children:[(0,t.jsx)(x.F$,{src:v.profileImage}),(0,t.jsx)(x.Q5,{children:v.name.charAt(0)})]}),(0,t.jsx)(m.I,{placeholder:"A\xf1ade un comentario...",value:y,onChange:e=>k(e.target.value),onKeyDown:e=>"Enter"===e.key&&z()}),(0,t.jsx)(r.z,{onClick:z,disabled:!y.trim(),size:"icon",children:(0,t.jsx)(j.Z,{className:"h-4 w-4"})})]})]})}var b=s(69140),w=s(39493),y=s(30767),k=s(74291),z=s(23675),C=s(75060),E=s(23340);function I(e){let{publication:a,onOpenChange:s}=e,[i,l]=(0,n.useState)(a.description),{toast:c}=(0,E.pm)(),d=async()=>{try{await (0,N.Fn)(a.id,{description:i}),c({title:"Publicaci\xf3n Actualizada"}),s(!1)}catch(e){c({variant:"destructive",title:"Error",description:"No se pudo actualizar la publicaci\xf3n."})}};return(0,t.jsxs)(k.cZ,{children:[(0,t.jsxs)(k.fK,{children:[(0,t.jsx)(k.$N,{children:"Editar Descripci\xf3n"}),(0,t.jsx)(k.Be,{children:"Realiza los cambios que necesites en la descripci\xf3n de tu publicaci\xf3n."})]}),(0,t.jsxs)("div",{className:"py-4",children:[(0,t.jsx)(C._,{htmlFor:"description",children:"Descripci\xf3n"}),(0,t.jsx)(z.g,{id:"description",value:i,onChange:e=>l(e.target.value),rows:5})]}),(0,t.jsxs)(k.cN,{children:[(0,t.jsx)(r.z,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),(0,t.jsx)(r.z,{onClick:d,children:"Guardar Cambios"})]})]})}function R(){let e=(0,i.useParams)(),a=(0,i.useRouter)(),{currentUser:s}=(0,l.a)(),[m,x]=(0,n.useState)(null),[h,f]=(0,n.useState)(!0),[p,j]=(0,n.useState)(!1),{toast:z}=(0,E.pm)(),C=e.id;(0,n.useEffect)(()=>{if(!C||!g.db){f(!1);return}let e=(0,u.cf)((0,u.JU)(g.db,"publications",C),async e=>{if(e.exists()){let a=e.data();if(a.owner)x(a);else try{let e=(0,u.JU)(g.db,"users",a.providerId),s=await (0,u.QT)(e);s.exists()&&x({...a,owner:s.data()})}catch(e){console.error("Failed to fetch owner document:",e)}}else x(null);f(!1)});return()=>e()},[C]);let R=async()=>{if(m&&s)try{await (0,N.yT)(s.id,m.id),z({title:"Publicaci\xf3n Eliminada"}),a.push("/profile")}catch(e){z({variant:"destructive",title:"Error",description:"No se pudo eliminar la publicaci\xf3n."})}},_=(null==s?void 0:s.id)===(null==m?void 0:m.providerId);return h?(0,t.jsx)("main",{className:"container max-w-2xl mx-auto py-4 space-y-4",children:(0,t.jsx)(b.O,{className:"h-[600px] w-full"})}):m?(0,t.jsxs)("div",{className:"bg-muted/30 min-h-screen",children:[(0,t.jsx)("div",{className:"fixed top-4 left-4 z-20 flex gap-2",children:(0,t.jsx)(r.z,{variant:"ghost",size:"icon",onClick:()=>a.back(),className:"bg-background/50 rounded-full",children:(0,t.jsx)(c.Z,{className:"h-6 w-6"})})}),_&&(0,t.jsxs)("div",{className:"fixed top-4 right-4 z-20 flex gap-2",children:[(0,t.jsxs)(k.Vq,{open:p,onOpenChange:j,children:[(0,t.jsx)(k.hg,{asChild:!0,children:(0,t.jsx)(r.z,{variant:"outline",size:"icon",className:"bg-background/80 rounded-full",children:(0,t.jsx)(d.Z,{className:"h-5 w-5"})})}),(0,t.jsx)(I,{publication:m,onOpenChange:j})]}),(0,t.jsxs)(y.aR,{children:[(0,t.jsx)(y.vW,{asChild:!0,children:(0,t.jsx)(r.z,{variant:"destructive",size:"icon",className:"bg-background/80 rounded-full",children:(0,t.jsx)(o.Z,{className:"h-5 w-5"})})}),(0,t.jsxs)(y._T,{children:[(0,t.jsxs)(y.fY,{children:[(0,t.jsx)(y.f$,{children:"\xbfEliminar esta publicaci\xf3n?"}),(0,t.jsx)(y.yT,{children:"Esta acci\xf3n es permanente y no se puede deshacer."})]}),(0,t.jsxs)(y.xo,{children:[(0,t.jsx)(y.le,{children:"Cancelar"}),(0,t.jsx)(y.OL,{onClick:R,className:"bg-destructive hover:bg-destructive/90",children:"S\xed, eliminar"})]})]})]})]}),(0,t.jsxs)("main",{className:"container max-w-2xl mx-auto py-4",children:[(0,t.jsx)(w.o,{publication:m}),m.owner&&(0,t.jsx)("div",{className:"bg-background p-4 rounded-b-lg border-x border-b",children:(0,t.jsx)(v,{publicationId:C,ownerId:m.owner.id})})]})]}):(0,t.jsxs)("main",{className:"container max-w-2xl mx-auto py-12 text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Publicaci\xf3n no encontrada"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"El contenido que buscas no existe o ha sido eliminado."})]})}},30767:function(e,a,s){"use strict";s.d(a,{OL:function(){return j},_T:function(){return m},aR:function(){return c},f$:function(){return f},fY:function(){return x},le:function(){return N},vW:function(){return d},xo:function(){return h},yT:function(){return p}});var t=s(57437),n=s(2265),i=s(90277),l=s(93448),r=s(12381);let c=i.fC,d=i.xz,o=i.h_,u=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(i.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n,ref:a})});u.displayName=i.aV.displayName;let m=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(u,{}),(0,t.jsx)(i.VY,{ref:a,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...n})]})});m.displayName=i.VY.displayName;let x=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...s})};x.displayName="AlertDialogHeader";let h=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};h.displayName="AlertDialogFooter";let f=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(i.Dx,{ref:a,className:(0,l.cn)("text-lg font-semibold",s),...n})});f.displayName=i.Dx.displayName;let p=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(i.dk,{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",s),...n})});p.displayName=i.dk.displayName;let j=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(i.aU,{ref:a,className:(0,l.cn)((0,r.d)(),s),...n})});j.displayName=i.aU.displayName;let N=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(i.$j,{ref:a,className:(0,l.cn)((0,r.d)({variant:"outline"}),"mt-2 sm:mt-0",s),...n})});N.displayName=i.$j.displayName}},function(e){e.O(0,[3609,9015,2522,2939,7514,3145,7648,9027,9939,1272,9879,803,729,1911,2971,2117,1744],function(){return e(e.s=35722)}),_N_E=e.O()}]);