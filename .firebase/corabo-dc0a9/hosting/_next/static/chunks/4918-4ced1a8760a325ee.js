"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4918],{84604:function(e,s,a){a.d(s,{O:function(){return p}});var t=a(57437),i=a(2265),l=a(13993),r=a(61029),n=a(95775),c=a(39960),d=a(59121),o=a(29750),m=a(93292),u=a(93448);let x={0:"Domingo",1:"Lunes",2:"Martes",3:"Mi\xe9rcoles",4:"Jueves",5:"Viernes",6:"S\xe1bado"},h=e=>"".concat(Math.floor(e/36e5),"h ").concat(Math.floor(e%36e5/6e4),"m");function p(e){let{schedule:s,onStatusChange:a}=e,[p,f]=(0,i.useState)("closed"),[v,j]=(0,i.useState)("");return(0,i.useEffect)(()=>{let e=()=>{if(!s){f("closed"),j("Horario no disponible"),null==a||a("closed");return}let e=new Date,t=s[x[(0,l.w)(e)]];if(t&&t.active){if("00:00"===t.from&&("24:00"===t.to||"23:59"===t.to)){f("open"),j("Abierto 24 horas"),null==a||a("open");return}let s=(0,r.Qc)(t.from,"HH:mm",new Date),i=(0,r.Qc)(t.to,"HH:mm",new Date);if((0,n._)(e,{start:s,end:i})){f("open");let s=h((0,c._)(i,e));j("Cierra en ".concat(s)),null==a||a("open");return}}for(let t=0;t<7;t++){let i=(0,d.E)(e,t),n=s[x[(0,l.w)(i)]];if(n&&n.active){let s=(0,r.Qc)(n.from,"HH:mm",new Date);if(0===t&&e>s)continue;let l=(0,r.Qc)(n.from,"HH:mm",i);f("closed");let c=1===t?"ma\xf1ana":(0,o.WU)(l,"eeee",{locale:m.es}),d=(0,o.WU)(l,"p",{locale:m.es});j("Abre ".concat(c," a la(s) ").concat(d)),null==a||a("closed");return}}f("closed"),j("Cerrado temporalmente"),null==a||a("closed")};e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[s,a]),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs font-semibold",children:[(0,t.jsx)("span",{className:(0,u.cn)("w-2 h-2 rounded-full","open"===p?"bg-green-500":"bg-red-500")}),(0,t.jsx)("span",{className:(0,u.cn)("open"===p?"text-green-600":"text-red-600"),children:"open"===p?"Abierto":"Cerrado"}),(0,t.jsxs)("span",{className:"text-muted-foreground font-normal",children:["\xb7 ",v]})]})}},17826:function(e,s,a){a.d(s,{m:function(){return f}});var t=a(57437),i=a(2265),l=a(74291),r=a(12381),n=a(23675),c=a(75060),d=a(23340),o=a(46211),m=a(87769),u=a(43745),x=a(51817),h=a(94589);let p=["Contenido Ofensivo","Informaci\xf3n Falsa","Es Spam","Intento de Fraude"];function f(e){let{isOpen:s,onOpenChange:a,providerId:f,publicationId:v}=e,{toast:j}=(0,d.pm)(),[g,b]=(0,i.useState)(""),[N,w]=(0,i.useState)(""),[y,k]=(0,i.useState)(!1),[C,S]=(0,i.useState)(!1),[z,Z]=(0,i.useState)(!1);return(0,t.jsx)(l.Vq,{open:s,onOpenChange:a,children:(0,t.jsxs)(l.cZ,{className:"sm:max-w-md",children:[(0,t.jsxs)(l.fK,{children:[(0,t.jsxs)(l.$N,{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Z,{className:"w-5 h-5 text-destructive"}),"Denunciar Publicaci\xf3n"]}),(0,t.jsx)(l.Be,{children:"Ay\xfadanos a entender qu\xe9 problema tiene esta publicaci\xf3n. Tu reporte es an\xf3nimo."})]}),(0,t.jsxs)("div",{className:"py-4 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(c._,{children:"Motivo (selecciona uno o m\xe1s)"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:p.map(e=>(0,t.jsx)(r.z,{variant:g===e?"destructive":"outline",size:"sm",onClick:()=>b(e),children:e},e))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"description",children:"Descripci\xf3n (opcional)"}),(0,t.jsx)(n.g,{id:"description",placeholder:"Danos m\xe1s detalles sobre el problema...",value:N,onChange:e=>w(e.target.value),rows:4})]}),(0,t.jsxs)("div",{className:"space-y-4 pt-4 border-t",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(c._,{htmlFor:"hide-content",className:"flex items-center gap-3 cursor-pointer",children:[(0,t.jsx)(m.Z,{className:"w-5 h-5"}),"No mostrar m\xe1s este tipo de contenido"]}),(0,t.jsx)(h.r,{id:"hide-content",checked:y,onCheckedChange:k})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(c._,{htmlFor:"hide-provider",className:"flex items-center gap-3 cursor-pointer",children:[(0,t.jsx)(u.Z,{className:"w-5 h-5"}),"No mostrar m\xe1s a este proveedor"]}),(0,t.jsx)(h.r,{id:"hide-provider",checked:C,onCheckedChange:S})]})]})]}),(0,t.jsxs)(l.cN,{children:[(0,t.jsx)(r.z,{variant:"outline",onClick:()=>a(!1),children:"Cancelar"}),(0,t.jsxs)(r.z,{variant:"destructive",onClick:()=>{if(!g&&!N){j({variant:"destructive",title:"Falta informaci\xf3n",description:"Por favor, selecciona un motivo o escribe una descripci\xf3n."});return}Z(!0),setTimeout(()=>{j({title:"Denuncia Enviada",description:"Gracias por ayudarnos a mantener la comunidad segura. Revisaremos tu denuncia a la brevedad."}),b(""),w(""),k(!1),S(!1),Z(!1),a(!1)},1e3)},disabled:z||!g&&!N,children:[z&&(0,t.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Enviar Denuncia"]})]})]})})}},14918:function(e,s,a){a.d(s,{Z:function(){return e$}});var t=a(57437),i=a(99376),l=a(12381),r=a(51817),n=a(56439),c=a(73247),d=a(93448),o=a(96246),m=a(2265),u=a(23340),x=a(33145),h=a(99397),p=a(21047),f=a(88997),v=a(82718),j=a(70061),g=a(89269);function b(e){let{product:s,onDoubleClick:a}=e,{currentUser:i,cart:r}=(0,j.a)(),{toast:n}=(0,u.pm)(),[c,o]=(0,m.useState)(0),[b,N]=(0,m.useState)(!1),w=r.find(e=>e.product.id===s.id),y=(null==w?void 0:w.quantity)||0;if(!i)return null;let k=i.isTransactionsActive,C=e=>{k&&i.id&&(0,g.x)(i.id,s.id,e)};return(0,t.jsxs)("div",{className:"relative aspect-square rounded-lg overflow-hidden group border shadow-sm",onDoubleClick:a,children:[(0,t.jsx)(x.default,{src:s.imageUrl,alt:s.name,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-105 cursor-pointer","data-ai-hint":"product image"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col justify-end p-3 text-white",children:[(0,t.jsx)("div",{className:"absolute top-2 right-2",children:0===y?(0,t.jsxs)(l.z,{size:"sm",className:"h-8 rounded-full bg-black/40 hover:bg-black/60 text-white hover:text-white border-none shadow-md",onClick:()=>{if(!k){n({variant:"destructive",title:"Acci\xf3n Requerida",description:"Por favor, activa tu registro de transacciones para poder comprar."});return}i.id&&(0,g.x)(i.id,s.id,1)},disabled:!k,children:[(0,t.jsx)(h.Z,{className:"w-4 h-4 mr-1"}),"A\xf1adir"]}):(0,t.jsxs)("div",{className:"flex items-center gap-1 bg-background text-foreground rounded-full h-8 shadow-md",children:[(0,t.jsx)(l.z,{variant:"ghost",size:"icon",className:"h-full w-8 rounded-full",onClick:()=>C(y-1),children:(0,t.jsx)(p.Z,{className:"h-4 h-4"})}),(0,t.jsx)("span",{className:"text-sm font-bold w-4 text-center",children:y}),(0,t.jsx)(l.z,{variant:"ghost",size:"icon",className:"h-full w-8 rounded-full",onClick:()=>C(y+1),children:(0,t.jsx)(h.Z,{className:"h-4 h-4"})})]})}),(0,t.jsx)("h4",{className:"font-bold text-sm leading-tight drop-shadow-md",children:s.name}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,t.jsxs)("p",{className:"text-lg font-bold",children:["$",s.price.toFixed(2)]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(f.Z,{className:(0,d.cn)("w-4 h-4 cursor-pointer",b&&"text-red-500 fill-red-500"),onClick:()=>{o(e=>b?e-1:e+1),N(e=>!e)}}),(0,t.jsx)("span",{className:"text-xs",children:c})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(v.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-xs",children:"0"})]})]})]})]})]})}var N=a(74291),w=a(90641),y=a(44743),k=a(32489),C=a(18930),S=a(53417),z=a(31810),Z=a(37157),D=a(40279),E=a(31593),A=a(30767),I=a(33507);function F(e){let{isOpen:s,onOpenChange:a,product:i}=e,{currentUser:r,cart:n}=(0,j.a)(),{toast:c}=(0,u.pm)(),[d,v]=(0,m.useState)(""),[b,F]=(0,m.useState)([]),[$,O]=(0,m.useState)({});if((0,m.useEffect)(()=>{O({}),F([])},[i]),!r||!i)return null;let R=r.id===i.providerId,T=n.find(e=>e.product.id===i.id),P=T?T.quantity:0,q=r.isTransactionsActive,_=e=>{q&&r.id&&(0,g.x)(r.id,i.id,e)},M=()=>{if(d.trim()){let e={authorId:r.id,author:r.name,text:d,profileImage:r.profileImage,likes:0,dislikes:0};F(s=>[...s,e]),v("")}},H=(e,s)=>{let a=$[e],t=[...b],i=t[e];"like"===a&&(i.likes=0),"dislike"===a&&(i.dislikes=0),a===s?O(s=>({...s,[e]:null})):("like"===s&&(i.likes=1),"dislike"===s&&(i.dislikes=1),O(a=>({...a,[e]:s}))),F(t)};return(0,t.jsx)(N.Vq,{open:s,onOpenChange:a,children:(0,t.jsxs)(N.cZ,{className:"sm:max-w-2xl p-0 flex flex-col max-h-[90vh]",children:[(0,t.jsxs)("div",{className:"relative aspect-video flex-shrink-0",children:[(0,t.jsx)(x.default,{src:i.imageUrl,alt:i.name,fill:!0,className:"object-cover rounded-t-lg","data-ai-hint":"product detail"}),(0,t.jsxs)("div",{className:"absolute bottom-2 right-2 flex items-end gap-2 text-white",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)(l.z,{variant:"ghost",size:"icon",className:"text-white hover:text-white bg-black/30 rounded-full h-10 w-10",children:(0,t.jsx)(f.Z,{className:"w-5 h-5"})}),(0,t.jsx)("span",{className:"text-xs font-bold mt-1 drop-shadow-md",children:"0"})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)(l.z,{variant:"ghost",size:"icon",className:"text-white hover:text-white bg-black/30 rounded-full h-10 w-10",children:(0,t.jsx)(y.Z,{className:"w-5 h-5"})}),(0,t.jsx)("span",{className:"text-xs font-bold mt-1 drop-shadow-md",children:"0"})]})]})]}),(0,t.jsx)(w.x,{className:"flex-grow overflow-y-auto",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)(N.fK,{className:"text-left mb-4",children:(0,t.jsx)(N.$N,{className:"text-2xl",children:i.name})}),(0,t.jsxs)("p",{className:"font-bold text-3xl mb-4",children:["$",i.price.toFixed(2)]}),(0,t.jsx)("p",{className:"text-base text-foreground mb-6",children:i.description}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mb-6",children:[0===P?(0,t.jsxs)(l.z,{onClick:()=>{if(!q){c({variant:"destructive",title:"Acci\xf3n Requerida",description:"Por favor, activa tu registro de transacciones para poder a\xf1adir productos al carrito."});return}(0,g.x)(r.id,i.id,(P||0)+1)},disabled:!q,children:[(0,t.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"A\xf1adir al Carrito"]}):(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.z,{variant:"outline",size:"icon",onClick:()=>_(P-1),disabled:!q,children:(0,t.jsx)(p.Z,{className:"h-4 w-4"})}),(0,t.jsx)("span",{className:"font-bold text-lg w-10 text-center",children:P}),(0,t.jsx)(l.z,{variant:"outline",size:"icon",onClick:()=>_(P+1),disabled:!q,children:(0,t.jsx)(h.Z,{className:"h-4 w-4"})}),(0,t.jsx)(l.z,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>_(0),disabled:!q,children:(0,t.jsx)(k.Z,{className:"h-5 w-5"})})]}),R?(0,t.jsxs)(A.aR,{children:[(0,t.jsx)(A.vW,{asChild:!0,children:(0,t.jsxs)(l.z,{variant:"destructive",className:"ml-auto",children:[(0,t.jsx)(C.Z,{className:"mr-2 h-4 w-4"}),"Eliminar Producto"]})}),(0,t.jsxs)(A._T,{children:[(0,t.jsxs)(A.fY,{children:[(0,t.jsx)(A.f$,{children:"\xbfEliminar este producto?"}),(0,t.jsx)(A.yT,{children:"Esta acci\xf3n es permanente y no se puede deshacer. El producto se eliminar\xe1 de tu cat\xe1logo y de cualquier carrito en el que se encuentre."})]}),(0,t.jsxs)(A.xo,{children:[(0,t.jsx)(A.le,{children:"Cancelar"}),(0,t.jsx)(A.OL,{onClick:()=>{r&&((0,I.yT)(r.id,i.id),a(!1))},children:"S\xed, eliminar"})]})]})]}):(0,t.jsx)(l.z,{variant:"secondary",onClick:()=>a(!1),className:"ml-auto",children:"Cerrar"})]}),(0,t.jsx)(E.Z,{}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,t.jsx)(S.Z,{className:"w-5 h-5"}),"Comentarios (",b.length||0,")"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[null==b?void 0:b.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsxs)(o.qE,{className:"w-8 h-8 shrink-0",children:[(0,t.jsx)(o.F$,{src:e.profileImage,alt:e.author}),(0,t.jsx)(o.Q5,{children:e.author.charAt(0)})]}),(0,t.jsxs)("div",{className:"flex-grow",children:[(0,t.jsx)("p",{className:"font-semibold text-sm",children:e.author}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.text}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-muted-foreground",children:[(0,t.jsx)(l.z,{variant:"ghost",size:"icon",className:"w-6 h-6",onClick:()=>H(s,"like"),children:(0,t.jsx)(z.Z,{className:"w-4 h-4 ".concat("like"===$[s]?"text-primary fill-primary":"")})}),(0,t.jsx)("span",{className:"text-xs min-w-[1ch]",children:0}),(0,t.jsx)(l.z,{variant:"ghost",size:"icon",className:"w-6 h-6",onClick:()=>H(s,"dislike"),children:(0,t.jsx)(Z.Z,{className:"w-4 h-4 ".concat("dislike"===$[s]?"text-destructive fill-destructive":"")})}),(0,t.jsx)("span",{className:"text-xs min-w-[1ch]",children:0})]})]})]},s)),!(null==b?void 0:b.length)&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No hay comentarios a\xfan. \xa1S\xe9 el primero!"})]}),(0,t.jsxs)("div",{className:"mt-6 flex items-center gap-2",children:[(0,t.jsx)(D.I,{placeholder:"A\xf1ade un comentario...",value:d,onChange:e=>v(e.target.value),onKeyDown:e=>"Enter"===e.key&&M()}),(0,t.jsx)(l.z,{onClick:M,disabled:!d.trim(),children:"Comentar"})]})]})]})})]})})}var $=a(27648),O=a(92035),R=a(5978),T=a(37691),P=a(79684),q=a(79820),_=a(46211),M=a(92451),H=a(10407),L=a(53113),V=a(60729),U=a(17826),G=a(69140);function Q(e){let{gallery:s,owner:a,isLoading:i}=e,{toast:r}=(0,u.pm)(),[n,c]=(0,m.useState)(0),[o,h]=(0,m.useState)(!1),[p,j]=(0,m.useState)(!1),[g,b]=(0,m.useState)(0),[N,w]=(0,m.useState)(!1),[k,C]=(0,m.useState)(0),[S,z]=(0,m.useState)(0),[Z,D]=(0,m.useState)(0);if((0,m.useEffect)(()=>{if(s.length>0&&n<s.length){var e;let a=s[n];b(a.likes||0),z((null===(e=a.comments)||void 0===e?void 0:e.length)||0),C(0),w(!1)}},[n,s]),!a)return null;let E=e=>{D(e),h(!0)},A=async()=>{let e=s.length>0?s[n]:null;if(!e)return;let t={title:"Mira esta publicaci\xf3n de ".concat(a.name),text:"".concat(e.alt,": ").concat(e.description),url:window.location.href};try{if(navigator.share)await navigator.share(t),C(e=>e+1);else throw Error("Share API not supported")}catch(e){navigator.clipboard.writeText(t.url),r({title:"Enlace Copiado",description:"El enlace al perfil ha sido copiado a tu portapapeles."})}},I=s&&s.length>0&&n<s.length?s[n]:null;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(q.Zb,{className:"rounded-2xl overflow-hidden shadow-lg relative",children:(0,t.jsx)(q.aY,{className:"p-0",children:i?(0,t.jsx)(G.O,{className:"w-full aspect-video"}):I?(0,t.jsxs)("div",{className:"relative group",onDoubleClick:()=>E(n),children:[(0,t.jsx)(x.default,{src:I.src,alt:I.alt,width:600,height:400,className:"rounded-t-2xl object-cover w-full aspect-[4/3] cursor-pointer","data-ai-hint":"professional workspace"},I.src),(0,t.jsx)(l.z,{variant:"ghost",size:"icon",className:"absolute top-2 left-2 z-10 text-white bg-black/20 rounded-full h-8 w-8",onClick:()=>j(!0),children:(0,t.jsx)(_.Z,{className:"w-4 h-4"})}),(0,t.jsx)(l.z,{onClick:()=>{c(e=>0===e?s.length-1:e-1)},variant:"ghost",size:"icon",className:"absolute top-1/2 left-2 -translate-y-1/2 bg-black/20 text-white rounded-full h-8 w-8 z-10",children:(0,t.jsx)(M.Z,{className:"h-5 w-5"})}),(0,t.jsx)(l.z,{onClick:()=>{c(e=>e===s.length-1?0:e+1)},variant:"ghost",size:"icon",className:"absolute top-1/2 right-2 -translate-y-1/2 bg-black/20 text-white rounded-full h-8 w-8 z-10",children:(0,t.jsx)(H.Z,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:"absolute bottom-2 right-2 flex flex-col items-end gap-2 text-white",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)(l.z,{variant:"ghost",size:"icon",className:"text-white hover:text-white bg-black/30 rounded-full h-10 w-10",onClick:()=>{w(e=>!e),b(e=>N?e-1:e+1)},children:(0,t.jsx)(f.Z,{className:(0,d.cn)("w-5 h-5",N&&"fill-red-500 text-red-500")})}),(0,t.jsxs)("span",{className:"text-xs font-bold mt-1",children:[(g/1e3).toFixed(1),"k"]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)(l.z,{variant:"ghost",size:"icon",className:"text-white hover:text-white bg-black/30 rounded-full h-10 w-10",onClick:()=>E(n),children:(0,t.jsx)(v.Z,{className:"w-5 h-5"})}),(0,t.jsx)("span",{className:"text-xs font-bold mt-1",children:S})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)(l.z,{variant:"ghost",size:"icon",className:"text-white hover:text-white bg-black/30 rounded-full h-10 w-10",onClick:A,children:(0,t.jsx)(y.Z,{className:"w-5 h-5"})}),(0,t.jsx)("span",{className:"text-xs font-bold mt-1",children:k})]})]})]}):(0,t.jsxs)("div",{className:"w-full aspect-video bg-muted flex flex-col items-center justify-center text-center p-4",children:[(0,t.jsx)(L.Z,{className:"w-16 h-16 text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"font-bold text-lg text-foreground",children:"Tu galer\xeda est\xe1 vac\xeda"}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Haz clic en el bot\xf3n (+) en el pie de p\xe1gina para a\xf1adir tu primera publicaci\xf3n."})]})})}),(0,t.jsx)("div",{className:"p-2 grid grid-cols-3 gap-1",children:i?Array.from({length:6}).map((e,s)=>(0,t.jsx)(G.O,{className:"aspect-square rounded-md"},s)):s.map((e,s)=>(0,t.jsx)("div",{className:"relative aspect-square cursor-pointer group",onClick:()=>c(s),onDoubleClick:()=>E(s),children:(0,t.jsx)(x.default,{src:e.src,alt:e.alt,fill:!0,className:(0,d.cn)("object-cover rounded-md transition-all duration-200",n===s?"ring-2 ring-primary ring-offset-2":"ring-0 group-hover:opacity-80"),"data-ai-hint":"product image"})},e.id))})]}),(0,t.jsx)(U.m,{isOpen:p,onOpenChange:j,providerId:a.id,publicationId:(null==I?void 0:I.id)||"profile-report"}),s.length>0&&(0,t.jsx)(V.L,{isOpen:o,onOpenChange:h,gallery:s,startIndex:Z,owner:a})]})}var B=a(95937),J=a(11239),Y=a(82023),K=a(33245),W=a(17486),X=a(86595),ee=a(38846);let es=m.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsxs)(ee.fC,{ref:s,className:(0,d.cn)("relative flex w-full touch-none select-none items-center",a),...i,children:[(0,t.jsx)(ee.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,t.jsx)(ee.e6,{className:"absolute h-full bg-primary"})}),(0,t.jsx)(ee.bU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});es.displayName=ee.fC.displayName;var ea=a(69174),et=a(94589);a(83079);var ei=(0,a(12119).$)("503bea4b84bb783efddf54cdbd971e039fda6b65"),el=a(75060);let er={basic:{name:"B\xe1sico",dailyRate:2,impressions:1500,icon:n.Z},advanced:{name:"Avanzado",dailyRate:7,impressions:8e3,icon:J.Z},premium:{name:"Premium",dailyRate:16,impressions:2e4,icon:Y.Z}};function en(e){let{isOpen:s,onOpenChange:a}=e,{currentUser:i,allPublications:r}=(0,j.a)(),[n,c]=(0,m.useState)(1),[o,u]=(0,m.useState)(null),[h,p]=(0,m.useState)("basic"),[f,v]=(0,m.useState)(1),[g,b]=(0,m.useState)(!1),[y,k]=(0,m.useState)(!1),[C,S]=(0,m.useState)(!1),z=(0,m.useMemo)(()=>er,[]),Z=(0,m.useMemo)(()=>{let e=z[h].dailyRate;g&&(e*=1.15),y&&(e*=1.2);let s=e*f;if(!i)return{dailyCost:0,totalCost:0,discount:0,finalCost:0,initialPayment:0,financedAmount:0};let a=i.isSubscribed?.1*s:0,t=s-a,l=t,r=0;if(C&&t>=20){let e=i.credicoraDetails;e&&(r=Math.min(t*(1-e.initialPaymentPercentage),i.credicoraLimit||0),l=t-r)}return{dailyCost:e,totalCost:s,discount:a,finalCost:t,initialPayment:l,financedAmount:r}},[h,f,g,y,C,i,z]),D=()=>c(e=>e+1),A=()=>c(e=>e-1),I=()=>{o&&i&&(ei(i.id,{publicationId:o,budget:Z.finalCost,durationDays:f,budgetLevel:h,dailyBudget:Z.dailyCost,segmentation:{geographic:g?["Este","Oeste"]:[],interests:y?["Tecnolog\xeda","Restaurantes"]:[]},financedWithCredicora:C&&Z.finalCost>=20,appliedSubscriptionDiscount:i.isSubscribed?.1:0}),a(!1),F())},F=()=>{c(1),u(null),p("basic"),v(1),b(!1),k(!1),S(!1)};return i?(0,t.jsx)(N.Vq,{open:s,onOpenChange:e=>{e||F(),a(e)},children:(0,t.jsxs)(N.cZ,{className:"sm:max-w-md",children:[(0,t.jsx)(N.fK,{children:(0,t.jsxs)(N.$N,{className:"flex items-center gap-2",children:[n>1&&(0,t.jsx)(l.z,{variant:"ghost",size:"icon",onClick:A,className:"h-7 w-7",children:(0,t.jsx)(M.Z,{})}),"Gestor de Campa\xf1as"]})}),(()=>{switch(n){case 1:return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(N.Be,{children:"Elige la publicaci\xf3n de tu galer\xeda que quieres impulsar."}),(0,t.jsx)(w.x,{className:"h-72",children:(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2 pr-4",children:r.filter(e=>e.providerId===i.id).map(e=>(0,t.jsx)("div",{className:(0,d.cn)("relative aspect-square rounded-md overflow-hidden cursor-pointer border-4",o===e.id?"border-primary":"border-transparent"),onClick:()=>u(e.id),children:(0,t.jsx)(x.default,{src:e.src,alt:e.alt,fill:!0,style:{objectFit:"cover"}})},e.id))})}),(0,t.jsx)(N.cN,{children:(0,t.jsx)(l.z,{onClick:D,disabled:!o,children:"Siguiente"})})]});case 2:return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(N.Be,{children:"Define el presupuesto y la duraci\xf3n de tu campa\xf1a."}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(el._,{children:"Nivel de Impulso"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(z).map(e=>{let[s,a]=e;return(0,t.jsxs)(l.z,{variant:h===s?"default":"outline",className:"h-20 flex-col gap-1",onClick:()=>p(s),children:[(0,t.jsx)(a.icon,{className:"w-6 h-6"}),(0,t.jsx)("span",{className:"text-xs",children:a.name}),(0,t.jsxs)("span",{className:"text-xs font-mono",children:["$",a.dailyRate,"/d\xeda"]})]},s)})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(el._,{children:"Duraci\xf3n"}),(0,t.jsxs)(ea.C,{children:[f," d\xeda(s)"]})]}),(0,t.jsx)(es,{value:[f],onValueChange:e=>v(e[0]),min:1,max:30,step:1})]}),(0,t.jsxs)(B.bZ,{children:[(0,t.jsx)(K.Z,{className:"h-4 w-4"}),(0,t.jsx)(B.Cd,{children:"Alcance Estimado Diario"}),(0,t.jsxs)(B.X,{children:["~",z[h].impressions.toLocaleString("es-VE")," impresiones"]})]}),(0,t.jsxs)(N.cN,{children:[(0,t.jsx)(l.z,{variant:"outline",onClick:A,children:"Atr\xe1s"}),(0,t.jsx)(l.z,{onClick:D,children:"Siguiente"})]})]});case 3:return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(N.Be,{children:"A\xf1ade capas de segmentaci\xf3n para llegar a tu p\xfablico ideal (opcional)."}),(0,t.jsxs)("div",{className:"space-y-4 rounded-md border p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(el._,{htmlFor:"geo-segment",className:"flex-grow pr-4",children:["Segmentaci\xf3n Geogr\xe1fica",(0,t.jsx)("span",{className:"block text-xs text-muted-foreground",children:"Enfoca en zonas espec\xedficas de la ciudad. (+15% costo)"})]}),(0,t.jsx)(et.r,{id:"geo-segment",checked:g,onCheckedChange:b})]}),(0,t.jsx)(E.Z,{}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(el._,{htmlFor:"interest-segment",className:"flex-grow pr-4",children:["Segmentaci\xf3n por Intereses",(0,t.jsx)("span",{className:"block text-xs text-muted-foreground",children:"Llega a usuarios interesados en otras categor\xedas. (+20% costo)"})]}),(0,t.jsx)(et.r,{id:"interest-segment",checked:y,onCheckedChange:k})]})]}),(0,t.jsxs)(B.bZ,{children:[(0,t.jsx)(W.Z,{className:"h-4 w-4"}),(0,t.jsx)(B.Cd,{children:"Costo Diario Estimado"}),(0,t.jsxs)(B.X,{children:["$",Z.dailyCost.toFixed(2)]})]}),(0,t.jsxs)(N.cN,{children:[(0,t.jsx)(l.z,{variant:"outline",onClick:A,children:"Atr\xe1s"}),(0,t.jsx)(l.z,{onClick:D,children:"Revisar y Pagar"})]})]});case 4:return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(N.Be,{children:"Revisa el resumen final de tu campa\xf1a."}),(0,t.jsxs)("div",{className:"p-4 rounded-lg border bg-muted/50 space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Costo base:"}),(0,t.jsxs)("span",{className:"font-mono",children:["$",(z[h].dailyRate*f).toFixed(2)]})]}),(g||y)&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Cargos por segmentaci\xf3n:"}),(0,t.jsxs)("span",{className:"font-mono",children:["+$",(Z.totalCost-z[h].dailyRate*f).toFixed(2)]})]}),(0,t.jsx)(E.Z,{}),(0,t.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,t.jsx)("span",{children:"Subtotal:"}),(0,t.jsxs)("span",{className:"font-mono",children:["$",Z.totalCost.toFixed(2)]})]}),i.isSubscribed&&(0,t.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,t.jsx)("span",{children:"Descuento de Suscriptor (10%):"}),(0,t.jsxs)("span",{className:"font-mono",children:["-$",Z.discount.toFixed(2)]})]}),(0,t.jsx)(E.Z,{}),(0,t.jsxs)("div",{className:"flex justify-between font-bold text-base",children:[(0,t.jsx)("span",{children:"Total Campa\xf1a:"}),(0,t.jsxs)("span",{className:"font-mono",children:["$",Z.finalCost.toFixed(2)]})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground text-right italic",children:"Los montos no incluyen IVA (16%)."}),Z.finalCost>=20&&(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[(0,t.jsxs)(el._,{htmlFor:"use-credicora",className:"flex items-center gap-2 font-medium text-blue-600",children:[(0,t.jsx)(X.Z,{className:"w-5 h-5 fill-current"}),"Pagar con Credicora"]}),(0,t.jsx)(et.r,{id:"use-credicora",checked:C,onCheckedChange:S})]}),C&&Z.finalCost>=20&&(0,t.jsxs)("div",{className:"p-3 text-center bg-blue-50 border border-blue-200 rounded-md text-blue-900",children:[(0,t.jsxs)("p",{className:"font-bold",children:["Total a Pagar Hoy: $",Z.initialPayment.toFixed(2)]}),(0,t.jsxs)("p",{className:"text-xs",children:["El resto ($",Z.financedAmount.toFixed(2),") se financiar\xe1 en tus cuotas de Credicora."]})]}),(0,t.jsxs)(N.cN,{children:[(0,t.jsx)(l.z,{variant:"outline",onClick:A,children:"Atr\xe1s"}),(0,t.jsx)(l.z,{onClick:I,children:"Confirmar y Proceder al Pago"})]})]});default:return null}})()]})}):null}var ec=a(6942),ed=a(3269);function eo(e){let{user:s}=e,a=(0,m.useRef)(null),{toast:i}=(0,u.pm)(),r=()=>{var e;null===(e=a.current)||void 0===e||e.click()};return(0,t.jsxs)("div",{className:"relative shrink-0",children:[(0,t.jsx)("input",{type:"file",ref:a,onChange:e=>{var a;let t=null===(a=e.target.files)||void 0===a?void 0:a[0];if(t){let e=new FileReader;e.onload=e=>{var a;let t=document.createElement("img");t.onload=()=>{let e=document.createElement("canvas"),a=t.width,l=t.height;a>l?a>800&&(l*=800/a,a=800):l>800&&(a*=800/l,l=800),e.width=a,e.height=l;let r=e.getContext("2d");null==r||r.drawImage(t,0,0,a,l);let n=e.toDataURL("image/jpeg",.8);(0,ed.Pd)(s.id,n).then(()=>{i({title:"\xa1Foto de Perfil Actualizada!",description:"Tu nueva foto de perfil est\xe1 visible."})}).catch(e=>{i({variant:"destructive",title:"Error al subir la imagen",description:e.message})})},t.src=null===(a=e.target)||void 0===a?void 0:a.result},e.readAsDataURL(t)}},className:"hidden",accept:"image/*"}),(0,t.jsxs)(o.qE,{className:"w-16 h-16 cursor-pointer",onClick:r,children:[(0,t.jsx)(o.F$,{src:s.profileImage,alt:s.name}),(0,t.jsx)(o.Q5,{children:s.name.charAt(0)})]}),(0,t.jsx)(l.z,{size:"icon",className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full",onClick:r,children:(0,t.jsx)(h.Z,{className:"w-4 w-4"})})]})}var em=a(70525),eu=a(91723),ex=a(61476);function eh(e){var s;let{user:a,isSelf:i}=e,{transactions:l,getUserMetrics:r}=(0,j.a)(),n=(0,m.useMemo)(()=>r(a.id,a.type,l),[a.id,a.type,l,r]),c="provider"===a.type?"Efectividad":"Cumplimiento";return(0,t.jsxs)("div",{className:"flex items-center justify-between w-full text-xs mt-1",children:[(0,t.jsxs)("div",{className:"flex items-center flex-wrap gap-x-2 gap-y-1 text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(X.Z,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"}),(0,t.jsx)("span",{className:"font-semibold text-foreground",children:n.reputation.toFixed(1)})]}),(0,t.jsx)(E.Z,{orientation:"vertical",className:"h-3"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(em.Z,{className:"w-4 h-4 text-green-500"}),(0,t.jsxs)("span",{className:"font-semibold text-foreground",children:[n.effectiveness.toFixed(0),"%"]}),(0,t.jsx)("span",{className:"hidden sm:inline-block",children:c})]}),(0,t.jsx)(E.Z,{orientation:"vertical",className:"h-3"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(eu.Z,{className:"w-4 h-4 text-blue-500"}),(0,t.jsx)("span",{className:"font-semibold text-foreground",children:(s=n.averagePaymentTimeMs)<=0?"0ms":s<1e3?"".concat(s,"ms"):s<6e4?"".concat((s/1e3).toFixed(1),"s"):s<36e5?"".concat(Math.round(s/6e4),"m"):"".concat(Math.round(s/36e5),"h")}),(0,t.jsx)("span",{className:"hidden sm:inline-block",children:"T. Pago"})]})]}),i&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,t.jsx)(ex.Z,{className:"w-4 h-4 text-pink-500"}),(0,t.jsx)("span",{className:"font-semibold text-foreground",children:a.giftCredits||0})]})]})}var ep=a(41671),ef=a(60044),ev=a(98728),ej=a(83774),eg=a(67782),eb=a(12749);let eN=e=>{let{value:s}=e;return(0,t.jsx)(ea.C,{variant:"secondary",className:"font-normal",children:s})};function ew(e){var s,a,r,n,c,m,u,x,h,p,f,v,g,b,N;let{provider:w,isSelfProfile:y,onContact:k}=e,C=(0,i.useRouter)(),{currentUser:S}=(0,j.a)(),z=(null===(s=w.profileSetupData)||void 0===s?void 0:s.useUsername)&&w.profileSetupData.username?w.profileSetupData.username:w.name,Z=(null===(a=w.profileSetupData)||void 0===a?void 0:a.specialty)||"Sin especialidad definida",D=(null===(r=w.profileSetupData)||void 0===r?void 0:r.providerType)==="company",E=[...(null===(c=w.profileSetupData)||void 0===c?void 0:null===(n=c.specializedData)||void 0===n?void 0:n.mainTrades)||[],...(null===(u=w.profileSetupData)||void 0===u?void 0:null===(m=u.specializedData)||void 0===m?void 0:m.mainServices)||[],...(null===(h=w.profileSetupData)||void 0===h?void 0:null===(x=h.specializedData)||void 0===x?void 0:x.beautyTrades)||[],...(null===(f=w.profileSetupData)||void 0===f?void 0:null===(p=f.specializedData)||void 0===p?void 0:p.specialties)||[],...(null===(g=w.profileSetupData)||void 0===g?void 0:null===(v=g.specializedData)||void 0===v?void 0:v.specificSkills)||[],...(null===(N=w.profileSetupData)||void 0===N?void 0:null===(b=N.specializedData)||void 0===b?void 0:b.keySkills)||[]];return(0,t.jsxs)("div",{className:"sticky top-0 z-20 bg-background/95 backdrop-blur-sm pt-4 px-4 pb-3 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[y&&S?(0,t.jsx)(eo,{user:{id:S.id,name:S.name,profileImage:S.profileImage}}):(0,t.jsxs)(o.qE,{className:"w-16 h-16 shrink-0",children:[(0,t.jsx)(o.F$,{src:w.profileImage,alt:z}),(0,t.jsx)(o.Q5,{children:z.charAt(0)})]}),(0,t.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h1",{className:"text-lg font-bold text-foreground truncate",children:z}),w.isSubscribed&&(0,t.jsx)(ep.Z,{className:"w-5 h-5 text-blue-500"}),D&&(0,t.jsx)(ef.Z,{className:"w-4 h-4 text-muted-foreground"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:Z}),(0,t.jsx)(eh,{user:w,isSelf:y})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-2 shrink-0",children:[y?(0,t.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>{C.push(D?"/profile-setup/company":"/profile-setup/personal")},children:[(0,t.jsx)(ev.Z,{className:"w-4 h-4 mr-2"}),"Ajustes"]}):(0,t.jsx)(l.z,{variant:"default",size:"sm",onClick:k,children:"Contactar"}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(ej.Z,{className:(0,d.cn)("h-5 w-5",w.isGpsActive?"text-green-500":"text-muted-foreground")})})]})]}),E.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-1.5 pt-3",children:[E.slice(0,3).map(e=>(0,t.jsx)(eN,{value:e},e)),E.length>3&&(0,t.jsxs)(eb.J2,{children:[(0,t.jsx)(eb.xo,{asChild:!0,children:(0,t.jsx)(l.z,{variant:"ghost",className:"flex items-center gap-1 text-xs p-1 h-auto text-muted-foreground",children:(0,t.jsx)(eg.Z,{className:"w-4 h-4"})})}),(0,t.jsx)(eb.yk,{className:"w-72",children:(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsx)("h4",{className:"font-bold mb-2",children:"Todas las Habilidades"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:E.map(e=>(0,t.jsx)(ea.C,{variant:"secondary",children:e},e))})]})})]})]})]})}var ey=a(84604),ek=a(962);let eC=ek.fC,eS=ek.wy,ez=ek.Fw;var eZ=a(40875);let eD=["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado","Domingo"],eE=eD.reduce((e,s)=>(e[s]={from:"09:00",to:"17:00",active:!0},e),{});function eA(e){var s,a;let{provider:i,isSelfProfile:n}=e,[c,d]=(0,m.useState)((null===(s=i.profileSetupData)||void 0===s?void 0:s.schedule)||eE),[o,x]=(0,m.useState)(!1),{toast:h}=(0,u.pm)(),p=(e,s,a)=>{d(t=>({...t,[e]:{...t[e],[s]:a}}))},f=async()=>{x(!0);try{await (0,ed.Nq)(i.id,{"profileSetupData.schedule":c}),h({title:"Horario actualizado",description:"Tus nuevos horarios de atenci\xf3n est\xe1n visibles."})}catch(e){h({variant:"destructive",title:"Error",description:e instanceof Error?e.message:"No se pudo guardar el horario."})}finally{x(!1)}};return n?(0,t.jsx)(q.Zb,{className:"bg-muted/30",children:(0,t.jsxs)(eC,{children:[(0,t.jsx)(eS,{asChild:!0,children:(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 cursor-pointer",children:[(0,t.jsx)(ey.O,{schedule:c}),(0,t.jsxs)(l.z,{variant:"ghost",size:"sm",children:["Editar",(0,t.jsx)(eZ.Z,{className:"h-4 w-4 ml-2"})]})]})}),(0,t.jsx)(ez,{children:(0,t.jsxs)(q.aY,{className:"pt-0",children:[(0,t.jsx)("div",{className:"space-y-4",children:eD.map(e=>{var s,a,i,l,r;return(0,t.jsxs)("div",{className:"flex items-center gap-4 p-2 rounded-md bg-background border",children:[(0,t.jsx)(et.r,{id:"active-".concat(e),checked:(null===(s=c[e])||void 0===s?void 0:s.active)||!1,onCheckedChange:s=>p(e,"active",s)}),(0,t.jsx)(el._,{htmlFor:"active-".concat(e),className:"flex-grow font-semibold",children:e}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(D.I,{type:"time",className:"w-24 h-8",value:(null===(a=c[e])||void 0===a?void 0:a.from)||"09:00",onChange:s=>p(e,"from",s.target.value),disabled:!(null===(i=c[e])||void 0===i?void 0:i.active)}),(0,t.jsx)("span",{children:"-"}),(0,t.jsx)(D.I,{type:"time",className:"w-24 h-8",value:(null===(l=c[e])||void 0===l?void 0:l.to)||"17:00",onChange:s=>p(e,"to",s.target.value),disabled:!(null===(r=c[e])||void 0===r?void 0:r.active)})]})]},e)})}),(0,t.jsxs)(l.z,{className:"w-full mt-4",onClick:f,disabled:o,children:[o&&(0,t.jsx)(r.Z,{className:"mr-2 h-4 w-4 animate-spin"}),o?"Guardando...":"Guardar Cambios"]})]})})]})}):(0,t.jsx)(q.Zb,{className:"bg-muted/30",children:(0,t.jsx)(q.Ol,{children:(0,t.jsx)(ey.O,{schedule:null===(a=i.profileSetupData)||void 0===a?void 0:a.schedule})})})}var eI=a(82547);function eF(e){var s;let{provider:a}=e,{currentUser:i,isContact:r}=(0,j.a)(),{toast:n}=(0,u.pm)(),c=async()=>{if(i)try{await (0,eI.iO)(i.id,a.id),n({title:"Solicitud Enviada",description:"Tu solicitud para unirte a la red de ".concat(a.name," ha sido enviada.")})}catch(e){n({variant:"destructive",title:"Error en la Solicitud",description:e.message})}};return i&&i.id!==a.id?"provider"===i.type&&(null===(s=a.profileSetupData)||void 0===s?void 0:s.providerType)==="company"?(0,t.jsx)("div",{className:"px-4",children:(0,t.jsxs)(l.z,{onClick:c,className:"w-full",children:[(0,t.jsx)(ep.Z,{className:"mr-2 h-4 w-4"}),"Solicitar Verificaci\xf3n de Empresa"]})}):a.activeAffiliation?(0,t.jsx)("div",{className:"px-4",children:(0,t.jsx)($.default,{href:"/companies/".concat(a.activeAffiliation.companyId),className:"group block",children:(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg flex items-center gap-3 border hover:border-primary/50 transition-colors",children:[(0,t.jsx)("div",{className:"w-10 h-10 shrink-0 bg-background rounded-full flex items-center justify-center",children:(0,t.jsx)(ep.Z,{className:"w-6 h-6 text-green-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Verificado por:"}),(0,t.jsx)("p",{className:"font-semibold text-foreground group-hover:underline",children:a.activeAffiliation.companyName}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:a.activeAffiliation.companySpecialty})]})]})})}):null:null}function e$(e){var s,a;let{userId:x}=e,{currentUser:h,users:p,transactions:f,isContact:v}=(0,j.a)(),{toast:g}=(0,u.pm)(),N=(0,i.useRouter)(),[w,y]=(0,m.useState)(null),[k,C]=(0,m.useState)([]),[S,z]=(0,m.useState)([]),[Z,E]=(0,m.useState)(!0),[A,I]=(0,m.useState)(""),[q,_]=(0,m.useState)([]),[M,H]=(0,m.useState)("publications"),[L,V]=(0,m.useState)(!1),[U,G]=(0,m.useState)(null),[B,J]=(0,m.useState)(null),[Y,K]=(0,m.useState)(!1),W=(null==h?void 0:h.id)===x;(0,m.useEffect)(()=>{if(!x){E(!1);return}(async()=>{E(!0);try{var e;let s=await (0,T.k2)(x);if(!s){g({variant:"destructive",title:"Error",description:"No se pudo encontrar el perfil."}),N.push("/");return}y(s);let a=null===(e=s.profileSetupData)||void 0===e?void 0:e.offerType;if("product"===a||"both"===a){let e=await (0,T.Ue)({userId:x,limitNum:50});C(e.products||[]),H("catalog")}if("service"===a||"both"===a||!a){let e=await (0,T.cx)({userId:x,limitNum:50});z(e.gallery||[]),H("publications")}}catch(e){console.error("Error loading provider data:",e),g({variant:"destructive",title:"Error",description:"No se pudo cargar el perfil del proveedor."})}finally{E(!1)}})()},[x,g,N]),(0,m.useEffect)(()=>{var e;if((null==w?void 0:null===(e=w.profileSetupData)||void 0===e?void 0:e.providerType)==="company"){let e=(0,R.IO)((0,R.hJ)(O.db,"affiliations"),(0,R.ar)("companyId","==",w.id),(0,R.ar)("status","==","approved")),s=(0,R.cf)(e,e=>{let s=e.docs.map(e=>e.data().providerId);_(p.filter(e=>s.includes(e.id)))});return()=>s()}},[w,p]);let X=(0,m.useMemo)(()=>A?k.filter(e=>e.name.toLowerCase().includes(A.toLowerCase())):k,[k,A]);if(Z)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)(r.Z,{className:"h-12 w-12 animate-spin text-primary"})});if(!w)return(0,t.jsxs)("main",{className:"container py-8 text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Perfil no encontrado"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-4",children:"No se pudo encontrar el proveedor que est\xe1s buscando."}),(0,t.jsx)(l.z,{onClick:()=>N.push("/"),className:"mt-6",children:"Volver al Inicio"})]});let ee="provider"===w.type,es=ee&&(null===(s=w.profileSetupData)||void 0===s?void 0:s.providerType)==="company",ea=null===(a=w.profileSetupData)||void 0===a?void 0:a.offerType;return(0,t.jsxs)("div",{className:"bg-background min-h-screen",children:[(0,t.jsxs)("div",{className:"container mx-auto px-0 md:px-2 max-w-2xl pb-24",children:[(0,t.jsx)(ew,{provider:w,isSelfProfile:W,onContact:()=>{h&&(0,P.bG)({recipientId:w.id,text:"\xa1Hola! Me interesa tu perfil.",conversationId:[h.id,w.id].sort().join("-"),senderId:h.id}).then(e=>N.push("/messages/".concat(e)))}}),(0,t.jsxs)("div",{className:"px-4 py-4 space-y-4",children:[(0,t.jsx)(eF,{provider:w}),(0,t.jsx)(eA,{provider:w,isSelfProfile:W})]}),W&&ee&&!es&&(0,t.jsx)("div",{className:"flex items-center gap-2 mt-4 px-4",children:(0,t.jsxs)(l.z,{variant:"outline",className:"flex-1",onClick:()=>V(!0),children:[(0,t.jsx)(n.Z,{className:"w-4 h-4 mr-2"}),"Campa\xf1as"]})}),(0,t.jsx)("div",{className:"border-b mt-4 sticky top-0 z-20 bg-background/95 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"container flex justify-around",children:[("service"===ea||"both"===ea||!ea)&&(0,t.jsx)(l.z,{variant:"ghost",className:(0,d.cn)("flex-1 rounded-none","publications"===M&&"border-b-2 border-primary text-primary"),onClick:()=>H("publications"),children:"Publicaciones"}),("product"===ea||"both"===ea)&&(0,t.jsx)(l.z,{variant:"ghost",className:(0,d.cn)("flex-1 rounded-none","catalog"===M&&"border-b-2 border-primary text-primary"),onClick:()=>H("catalog"),children:"Cat\xe1logo"}),es&&(0,t.jsx)(l.z,{variant:"ghost",className:(0,d.cn)("flex-1 rounded-none","team"===M&&"border-b-2 border-primary text-primary"),onClick:()=>H("team"),children:"Talento Asociado"})]})}),(0,t.jsxs)("div",{className:"mt-4",children:["publications"===M&&(0,t.jsx)(Q,{gallery:S,owner:w,isLoading:Z}),"catalog"===M&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"px-4",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(c.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(D.I,{placeholder:"Buscar en el cat\xe1logo...",className:"pl-9",value:A,onChange:e=>I(e.target.value)})]})}),Z?(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)(r.Z,{className:"w-6 h-6 animate-spin"})}):X.length>0?(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2 px-2",children:X.map(e=>(0,t.jsx)(b,{product:e,onDoubleClick:()=>{J(e),K(!0)}},e.id))}):(0,t.jsx)("div",{className:"text-center py-10 text-muted-foreground",children:(0,t.jsx)("p",{children:"No se encontraron productos."})})]}),"team"===M&&es&&(0,t.jsx)("div",{className:"px-4 space-y-3",children:q.length>0?q.map(e=>{var s;return(0,t.jsx)($.default,{href:"/companies/".concat(e.id),children:(0,t.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted",children:[(0,t.jsxs)(o.qE,{children:[(0,t.jsx)(o.F$,{src:e.profileImage}),(0,t.jsx)(o.Q5,{children:e.name.charAt(0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:null===(s=e.profileSetupData)||void 0===s?void 0:s.specialty})]})]})},e.id)}):(0,t.jsx)("div",{className:"text-center py-10 text-muted-foreground",children:(0,t.jsx)("p",{children:"A\xfan no tienes talento asociado."})})})]})]}),(0,t.jsx)(F,{isOpen:Y,onOpenChange:K,product:B}),(0,t.jsx)(en,{isOpen:L,onOpenChange:V}),(0,t.jsx)(ec.m,{isOpen:!!U,onOpenChange:()=>G(null),transaction:U})]})}},95937:function(e,s,a){a.d(s,{Cd:function(){return d},X:function(){return o},bZ:function(){return c}});var t=a(57437),i=a(2265),l=a(90535),r=a(93448);let n=(0,l.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",warning:"border-amber-500/50 text-amber-700 dark:border-amber-600 dark:text-amber-500 [&>svg]:text-amber-600 dark:[&>svg]:text-amber-500"}},defaultVariants:{variant:"default"}}),c=i.forwardRef((e,s)=>{let{className:a,variant:i,...l}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:(0,r.cn)(n({variant:i}),a),...l})});c.displayName="Alert";let d=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("h5",{ref:s,className:(0,r.cn)("mb-1 font-medium leading-none tracking-tight",a),...i})});d.displayName="AlertTitle";let o=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("text-sm [&_p]:leading-relaxed",a),...i})});o.displayName="AlertDescription"},75060:function(e,s,a){a.d(s,{_:function(){return d}});var t=a(57437),i=a(2265),l=a(6394),r=a(90535),n=a(93448);let c=(0,r.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(l.f,{ref:s,className:(0,n.cn)(c(),a),...i})});d.displayName=l.f.displayName},12749:function(e,s,a){a.d(s,{J2:function(){return n},xo:function(){return c},yk:function(){return d}});var t=a(57437),i=a(2265),l=a(27312),r=a(93448);let n=l.fC,c=l.xz,d=i.forwardRef((e,s)=>{let{className:a,align:i="center",sideOffset:n=4,...c}=e;return(0,t.jsx)(l.h_,{children:(0,t.jsx)(l.VY,{ref:s,align:i,sideOffset:n,className:(0,r.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...c})})});d.displayName=l.VY.displayName},69140:function(e,s,a){a.d(s,{O:function(){return l}});var t=a(57437),i=a(93448);function l(e){let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-muted",s),...a})}},94589:function(e,s,a){a.d(s,{r:function(){return n}});var t=a(57437),i=a(2265),l=a(50721),r=a(93448);let n=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(l.fC,{className:(0,r.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...i,ref:s,children:(0,t.jsx)(l.bU,{className:(0,r.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});n.displayName=l.fC.displayName},82547:function(e,s,a){a.d(s,{Cr:function(){return r},Sk:function(){return n},iO:function(){return l},zO:function(){return i}}),a(83079);var t=a(12119),i=(0,t.$)("9013b146d23fba457fa47abd5c1cc64a18aad8e7"),l=(0,t.$)("51df72862285a32fe97df954d1f4f580371e684b"),r=(0,t.$)("1e72a90e6f900d7336ec5a8281f1de84af48b4b7"),n=(0,t.$)("bd71c1a2808020a48415dffaa93fcbfd7d6e9a61")},89269:function(e,s,a){a.d(s,{x:function(){return t}}),a(83079);var t=(0,a(12119).$)("58916f5aa51f5451dd6608a06048fa71b5001e5a")},37691:function(e,s,a){a.d(s,{GG:function(){return i},Ue:function(){return n},cx:function(){return r},k2:function(){return l}}),a(83079);var t=a(12119),i=(0,t.$)("0c616a113b8092b2a091f6813b802813896764ba"),l=(0,t.$)("3114460915aded337a7fc8e5774ab0295592c367"),r=(0,t.$)("34617f29a6edb4933278e0d4a548a4261dcfec11"),n=(0,t.$)("3b050d596566f18a8c4e29705c8096fceb7da2b3")},79684:function(e,s,a){a.d(s,{R7:function(){return l},bG:function(){return i}}),a(83079);var t=a(12119);(0,t.$)("66a7e77381968e9347e32d9d375d0a488bb06bbb");var i=(0,t.$)("164e4611f07bc012094243de7aad1b85f88a7558"),l=(0,t.$)("080ba4c4ad92ec9d4477bc2807fa26292714577e")}}]);