(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2574],{99255:function(e,t,n){Promise.resolve().then(n.bind(n,56441))},92451:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},7586:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]])},86595:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},76865:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},32489:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},24369:function(e,t,n){"use strict";var a=n(2265),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useState,s=a.useEffect,l=a.useLayoutEffect,o=a.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),a=i({inst:{value:n,getSnapshot:t}}),r=a[0].inst,d=a[1];return l(function(){r.value=n,r.getSnapshot=t,c(r)&&d({inst:r})},[e,n,t]),s(function(){return c(r)&&d({inst:r}),e(function(){c(r)&&d({inst:r})})},[e]),o(n),n};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:d},82558:function(e,t,n){"use strict";e.exports=n(24369)},56441:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var a=n(57437),r=n(99376),i=n(70061),s=n(12381),l=n(79820),o=n(92451),c=n(79205);let d=(0,c.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var u=n(7586);let x=(0,c.Z)("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);var m=n(2265),f=n(6942),p=n(68946);function h(e){let{boxName:t}=e,n=(0,r.useRouter)();return(0,a.jsx)("header",{className:"sticky top-0 z-30 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b",children:(0,a.jsx)("div",{className:"container px-4 sm:px-6",children:(0,a.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,a.jsx)(s.z,{variant:"ghost",size:"icon",onClick:()=>n.push("/transactions/settings/cashier"),children:(0,a.jsx)(o.Z,{className:"h-6 w-6"})}),(0,a.jsxs)("h1",{className:"text-lg font-semibold flex items-center gap-2",children:["Detalles de Caja: ",t]}),(0,a.jsx)("div",{className:"w-8"})]})})})}let v=e=>{let{title:t,value:n,icon:r}=e;return(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(l.ll,{className:"text-sm font-medium",children:t}),(0,a.jsx)(r,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(l.aY,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:n})})]})};function y(){let e=(0,r.useParams)(),{currentUser:t,transactions:n,users:s}=(0,i.a)(),[o,c]=(0,m.useState)(null),y=e.boxId,g=(0,m.useMemo)(()=>{var e,n;return null==t?void 0:null===(n=t.profileSetupData)||void 0===n?void 0:null===(e=n.cashierBoxes)||void 0===e?void 0:e.find(e=>e.id===y)},[t,y]),j=(0,m.useMemo)(()=>n.filter(e=>e.details.cashierBoxId===y),[n,y]),b=(0,m.useMemo)(()=>j.reduce((e,t)=>e+t.amount,0),[j]),N=(0,m.useMemo)(()=>0===j.length?0:b/j.length,[j,b]);return g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{boxName:g.name}),(0,a.jsxs)("main",{className:"container py-8 max-w-4xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsx)(v,{title:"Total Recaudado",value:"$".concat(b.toFixed(2)),icon:d}),(0,a.jsx)(v,{title:"Total de Transacciones",value:j.length.toString(),icon:u.Z}),(0,a.jsx)(v,{title:"Promedio por Transacci\xf3n",value:"$".concat(N.toFixed(2)),icon:x})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{children:"Historial de Transacciones de la Caja"})}),(0,a.jsx)(l.aY,{children:j.length>0?(0,a.jsx)("div",{className:"space-y-2",children:j.map(e=>{let t=s.find(t=>t.id===e.clientId);return(0,a.jsx)(p.A,{transaction:e,otherParty:t||null,onClick:c},e.id)})}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No hay transacciones en esta caja."})})]})]}),(0,a.jsx)(f.m,{isOpen:!!o,onOpenChange:()=>c(null),transaction:o})]}):(0,a.jsx)("div",{children:"Caja no encontrada."})}},68946:function(e,t,n){"use strict";n.d(t,{A:function(){return v}});var a=n(57437),r=n(96246),i=n(69174),s=n(93448),l=n(53417),o=n(44743),c=n(4948),d=n(83578),u=n(41671),x=n(76865),m=n(45575),f=n(43681),p=n(40340);let h={"Solicitud Pendiente":{icon:l.Z,color:"text-yellow-500",label:"Pendiente"},"Cotizaci\xf3n Recibida":{icon:o.Z,color:"text-blue-500",label:"Cotizado"},"Acuerdo Aceptado - Pendiente de Ejecuci\xf3n":{icon:c.Z,color:"text-cyan-500",label:"Acordado"},"Servicio en Curso":{icon:c.Z,color:"text-blue-500",label:"En Curso"},"En Disputa":{icon:d.Z,color:"text-red-500",label:"Disputa"},Pagado:{icon:u.Z,color:"text-green-500",label:"Pagado"},Resuelto:{icon:u.Z,color:"text-green-500",label:"Resuelto"},"Carrito Activo":{icon:x.Z,color:"text-gray-500",label:"En Carrito"},"Pre-factura Pendiente":{icon:x.Z,color:"text-gray-500",label:"Pre-factura"},"Finalizado - Pendiente de Pago":{icon:m.Z,color:"text-orange-500",label:"Por Pagar"},"Pendiente de Confirmaci\xf3n del Cliente":{icon:m.Z,color:"text-yellow-600",label:"Por Confirmar"},"Pago Enviado - Esperando Confirmaci\xf3n":{icon:f.Z,color:"text-blue-500",label:"Pago Enviado"},"En Reparto":{icon:p.Z,color:"text-blue-500",label:"En Reparto"}},v=e=>{var t,n,l,o,c;let{transaction:d,otherParty:u,onClick:m}=e,f=(null===(t=h[d.status])||void 0===t?void 0:t.icon)||x.Z,p=(null===(n=h[d.status])||void 0===n?void 0:n.color)||"text-gray-500",v="",y="";if("Sistema"===d.type&&d.details.system){let e=d.details.system.match(/Cuota (\d+)\/(\d+)/);if(e){let t=parseInt(e[1],10),n=parseInt(e[2],10);y=t===n?"\xdaltima Cuota":"Cuota ".concat(t,"/").concat(n),v=d.details.system.replace(/Cuota \d+\/\d+ de /,"")}else v=d.details.system}else"credicora"===d.details.paymentMethod&&d.details.initialPayment?(y="Inicial de Compra",v=d.details.serviceName||(null===(o=d.details.items)||void 0===o?void 0:o.map(e=>e.product.name).join(", "))||""):v="Servicio"===d.type?d.details.serviceName||"Servicio sin nombre":"Compra"===d.type||"Compra Directa"===d.type?(null===(c=d.details.items)||void 0===c?void 0:c.map(e=>"".concat(e.quantity,"x ").concat(e.product.name)).join(", "))||d.details.system||"Compra sin detalle":"Transacci\xf3n del sistema";return(0,a.jsxs)("div",{className:"flex items-center gap-4 p-3 hover:bg-muted/50 rounded-lg cursor-pointer",onClick:()=>m(d),children:[(0,a.jsxs)(r.qE,{className:"h-10 w-10",children:[(0,a.jsx)(r.F$,{src:null==u?void 0:u.profileImage,alt:null==u?void 0:u.name}),(0,a.jsx)(r.Q5,{children:(null==u?void 0:u.name.charAt(0))||"S"})]}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"font-semibold text-sm",children:(null==u?void 0:u.name)||"Sistema"}),d.details.paymentFromThirdParty&&(0,a.jsx)(i.C,{variant:"destructive",className:"h-5 text-xs",children:"!"})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground truncate max-w-[200px]",children:[y&&(0,a.jsxs)("span",{className:"font-bold text-foreground",children:[y,": "]}),v]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-bold text-sm",children:["$",d.amount.toFixed(2)]}),(0,a.jsxs)("div",{className:(0,s.cn)("flex items-center justify-end gap-1 text-xs font-semibold",p),children:[(0,a.jsx)(f,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:(null===(l=h[d.status])||void 0===l?void 0:l.label)||d.status})]})]})]})}},61146:function(e,t,n){"use strict";n.d(t,{NY:function(){return w},Ee:function(){return k},fC:function(){return N}});var a=n(2265),r=n(73966),i=n(26606),s=n(61188),l=n(66840),o=n(82558);function c(){return()=>{}}var d=n(57437),u="Avatar",[x,m]=(0,r.b)(u),[f,p]=x(u),h=a.forwardRef((e,t)=>{let{__scopeAvatar:n,...r}=e,[i,s]=a.useState("idle");return(0,d.jsx)(f,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:(0,d.jsx)(l.WV.span,{...r,ref:t})})});h.displayName=u;var v="AvatarImage",y=a.forwardRef((e,t)=>{let{__scopeAvatar:n,src:r,onLoadingStatusChange:u=()=>{},...x}=e,m=p(v,n),f=function(e,t){let{referrerPolicy:n,crossOrigin:r}=t,i=(0,o.useSyncExternalStore)(c,()=>!0,()=>!1),l=a.useRef(null),d=i?(l.current||(l.current=new window.Image),l.current):null,[u,x]=a.useState(()=>b(d,e));return(0,s.b)(()=>{x(b(d,e))},[d,e]),(0,s.b)(()=>{let e=e=>()=>{x(e)};if(!d)return;let t=e("loaded"),a=e("error");return d.addEventListener("load",t),d.addEventListener("error",a),n&&(d.referrerPolicy=n),"string"==typeof r&&(d.crossOrigin=r),()=>{d.removeEventListener("load",t),d.removeEventListener("error",a)}},[d,r,n]),u}(r,x),h=(0,i.W)(e=>{u(e),m.onImageLoadingStatusChange(e)});return(0,s.b)(()=>{"idle"!==f&&h(f)},[f,h]),"loaded"===f?(0,d.jsx)(l.WV.img,{...x,ref:t,src:r}):null});y.displayName=v;var g="AvatarFallback",j=a.forwardRef((e,t)=>{let{__scopeAvatar:n,delayMs:r,...i}=e,s=p(g,n),[o,c]=a.useState(void 0===r);return a.useEffect(()=>{if(void 0!==r){let e=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(e)}},[r]),o&&"loaded"!==s.imageLoadingStatus?(0,d.jsx)(l.WV.span,{...i,ref:t}):null});function b(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}j.displayName=g;var N=h,k=y,w=j}},function(e){e.O(0,[3609,9015,7337,2505,3125,2522,2939,7514,9027,1636,803,422,2971,2117,1744],function(){return e(e.s=99255)}),_N_E=e.O()}]);