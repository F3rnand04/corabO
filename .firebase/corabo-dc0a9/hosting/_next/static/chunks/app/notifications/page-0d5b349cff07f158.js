(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5193],{10593:function(e,t,s){Promise.resolve().then(s.bind(s,96070))},48736:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},51817:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},25523:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return a}});let a=s(47043)._(s(2265)).default.createContext(null)},96070:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(57437),n=s(2265),r=s(99376),i=s(27648),c=s(70061),l=s(12381);let d=(0,s(79205).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);var o=s(48736),u=s(92451),f=s(51817),m=s(24158),x=s(93292),h=s(93448),p=s(69140),b=s(97409),j=s(79820);let g={new_campaign:d,payment_reminder:d,admin_alert:d,welcome:d,affiliation_request:d,payment_warning:d,payment_due:d,new_publication:d,cashier_request:d,new_quote_request:d,monthly_invoice:o.Z,tutorial_request:d,tutorial_payment_request:d,live_access_request:d};function v(){let e=(0,r.useRouter)();return(0,a.jsx)("header",{className:"sticky top-0 z-30 bg-background/95 backdrop-blur-sm border-b",children:(0,a.jsx)("div",{className:"container px-4 sm:px-6",children:(0,a.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,a.jsx)(l.z,{variant:"ghost",size:"icon",onClick:()=>e.back(),children:(0,a.jsx)(u.Z,{className:"h-6 w-6"})}),(0,a.jsxs)("h1",{className:"text-xl font-bold flex items-center gap-2",children:[(0,a.jsx)(d,{className:"h-5 w-5"})," Notificaciones"]}),(0,a.jsx)("div",{className:"w-8"})]})})})}function N(){let{currentUser:e}=(0,c.a)(),[t,s]=(0,n.useState)([]),[r,l]=(0,n.useState)(!0),[o,u]=(0,n.useState)(void 0),[N,y]=(0,n.useState)(!0),w=(0,n.useRef)(null),_=(0,n.useCallback)(async t=>{if(e&&(N||!t)){l(!0);try{let a=await (0,b.TH)(e.id,20,t);s(e=>t?[...e,...a.notifications]:a.notifications),u(a.lastVisibleDocId),y(!!a.lastVisibleDocId)}catch(e){console.error("Failed to fetch notifications:",e)}finally{l(!1)}}},[e,N]);(0,n.useEffect)(()=>{e&&((0,b.L5)(e.id),_())},[e,_]);let k=(0,n.useCallback)(e=>{!r&&(w.current&&w.current.disconnect(),w.current=new IntersectionObserver(e=>{e[0].isIntersecting&&N&&_(o)}),e&&w.current.observe(e))},[r,N,o,_]);return(0,a.jsxs)("div",{className:"bg-muted/30 min-h-screen",children:[(0,a.jsx)(v,{}),(0,a.jsx)("main",{className:"container max-w-4xl mx-auto py-8",children:(0,a.jsxs)("div",{className:"space-y-3",children:[r&&0===t.length?Array.from({length:8}).map((e,t)=>(0,a.jsx)(p.O,{className:"h-20 w-full"},t)):t.length>0?t.map((e,s)=>{var n;let r=g[e.type]||d,c="monthly_invoice"===e.type,l=s===t.length-1;return(0,a.jsx)("div",{ref:l?k:null,children:(0,a.jsx)(i.default,{href:e.link||"#",passHref:!0,children:(0,a.jsx)(j.Zb,{className:(0,h.cn)("hover:bg-muted/50 transition-colors cursor-pointer",!e.isRead&&"bg-primary/5 border-primary/20"),children:(0,a.jsxs)(j.aY,{className:"p-4 flex items-center gap-4",children:[(0,a.jsx)("div",{className:(0,h.cn)("w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",e.isRead?"bg-muted text-muted-foreground":"bg-primary text-primary-foreground"),children:(0,a.jsx)(r,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("p",{className:"font-semibold",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.message}),c&&(null===(n=e.metadata)||void 0===n?void 0:n.invoiceDetails)&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground mt-1 flex flex-wrap gap-x-3",children:[(0,a.jsxs)("span",{children:["Subtotal: ",(0,a.jsxs)("strong",{children:["$",e.metadata.invoiceDetails.subtotal.toFixed(2)]})]}),(0,a.jsxs)("span",{children:["IVA: ",(0,a.jsxs)("strong",{children:["$",e.metadata.invoiceDetails.iva.toFixed(2)]})]}),(0,a.jsxs)("span",{children:["Total: ",(0,a.jsxs)("strong",{className:"text-foreground",children:["$",e.metadata.invoiceDetails.total.toFixed(2)]})]})]})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground text-right shrink-0",children:(0,m.Q)(new Date(e.timestamp),{addSuffix:!0,locale:x.es})})]})})})},e.id)}):(0,a.jsxs)("div",{className:"text-center py-20 text-muted-foreground",children:[(0,a.jsx)(d,{className:"w-16 h-16 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg",children:"No tienes notificaciones nuevas."})]}),r&&t.length>0&&(0,a.jsx)("div",{className:"flex justify-center py-4",children:(0,a.jsx)(f.Z,{className:"h-6 w-6 animate-spin"})})]})})]})}},79820:function(e,t,s){"use strict";s.d(t,{Ol:function(){return c},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},eW:function(){return u},ll:function(){return l}});var a=s(57437),n=s(2265),r=s(93448);let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});i.displayName="Card";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...n})});c.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});l.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...n})});d.displayName="CardDescription";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...n})});o.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...n})});u.displayName="CardFooter"},69140:function(e,t,s){"use strict";s.d(t,{O:function(){return r}});var a=s(57437),n=s(93448);function r(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-muted",t),...s})}},97409:function(e,t,s){"use strict";s.d(t,{L5:function(){return r},TH:function(){return i},ag:function(){return n}}),s(83079);var a=s(12119);(0,a.$)("2b9ce933d7c29e5e957d34966d77b3e094e72c10");var n=(0,a.$)("b98e8fce29384e6b765a98ee8617ec9033717ee6"),r=(0,a.$)("05083c08ce5bd60cb7b460e0597b39c3cef11491"),i=(0,a.$)("8a3d00a8e67b61fb3aed8adb05b56cdc01f37a01")}},function(e){e.O(0,[3609,9015,2522,2939,7648,2859,3593,803,2971,2117,1744],function(){return e(e.s=10593)}),_N_E=e.O()}]);