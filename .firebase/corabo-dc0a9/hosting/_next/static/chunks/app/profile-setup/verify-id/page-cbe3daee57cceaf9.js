(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7790],{4617:function(e,t,a){Promise.resolve().then(a.bind(a,88091))},88156:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("CloudUpload",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]])},48736:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},51817:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},76865:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},32489:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},88091:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var r=a(57437),n=a(2265),i=a(99376),l=a(33145),s=a(70061),d=a(12381),o=a(79820),c=a(75060),u=a(23340),f=a(51817),m=a(48736),p=a(32489),v=a(88156),h=a(76865),x=a(95937),b=a(3269),y=a(5978);let N=[{code:"VE",name:"Venezuela",idLabel:"C\xe9dula de Identidad",companyIdLabel:"RIF"},{code:"CO",name:"Colombia",idLabel:"C\xe9dula de Ciudadan\xeda",companyIdLabel:"NIT"},{code:"CL",name:"Chile",idLabel:"RUT / DNI",companyIdLabel:"RUT"},{code:"ES",name:"Espa\xf1a",idLabel:"DNI / NIE",companyIdLabel:"NIF"},{code:"MX",name:"M\xe9xico",idLabel:"CURP",companyIdLabel:"RFC"}];function g(){var e;let{currentUser:t,setCurrentUser:a}=(0,s.a)(),{toast:g}=(0,u.pm)(),j=(0,i.useRouter)(),[w,k]=(0,n.useState)(null),[C,Z]=(0,n.useState)(null),[R,D]=(0,n.useState)(!1),[L,I]=(0,n.useState)(!1),[A,M]=(0,n.useState)(!0),S=(0,n.useRef)(null);if((0,n.useEffect)(()=>{t&&t.name&&t.idNumber?(M(!1),t.idDocumentUrl&&(D(t.idDocumentUrl.startsWith("data:application/pdf")),Z(t.idDocumentUrl))):t&&(g({variant:"destructive",title:"Faltan Datos",description:"Completa tu registro inicial antes de verificar."}),j.push("/profile-setup"))},[t,j,g]),A||!t)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)(f.Z,{className:"h-12 w-12 animate-spin"})});let E=(null===(e=t.profileSetupData)||void 0===e?void 0:e.providerType)==="company",F=N.find(e=>e.code===t.country),z=E?(null==F?void 0:F.companyIdLabel)||"Documento Fiscal":(null==F?void 0:F.idLabel)||"Documento de Identidad",P=async e=>{var a;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(r){k(r),D("application/pdf"===r.type);let e=new FileReader;e.onloadend=async()=>{let a=e.result;Z(a),await (0,b.Nq)(t.id,{idDocumentUrl:a})},e.readAsDataURL(r)}},T=async()=>{Z(null),k(null),D(!1),t&&await (0,b.Nq)(t.id,{idDocumentUrl:(0,y.AK)()})},U=async()=>{if(!C||!t){g({variant:"destructive",title:"Falta Documento",description:"Por favor, sube una imagen de tu documento."});return}I(!0);try{let e={idVerificationStatus:"pending",isTransactionsActive:!0};await (0,b.Nq)(t.id,e),a(t=>t?{...t,...e}:null),g({title:"\xa1Cuenta Activada!",description:"Tus transacciones han sido habilitadas. Tu documento ser\xe1 revisado por un administrador pronto.",className:"bg-green-100 text-green-800"}),j.push("/profile")}catch(e){console.error("Submission for review failed:",e),g({variant:"destructive",title:"Error de Env\xedo",description:"Ocurri\xf3 un error. Int\xe9ntalo de nuevo."})}finally{I(!1)}};return(0,r.jsx)("div",{className:"container mx-auto max-w-2xl py-8",children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[(0,r.jsx)(o.ll,{children:"Verificaci\xf3n y Activaci\xf3n de Cuenta"}),(0,r.jsx)(o.SZ,{children:"Sube tu documento para activar las transacciones. Un administrador lo revisar\xe1 m\xe1s tarde."})]}),(0,r.jsxs)(o.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(c._,{htmlFor:"id-upload",className:"font-semibold",children:["Sube tu ",z]}),(0,r.jsx)("input",{type:"file",ref:S,onChange:P,className:"hidden",id:"id-upload",accept:"image/*,application/pdf"}),C?(0,r.jsxs)("div",{className:"relative group w-full aspect-[1.58] rounded-md overflow-hidden border bg-muted",children:[R?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,r.jsx)(m.Z,{className:"w-16 h-16 text-muted-foreground"}),(0,r.jsx)("p",{className:"mt-2 font-semibold",children:"Archivo PDF Cargado"})]}):(0,r.jsx)(l.default,{src:C,alt:"Vista previa del documento",fill:!0,style:{objectFit:"contain"}}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,r.jsx)(d.z,{variant:"destructive",size:"icon",onClick:T,children:(0,r.jsx)(p.Z,{className:"h-5 w-5"})})})]}):(0,r.jsxs)("div",{onClick:()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.click()},className:"w-full aspect-[1.58] border-2 border-dashed rounded-lg flex flex-col items-center justify-center cursor-pointer hover:bg-muted/50 transition-colors",children:[(0,r.jsx)(v.Z,{className:"w-12 h-12 text-muted-foreground"}),(0,r.jsx)("p",{className:"mt-2 font-semibold",children:"Haz clic para subir un archivo"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"JPG, PNG o PDF"})]})]}),(0,r.jsxs)(x.bZ,{children:[(0,r.jsx)(h.Z,{className:"h-4 w-4"}),(0,r.jsx)(x.Cd,{children:"Activaci\xf3n Inmediata"}),(0,r.jsx)(x.X,{children:"Al enviar tu documento, tu cuenta ser\xe1 activada para transacciones inmediatamente. La verificaci\xf3n manual se completar\xe1 luego para garantizar la seguridad de la comunidad."})]}),(0,r.jsxs)(d.z,{onClick:U,disabled:!C||L,className:"w-full bg-primary text-primary-foreground hover:bg-primary/90",children:[L?(0,r.jsx)(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}):null,L?"Enviando...":"Enviar a Revisi\xf3n y Activar Cuenta"]}),(0,r.jsx)(d.z,{variant:"secondary",onClick:()=>j.push("/profile"),className:"w-full",children:"Volver al Perfil"})]})]})})}},95937:function(e,t,a){"use strict";a.d(t,{Cd:function(){return o},X:function(){return c},bZ:function(){return d}});var r=a(57437),n=a(2265),i=a(90535),l=a(93448);let s=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",warning:"border-amber-500/50 text-amber-700 dark:border-amber-600 dark:text-amber-500 [&>svg]:text-amber-600 dark:[&>svg]:text-amber-500"}},defaultVariants:{variant:"default"}}),d=n.forwardRef((e,t)=>{let{className:a,variant:n,...i}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(s({variant:n}),a),...i})});d.displayName="Alert";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",a),...n})});o.displayName="AlertTitle";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",a),...n})});c.displayName="AlertDescription"},79820:function(e,t,a){"use strict";a.d(t,{Ol:function(){return s},SZ:function(){return o},Zb:function(){return l},aY:function(){return c},eW:function(){return u},ll:function(){return d}});var r=a(57437),n=a(2265),i=a(93448);let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});l.displayName="Card";let s=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...n})});s.displayName="CardHeader";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});d.displayName="CardTitle";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...n})});o.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...n})});c.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...n})});u.displayName="CardFooter"},75060:function(e,t,a){"use strict";a.d(t,{_:function(){return o}});var r=a(57437),n=a(2265),i=a(6394),l=a(90535),s=a(93448);let d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(i.f,{ref:t,className:(0,s.cn)(d(),a),...n})});o.displayName=i.f.displayName},6394:function(e,t,a){"use strict";a.d(t,{f:function(){return s}});var r=a(2265),n=a(66840),i=a(57437),l=r.forwardRef((e,t)=>(0,i.jsx)(n.WV.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var s=l},66840:function(e,t,a){"use strict";a.d(t,{WV:function(){return s},jH:function(){return d}});var r=a(2265),n=a(54887),i=a(37053),l=a(57437),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,i.Z8)(`Primitive.${t}`),n=r.forwardRef((e,r)=>{let{asChild:n,...i}=e,s=n?a:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(s,{...i,ref:r})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function d(e,t){e&&n.flushSync(()=>e.dispatchEvent(t))}}},function(e){e.O(0,[3609,9015,2522,2939,3145,803,2971,2117,1744],function(){return e(e.s=4617)}),_N_E=e.O()}]);